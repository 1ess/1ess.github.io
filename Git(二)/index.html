<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><title>Git(一) · A Sort Of A Blog</title><meta name="description" content="本篇，我们来介绍一下 Git 的历史记录的浏览查看以及分支的基本操作。
Restore a Deleted File# 找到这个文件被删除之前的那个 commitgit log --oneline -- &amp;#123;filename&amp;#125;# 使用该 commitId 恢复文件git check"><meta name="keywords" content=""><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="https://cdn.jsdelivr.net/gh/1ess/cdn/h4cker/favicon-32x32.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style-dark.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 5.4.0"></head><body><div id="stage" class="container"><div class="row"><div id="side-bar" class="col-sm-3 col-xs-12 side-container invisible"><div class="vertical-text site-title"><h3 tabindex="-1" class="site-title-small"><a href="/" class="a-title">0x7c00</a></h3><h1 tabindex="-1" class="site-title-large"><a href="/" class="a-title">张冬冬的博客</a></h1><!--h6(onclick="triggerSiteNav()") Trigger--></div><br class="visible-lg visible-md visible-sm"><div id="site-nav" class="site-title-links"><ul><li><a href="/">首頁</a></li><li><a href="/archives">歸檔</a></li><li class="soc"><a href="https://github.com/1ess" target="_blank" rel="noopener noreferrer"><i class="fa fa-github">&nbsp;</i></a><a href="https://1ess.github.io/atom.xml" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2021&nbsp;</p><p>如果五分钟后她必须进安检，如果安检在十米之外</p><p>那意味着，你们可以亲吻四分五十秒。&nbsp;</p></footer></div></div></div><div id="main-container" class="col-sm-9 col-xs-12 main-container invisible"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a>Git(一)</a></p><p class="post-meta"><span class="date meta-item">發佈於&nbsp;2020-12-29</span></p><p class="post-abstract"><p>本篇，我们来介绍一下 Git 的历史记录的浏览查看以及分支的基本操作。</p>
<h3 id="Restore-a-Deleted-File"><a href="#Restore-a-Deleted-File" class="headerlink" title="Restore a Deleted File"></a>Restore a Deleted File</h3><figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 找到这个文件被删除之前的那个 commit</span><br>git <span class="hljs-built_in">log</span> --oneline -- &#123;filename&#125;<br><br><span class="hljs-comment"># 使用该 commitId 恢复文件</span><br>git checkout &#123;commitid&#125; &#123;filename&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Blaming"><a href="#Blaming" class="headerlink" title="Blaming"></a>Blaming</h3><figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh">git blame -L &#123;a,b&#125; &#123;filename&#125;<br></code></pre></td></tr></table></figure>

<p>其中，a 为起始行号，b 为终止行号。</p>
<h3 id="Tagging"><a href="#Tagging" class="headerlink" title="Tagging"></a>Tagging</h3><figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 创建 Tag</span><br>git tag -a &#123;tagname&#125; -m &#123;message&#125; &#123;commitid&#125;<br><br><span class="hljs-comment"># 删除 Tag</span><br>git tag -d &#123;tagname&#125;<br><br><span class="hljs-comment"># 查看已创建的 Tag</span><br>git tag<br></code></pre></td></tr></table></figure>

<h3 id="Branch"><a href="#Branch" class="headerlink" title="Branch"></a>Branch</h3><figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 创建分支</span><br>git branch &#123;branchname&#125;<br><br><span class="hljs-comment"># 查看分支</span><br>git branch<br><br><span class="hljs-comment"># 切换分支</span><br>git switch &#123;branchname&#125;<br><br><span class="hljs-comment"># 创建并切换分支</span><br>git switch -C &#123;branchname&#125;<br><br><span class="hljs-comment"># 分支重命名</span><br>git branch -m &#123;oldbranchname&#125; &#123;newbranchname&#125;<br><br><span class="hljs-comment"># 删除分支</span><br>git branch -d &#123;branchname&#125;<br><br><span class="hljs-comment"># 强制删除未合并分支</span><br>git branch -D &#123;branchname&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Compare-the-Branch"><a href="#Compare-the-Branch" class="headerlink" title="Compare the Branch"></a>Compare the Branch</h3><figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 比较 branch1 和 branch2 之前的区别</span><br>git diff &#123;branchname1&#125;..&#123;branchname2&#125;<br><br><span class="hljs-comment"># 比较当前分支与某 branch 的区别</span><br>git diff &#123;branchname&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Stashing"><a href="#Stashing" class="headerlink" title="Stashing"></a>Stashing</h3><p>当我们在某一分支有未提交的修改，我们无法切换分支。我们可以使用 stash 命令暂存修改。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 创建 stash</span><br>git stash push -m &#123;message&#125;<br><br><span class="hljs-comment"># 查看 stash 列表</span><br>git stash list<br><br><span class="hljs-comment"># 应用某个 stash</span><br>git stash apply &#123;stashindex&#125;<br><br><span class="hljs-comment"># 删除 stash</span><br>git stash drop &#123;stashindex&#125;<br><br><span class="hljs-comment"># 清空 stash 列表</span><br>git stash clear<br></code></pre></td></tr></table></figure>

<h3 id="Merging"><a href="#Merging" class="headerlink" title="Merging"></a>Merging</h3><p>合并有两种方式: </p>
<ol>
<li>Fast-forwarding merges</li>
<li>3-way merges</li>
</ol>
<p>一般情况，我们合并时会使用 –no-ff 参数禁用 Fast-forward 来使分支更加清晰。<br>为避免忘记使用该参数，我们也可以使用命令: </p>
<figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh">git config --global ff no<br></code></pre></td></tr></table></figure>

<p>来禁用仓库的 Fast-forwarding merges。</p>
<h3 id="View-the-Merged-Branch"><a href="#View-the-Merged-Branch" class="headerlink" title="View the Merged Branch"></a>View the Merged Branch</h3><figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 查看已合并到当前分支的所有分支</span><br>git branch --merged<br><br><span class="hljs-comment"># 查看未合并到当前分支的所有分支</span><br>git branch --no-merged<br></code></pre></td></tr></table></figure>

<h3 id="Undoing-a-Faulty-Merge"><a href="#Undoing-a-Faulty-Merge" class="headerlink" title="Undoing a Faulty Merge"></a>Undoing a Faulty Merge</h3><figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh">git reset --hard &#123;commitid&#125;<br></code></pre></td></tr></table></figure>

<p>reset 命令有三个可选参数: </p>
<ul>
<li>soft: 只会改变本地仓库，不会改变工作区和暂存区</li>
<li>mixed: 改变本地仓库和暂存区，不会改变工作区，这是默认选项</li>
<li>hard: 同时改变本地仓库、暂存区和工作区</li>
</ul>
<h3 id="查看远程仓库信息"><a href="#查看远程仓库信息" class="headerlink" title="查看远程仓库信息"></a>查看远程仓库信息</h3><figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh">git remote -v<br></code></pre></td></tr></table></figure>

<h3 id="Fetching"><a href="#Fetching" class="headerlink" title="Fetching"></a>Fetching</h3><p>我们使用 fetch 命令从远端拉取最新更新: </p>
<figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh">git fetch<br></code></pre></td></tr></table></figure>

<p>拉取之后还需要 merge 操作，将本地文件与远端文件合并。</p>
<h3 id="Pulling"><a href="#Pulling" class="headerlink" title="Pulling"></a>Pulling</h3><p>pull = fetch + merge: </p>
<figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh">git pull<br></code></pre></td></tr></table></figure>

<h3 id="Pushing"><a href="#Pushing" class="headerlink" title="Pushing"></a>Pushing</h3><figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh">git push<br></code></pre></td></tr></table></figure>

<h3 id="Sharing-Tags"><a href="#Sharing-Tags" class="headerlink" title="Sharing Tags"></a>Sharing Tags</h3><figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 推送 tag</span><br>git push origin &#123;tagname&#125;<br><br><span class="hljs-comment"># 删除 tag</span><br>git push origin --delete &#123;tagname&#125;<br></code></pre></td></tr></table></figure>

<h3 id="Sharing-Branches"><a href="#Sharing-Branches" class="headerlink" title="Sharing Branches"></a>Sharing Branches</h3><figure class="highlight sh"><table><tr><td class="code"><pre><code class="hljs sh"><span class="hljs-comment"># 将本地分支推到远端</span><br>git push -u origin &#123;branchname&#125;<br><br><span class="hljs-comment"># 删除远端分支</span><br>git push -d origin &#123;branchname&#125;<br></code></pre></td></tr></table></figure></p></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%20From%20Zero%20To%20Hero(%E4%B8%80)/" title="数据结构 From Zero To Hero(一)"><i class="fa fa-angle-double-left"></i>&nbsp;上一篇: 数据结构 From Zero To Hero(一)</a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/Git(%E4%B8%80)/" title="Git(一)">下一篇: Git(一)&nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2021&nbsp;</p><p>如果五分钟后她必须进安检，如果安检在十米之外</p><p>那意味着，你们可以亲吻四分五十秒。&nbsp;</p></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script></body></html>