<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>A Sort Of A Blog</title>
  
  
  <link href="https://1ess.github.io/atom.xml" rel="self"/>
  
  <link href="https://1ess.github.io/"/>
  <updated>2021-07-14T12:33:16.380Z</updated>
  <id>https://1ess.github.io/</id>
  
  <author>
    <name>Stephen Chang</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/ASP.Net%20API(%E4%BA%8C)/"/>
    <id>https://1ess.github.io/ASP.Net%20API(%E4%BA%8C)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>之前我们说过 Web MVC 中的路由，本篇，我们看看如何配置 Web API 路由。</p><p>Web API 路由类似于 ASP.NET MVC 路由。它将传入的 HTTP 请求路由到 Web API Controller 上的特定 Action 方法。</p><p>Web API 支持两种方式的路由: </p><ul><li>基于约定的路由(Convention-Based Routing)</li><li>特性路由(Attribute Routing)</li></ul><h2 id="基于约定的路由"><a href="#基于约定的路由" class="headerlink" title="基于约定的路由"></a>基于约定的路由</h2><hr><p>在基于约定的路由中，Web API 使用路由模板来确定要执行的 Controller 和 Action 方法。必须至少将一个路由模板添加到路由表中才能处理各种 HTTP 请求。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">WebApiConfig</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Register</span><span class="token punctuation">(</span>HttpConfiguration config<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// Enable attribute routing</span>        config<span class="token punctuation">.</span><span class="token function">MapHttpAttributeRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// Add default route using convention-based routing</span>        config<span class="token punctuation">.</span>Routes<span class="token punctuation">.</span><span class="token function">MapHttpRoute</span><span class="token punctuation">(</span>            name<span class="token punctuation">:</span> <span class="token string">"DefaultApi"</span><span class="token punctuation">,</span>            routeTemplate<span class="token punctuation">:</span> <span class="token string">"api/&amp;#123;controller&amp;#125;/&amp;#123;id&amp;#125;"</span><span class="token punctuation">,</span>            defaults<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id <span class="token operator">=</span> RouteParameter<span class="token punctuation">.</span>Optional <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上面的 config.MapHttpAttributeRoutes() 方法作用是启用特性路由。<br>config.Routes 是 HttpRouteCollection 类型的路由表或路由集合，使用 MapHttpRoute() 扩展方法在路由表中添加 DefaultApi 路由。</p><p>可以创建 IHttpRoute 实例并手动将其添加到集合中，如下: </p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">// define route</span>IHttpRoute defaultRoute <span class="token operator">=</span> config<span class="token punctuation">.</span>Routes<span class="token punctuation">.</span><span class="token function">CreateRoute</span><span class="token punctuation">(</span><span class="token string">"api/&amp;#123;controller&amp;#125;/&amp;#123;id&amp;#125;"</span><span class="token punctuation">,</span>                                             <span class="token keyword">new</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id <span class="token operator">=</span> RouteParameter<span class="token punctuation">.</span>Optional <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Add route</span>config<span class="token punctuation">.</span>Routes<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">"DefaultApi"</span><span class="token punctuation">,</span> defaultRoute<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>如果 Web API 框架找不到传入请求的匹配路由，同 Web MVC 一样，将发送 404 错误响应。<br>注意: Web API 还支持与 ASP.NET MVC 相同的路由，在 URL 中包含 Action 方法名称。</p><h3 id="多路由"><a href="#多路由" class="headerlink" title="多路由"></a>多路由</h3><p>可以使用 HttpConfiguration 对象在 Web API 中配置多个路由: </p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">WebApiConfig</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Register</span><span class="token punctuation">(</span>HttpConfiguration config<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span><span class="token function">MapHttpAttributeRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">// foo route</span>        config<span class="token punctuation">.</span>Routes<span class="token punctuation">.</span><span class="token function">MapHttpRoute</span><span class="token punctuation">(</span>            name<span class="token punctuation">:</span> <span class="token string">"Foo"</span><span class="token punctuation">,</span>            routeTemplate<span class="token punctuation">:</span> <span class="token string">"api/foo/&amp;#123;id&amp;#125;"</span><span class="token punctuation">,</span>            defaults<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> controller<span class="token operator">=</span><span class="token string">"foo"</span><span class="token punctuation">,</span> id <span class="token operator">=</span> RouteParameter<span class="token punctuation">.</span>Optional <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>            constraints<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id <span class="token operator">=</span><span class="token string">"/d+"</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token comment" spellcheck="true">// default route</span>        config<span class="token punctuation">.</span>Routes<span class="token punctuation">.</span><span class="token function">MapHttpRoute</span><span class="token punctuation">(</span>            name<span class="token punctuation">:</span> <span class="token string">"DefaultApi"</span><span class="token punctuation">,</span>            routeTemplate<span class="token punctuation">:</span> <span class="token string">"api/&amp;#123;controller&amp;#125;/&amp;#123;id&amp;#125;"</span><span class="token punctuation">,</span>            defaults<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id <span class="token operator">=</span> RouteParameter<span class="token punctuation">.</span>Optional <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>我们在 DefaultApi 路由之前配置了 Foo 路由。因此，任何传入的请求将首先与 Foo 路由匹配，如果不匹配，则再与 DefaultApi 路由进行匹配。</p><p>注意: 在路由模板中使用 api 的原因只是为了避免 MVC 控制器和 Web API 控制器混淆。</p><h3 id="特性路由"><a href="#特性路由" class="headerlink" title="特性路由"></a>特性路由</h3><p>Web API 2 支持特性路由。顾名思义，属性路由使用[Route()]特性来定义路由。该特性可以应用于任何 Controller 或 Action 方法。</p><p>要使用 Web API 进行特性路由，必须通过调用 config.MapHttpAttributeRoutes() 方法在 WebApiConfig 中启用它。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FooController</span> <span class="token punctuation">:</span> ApiController<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token punctuation">[</span><span class="token function">Route</span><span class="token punctuation">(</span><span class="token string">"api/foo/bars"</span><span class="token punctuation">)</span><span class="token punctuation">]</span>    <span class="token keyword">public</span> IEnumerable<span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token string">"bar1"</span><span class="token punctuation">,</span> <span class="token string">"bar2"</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>则我们通过 <a href="http://localhost:1234/api/foo/bars">http://localhost:1234/api/foo/bars</a> 访问上面的 Get 方法。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;之前我们说过 Web MVC 中的路由，本篇，我们看看如何配置 Web API 路由。&lt;/p&gt;
&lt;p&gt;Web API 路由类似于 ASP.NET MVC 路由。它将传入的 HTTP 请求路由到 Web API Controller 上的特定 Action 方法。&lt;/p&gt;
&lt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/ASP.Net%20API(%E4%B8%89)/"/>
    <id>https://1ess.github.io/ASP.Net%20API(%E4%B8%89)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>了解了 Web API 如何将 HTTP 请求路由到 Controller 和 Action 方法。我们将再看看 Web API 如何将 HTTP 请求数据绑定到操作方法的参数。</p><h2 id="Model-Binding"><a href="#Model-Binding" class="headerlink" title="Model Binding"></a>Model Binding</h2><hr><p>Web API 将操作方法​​参数与 URL 的 Query String 或 Request Body 绑定，具体取决于参数类型。<br>默认情况下，如果参数类型是 .NET 基本类型，则它从 Query String 设置参数的值，如果参数类型是复杂类型，则 Web API 会尝试默认从 Request Body 中获取值。</p><h3 id="默认-Binding-规则"><a href="#默认-Binding-规则" class="headerlink" title="默认 Binding 规则"></a>默认 Binding 规则</h3><table><thead><tr><th>HTTP Method</th><th>Query String</th><th>Request Body</th></tr></thead><tbody><tr><td>GET</td><td>Primitive Type，Complex Type</td><td>NA</td></tr><tr><td>POST</td><td>Primitive Type</td><td>Complex Type</td></tr><tr><td>PUT</td><td>Primitive Type</td><td>Complex Type</td></tr><tr><td>PATCH</td><td>Primitive Type</td><td>Complex Type</td></tr><tr><td>DELETE</td><td>Primitive Type，Complex Type</td><td>NA</td></tr></tbody></table><h3 id="FromUri-和-FromBody"><a href="#FromUri-和-FromBody" class="headerlink" title="[FromUri] 和 [FromBody]"></a>[FromUri] 和 [FromBody]</h3><p>使用 [FromUri] 特性强制 Web API 从 Query String 获取复杂类型的值，[FromBody] 特性从 Request Body 获取基本类型的值。</p><p>注意: FromBody 特性只能应用于 Action 方法的一个基本参数。它不能应用于同一个 Action 方法的多个原始参数。</p><p>注意与 Web MVC 的区别:<br>Web MVC 中，不论是复杂类型还是简单类型，只要是 Get 请求，都从 Query String 获取值，只要是 Post 请求，都从 Request Body 中获取值。<br>Web API 中，默认情况，简单类型从 Query String 中获取值，复杂类型根据请求方法: Get请求，从 Query String 获取值，Post 请求从 Request Body 获取值。<br>我们可以使用 [FromUri] 和 [FromBody] 特性强制 Post 请求中简单类型可以从 Request Body 获取，复杂类型可以从 Query String 获取。</p><h2 id="Action-方法返回类型"><a href="#Action-方法返回类型" class="headerlink" title="Action 方法返回类型"></a>Action 方法返回类型</h2><hr><p>Web API Action 方法可以具有以下返回类型: </p><ul><li>void</li><li>原始类型或复杂类型</li><li>HttpResponseMessage</li><li>IHttpActionResult</li></ul><h3 id="void"><a href="#void" class="headerlink" title="void"></a>void</h3><p>并非所有 Action 方法都必须返回某些内容。它可以有 void 返回类型。</p><h3 id="原始类型或复杂类型"><a href="#原始类型或复杂类型" class="headerlink" title="原始类型或复杂类型"></a>原始类型或复杂类型</h3><p>Action 方法可以返回原始或其他自定义复杂类型。</p><h3 id="HttpResponseMessage"><a href="#HttpResponseMessage" class="headerlink" title="HttpResponseMessage"></a>HttpResponseMessage</h3><p>Web API Controller 始终将 HttpResponseMessage 的对象返回到托管基础结构.<br>从 Action 方法发送 HttpResponseMessage 响应的优点是可以按照自己的方式配置响应。如状态码或错误消息等。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> HttpResponseMessage <span class="token function">Get</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token function">GetFooFromDB</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>foo <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Request<span class="token punctuation">.</span><span class="token function">CreateResponse</span><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>NotFound<span class="token punctuation">,</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> Request<span class="token punctuation">.</span><span class="token function">CreateResponse</span><span class="token punctuation">(</span>HttpStatusCode<span class="token punctuation">.</span>OK<span class="token punctuation">,</span> foo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="IHttpActionResult"><a href="#IHttpActionResult" class="headerlink" title="IHttpActionResult"></a>IHttpActionResult</h3><p>IHttpActionResult 是在 Web API 2(.NET 4.5)中引入的。 Web API 2 中的 Action 方法可以返回IHttpActionResult 类的实现，类似于 MVC 中的 ActionResult。</p><p>我们可以创建自己的类来实现 IHttpActionResult 或者使用 ApiController 类方法返回 IHttpActionResult 的对象。</p><p>下面是 ApiController 类方法，它返回实现 IHttpActionResult 接口的类的对象。</p><table><thead><tr><th>ApiController Method</th><th>描述</th></tr></thead><tbody><tr><td>BadRequest()</td><td>创建一个 BadRequestResult 对象，状态码 400.</td></tr><tr><td>Conflict()</td><td>创建一个 ConflictResult 对象，状态码 409.</td></tr><tr><td>Content()</td><td>创建一个特殊状态码和内容的 NegotiatedContentResult 对象</td></tr><tr><td>Created()</td><td>创建一个 CreatedNegotiatedContentResult 对象，状态码 201</td></tr><tr><td>CreatedAtRoute()</td><td>创建一个 CreatedAtRouteNegotiatedContentResult 对象，状态码 201</td></tr><tr><td>InternalServerError()</td><td>创建一个 InternalServerErrorResult  对象，状态码 500 Internal server error.</td></tr><tr><td>NotFound()</td><td>创建一个 NotFoundResult 对象，状态码 404</td></tr><tr><td>Ok()</td><td>创建一个 OkResult 对象，状态码 200</td></tr><tr><td>Redirect()</td><td>创建一个 RedirectResult 对象，状态码 302</td></tr><tr><td>RedirectToRoute()</td><td>创建一个 RedirectToRouteResult 对象，状态码 302</td></tr><tr><td>ResponseMessage()</td><td>创建一个特殊的 HttpResponseMessage 的 ResponseMessageResult 对象</td></tr><tr><td>StatusCode()</td><td>创建一个特殊状态码的 StatusCodeResult</td></tr><tr><td>Unauthorized()</td><td>创建一个 UnauthorizedResult 对象，状态码 401</td></tr></tbody></table>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;了解了 Web API 如何将 HTTP 请求路由到 Controller 和 Action 方法。我们将再看看 Web API 如何将 HTTP 请求数据绑定到操作方法的参数。&lt;/p&gt;
&lt;h2 id=&quot;Model-Binding&quot;&gt;&lt;a href=&quot;#Model-Bind</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/ASP.Net%20API(%E5%9B%9B)/"/>
    <id>https://1ess.github.io/ASP.Net%20API(%E5%9B%9B)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇，我们讲讲 Web API 如何处理不同格式的请求和响应数据。</p><p>Web API 包括对 JSON，XML，BSON 和 form-urlencoded 数据的内置支持，这意味着它会自动将请求/响应数据转换为这些格式(开箱即用)。</p><h2 id="Media-Type-Formatters"><a href="#Media-Type-Formatters" class="headerlink" title="Media-Type Formatters"></a>Media-Type Formatters</h2><hr><p>Web API 包括以下内置媒体类型格式化程序。</p><table><thead><tr><th>JsonMediaTypeFormatter</th><th>MIME Type</th><th>描述</th></tr></thead><tbody><tr><td>JsonMediaTypeFormatter</td><td>application/json, text/json</td><td>处理 JSON 格式</td></tr><tr><td>XmlMediaTypeFormatter</td><td>application/xml, text/xml</td><td>处理 XML 格式</td></tr><tr><td>FormUrlEncodedMediaTypeFormatter</td><td>application/x-www-form-urlencoded</td><td>处理 HTML form URL-encoded 数据</td></tr><tr><td>JQueryMvcFormUrlEncodedFormatter</td><td>application/x-www-form-urlencoded</td><td>处理 model-bound HTML form URL-encoded 数据</td></tr></tbody></table><p>GlobalConfiguration.Configuration.Formatters 返回包含所有格式化程序类: </p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FormattersController</span> <span class="token punctuation">:</span> ApiController<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> IEnumerable<span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span> <span class="token function">Get</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        IList<span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span> formatters <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">List</span><span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token keyword">var</span> item <span class="token keyword">in</span> GlobalConfiguration<span class="token punctuation">.</span>Configuration<span class="token punctuation">.</span>Formatters<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            formatters<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> formatters<span class="token punctuation">.</span><span class="token generic-method function">AsEnumerable<span class="token punctuation">&lt;</span><span class="token keyword">string</span><span class="token punctuation">></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">/*[    "System.Net.Http.Formatting.JsonMediaTypeFormatter",    "System.Net.Http.Formatting.XmlMediaTypeFormatter",    "System.Net.Http.Formatting.FormUrlEncodedMediaTypeFormatter",    "System.Web.Http.ModelBinding.JQueryMvcFormUrlEncodedFormatter"]*/</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="配置-JSON-序列化"><a href="#配置-JSON-序列化" class="headerlink" title="配置 JSON 序列化"></a>配置 JSON 序列化</h2><hr><p>在内部，JsonMediaTypeFormatter 使用名为 Json.NET 的第三方开源库来执行序列化。</p><p>可以在 WebApiConfig 类中配置 JSON 格式化程序。JsonMediaTypeFormatter 类包括各种属性和方法，您可以使用它们自定义 JSON 序列化。例如，Web API 默认使用 PascalCase 写入 JSON 属性名称。要使用 camelCase 编写 JSON 属性名称，请在序列化程序设置上设置 CamelCasePropertyNamesContractResolver。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">class</span> <span class="token class-name">WebApiConfig</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">Register</span><span class="token punctuation">(</span>HttpConfiguration config<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">// Web API 配置和服务</span>        <span class="token comment" spellcheck="true">// Web API 路由</span>        config<span class="token punctuation">.</span><span class="token function">MapHttpAttributeRoutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span>Routes<span class="token punctuation">.</span><span class="token function">MapHttpRoute</span><span class="token punctuation">(</span>        name<span class="token punctuation">:</span> <span class="token string">"DefaultApi"</span><span class="token punctuation">,</span>        routeTemplate<span class="token punctuation">:</span> <span class="token string">"api/&amp;#123;controller&amp;#125;/&amp;#123;id&amp;#125;"</span><span class="token punctuation">,</span>        defaults<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> id <span class="token operator">=</span> RouteParameter<span class="token punctuation">.</span>Optional <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token punctuation">)</span><span class="token punctuation">;</span>        config<span class="token punctuation">.</span>Formatters<span class="token punctuation">.</span>JsonFormatter<span class="token punctuation">.</span>SerializerSettings<span class="token punctuation">.</span>ContractResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CamelCasePropertyNamesContractResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//new DefaultContractResolver() 默认 PascalCase 命名属性 </span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>我们还可以自定义命名策略: </p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">//WebApiConfig class</span>DefaultContractResolver defaultContractResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultContractResolver</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    NamingStrategy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyStrategy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>config<span class="token punctuation">.</span>Formatters<span class="token punctuation">.</span>JsonFormatter<span class="token punctuation">.</span>SerializerSettings<span class="token punctuation">.</span>ContractResolver <span class="token operator">=</span> defaultContractResolver<span class="token punctuation">;</span><span class="token comment" spellcheck="true">//MyStrategy class</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MyStrategy</span><span class="token punctuation">:</span> NamingStrategy<span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">protected</span> <span class="token keyword">override</span> <span class="token keyword">string</span> <span class="token function">ResolvePropertyName</span><span class="token punctuation">(</span><span class="token keyword">string</span> name<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token comment" spellcheck="true">//策略</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="Web-API-Filters"><a href="#Web-API-Filters" class="headerlink" title="Web API Filters"></a>Web API Filters</h2><hr><p>Filters 可用于提供例如日志记录、异常处理、性能测量、身份验证和授权等功能。<br>Web API 使用 Filters 在执行 Action 方法前后来添加一些额外的逻辑。<br>Filters 实际上是可以应用于 Web API Controller 或 Action 方法的 Attribute。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇，我们讲讲 Web API 如何处理不同格式的请求和响应数据。&lt;/p&gt;
&lt;p&gt;Web API 包括对 JSON，XML，BSON 和 form-urlencoded 数据的内置支持，这意味着它会自动将请求/响应数据转换为这些格式(开箱即用)。&lt;/p&gt;
&lt;h2 id=&quot;M</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/%E9%97%B2%E8%81%8A/"/>
    <id>https://1ess.github.io/%E9%97%B2%E8%81%8A/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>你们这伙没胆量的下流东西！不要跑！来跟你们厮杀的只是个单枪匹马的骑士！</p></blockquote><p>一周多没更新 Blog 了，主要是最近又开始有些忙碌。</p><h3 id="工作"><a href="#工作" class="headerlink" title="工作"></a>工作</h3><p>最近这段时间，公司重新做了一款 toB 的 app。经过半年多服务器端开发，再回头进行移动端开发时，能从更高的角度来看待业务问题，进行更好的流程设计。我们可以从数据库的设计、用户的使用习惯等多维度进行评估，判断设计的合理性。例如某些表是否应该有某个字段，我们就可以根据取值的难易以及数据的冗余来平衡设计。</p><h3 id="个人"><a href="#个人" class="headerlink" title="个人"></a>个人</h3><p>最近利用休息时间重构了 Blog 风格，为 Bulma 打 call！<br>昨天晚上在京东云服务器上把 Jenkins 配置好了，以后终于不需要手动复制更新文件到服务器了，webhook 确实好用，以前在开发中忽略了自动化这一点，忽视了 CI 带来的便利。</p><h3 id="生活"><a href="#生活" class="headerlink" title="生活"></a>生活</h3><p>买了一台米家热水壶，双十一打算买台 Dyson V7 吸尘器。这是第一次买小米的产品，也是第一次买的高端生活用品，希望不会让我失望吧。<br>上周还看了两季英剧:《贴身保镖》和《新闻编辑室》，值得观看。</p><h3 id="打算"><a href="#打算" class="headerlink" title="打算"></a>打算</h3><p>休闲上，最近打算再找两部英剧看看。学习上，最近看了一些关于前端工程自动化的东西，但是现在不打算深入研究。之后计划是数据库这方面，数据库是自己的一个短板，准备从其基本原理入手，直到工程实践全都好好看一下。</p><p><img src="https://cdn.jsdelivr.net/gh/1ess/cdn/contentImg/other/other2.jpg"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;你们这伙没胆量的下流东西！不要跑！来跟你们厮杀的只是个单枪匹马的骑士！&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;一周多没更新 Blog 了，主要是最近又开始有些忙碌。&lt;/p&gt;
&lt;h3 id=&quot;工作&quot;&gt;&lt;a href=&quot;#工作&quot; class=&quot;he</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/%E4%BD%BF%E7%94%A8%E5%9B%BD%E5%86%85%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E6%9C%89%E6%84%9F/"/>
    <id>https://1ess.github.io/%E4%BD%BF%E7%94%A8%E5%9B%BD%E5%86%85%E5%BC%80%E6%BA%90%E9%A1%B9%E7%9B%AE%E6%9C%89%E6%84%9F/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>最近公司准备开发微信小程序，之前也研究过一段时间，写过几个 Demo，感觉原生开发有些笨重，决定调研一些开源框架来加速开发，因为自己熟悉 React，经过对比，决定采用京东开源的 <a href="https://github.com/NervJS/taro">Taro</a>，没想到就此进入深坑。<br>从脚手架的使用，再到视图框架 Taro-UI，就是一个坑接着一个坑，已经到了让人恶心的地步，CLI 的使用我认为应该越简单越好，create-react-app 在我看来是构建工具的典范，好用而舒心，反观 Taro/CLI，真该多学习借鉴其他的优秀产品的 CLI 工具。个人感觉有些愧对一万多颗 star 所能产生的价值，虽然其官网宣传</p><blockquote><p>Taro 是一套遵循 React 语法规范的 多端开发 解决方案。</p></blockquote><p>但是我还是希望能在一端做好，步子别迈太大，容易<strong>扯到蛋</strong>。</p><p>再说腾讯官方开源的微信小程序 UI 框架 <a href="https://github.com/Tencent/weui-wxss">weui-wxss</a>，离上一个 release 版本已经一年了。阿里的很多开源项目更是如此，对比国外的很多开源项目，阿里产品唯 KPI 导向的严重程度可见一斑。</p><p>我并不是反对开源，只是希望开源之前能做到最起码的使用，而不是扔给社区一个烂摊子，等到实在无法填坑就舍弃之。</p><hr><p>再说说最近自己做了什么吧，虽然之前一直说要看看数据库，但是时间有些紧，只看了几章的《数据库系统概念》，还是准备看完理解理解再记一下笔记。</p><p>这两天把 Blog 用 React 重写了一下，并且基于 Jenkins 建立了自动构建，自动部署的功能，很多重复性的工作不需要人为来做了，解放生产力！ </p><p><img src="https://cdn.jsdelivr.net/gh/1ess/cdn/contentImg/other/other3.gif"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近公司准备开发微信小程序，之前也研究过一段时间，写过几个 Demo，感觉原生开发有些笨重，决定调研一些开源框架来加速开发，因为自己熟悉 React，经过对比，决定采用京东开源的 &lt;a href=&quot;https://github.com/NervJS/taro&quot;&gt;Taro&lt;/</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/%E8%A3%85%E4%BF%AE/"/>
    <id>https://1ess.github.io/%E8%A3%85%E4%BF%AE/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>西风吹老洞庭波，一夜湘君白发多。<br>醉后不知天在水，满船清梦压星河。</p></blockquote><p>这两周家里忙着装修，跑了几次建材市场，每次坐公交来回要花上将近 4 个小时，都要坐吐了。<br>因为预算有限，选砖看砖都精打细算，因为女朋友比较喜欢暖色调，今年的主色又是偏冷，所以将近一百多家都看过之后，都没有特别满意的，没想到最后一家都不报什么希望了，反而眼前一亮。</p><p><img src="https://cdn.jsdelivr.net/gh/1ess/cdn/contentImg/83/1.jpg"><br><img src="https://cdn.jsdelivr.net/gh/1ess/cdn/contentImg/83/2.jpg"></p><p>之后就是贴砖了，这周末应该可以全部粘贴完毕。到时候再整体看看效果。</p><p>在这期间，也多亏了父母对我的帮助，自己总是在想什么时候才能挣上钱让父母不在这么奔波呢？</p><hr><p>因为装修的缘故，这一段时间也没看什么技术，只是把 Blog 用 React 重写了，部署了数据库，通过 API 获取数据。</p><p>前端: </p><ul><li>React</li><li>React-router</li><li>marked</li><li>highlight.js</li></ul><p>后台</p><ul><li>ASP.Net Core API</li><li>LinQ</li><li>Entity Framework</li></ul><p>数据库</p><ul><li>MySql</li></ul><p>昨天又发生一件小事:<br>因为自己买的服务器内存只有 1核 1G 1M，同时运行网站，API，MySql，Jenkins 已经吃不消了。MySql 就在晚上崩溃了，日志显示的也是内存问题。以后再买的话真就不能买配置这么低的了，真不够用，就当是一个教训吧。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;西风吹老洞庭波，一夜湘君白发多。&lt;br&gt;醉后不知天在水，满船清梦压星河。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;这两周家里忙着装修，跑了几次建材市场，每次坐公交来回要花上将近 4 个小时，都要坐吐了。&lt;br&gt;因为预算有限，选砖看砖都精打细算，因</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/LinQ%20%E6%9F%A5%E8%AF%A2%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    <id>https://1ess.github.io/LinQ%20%E6%9F%A5%E8%AF%A2%E8%A1%A8%E8%BE%BE%E5%BC%8F/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>最近的工作是对一个复杂数据库进行操作，模型类之间的关系很复杂。操作方式使用了 LINQ，之前一直对 LINQ 的查询语法不太喜欢，这次使用之后，感觉比方法语法更容易接受，因此详细总结一下查询表达式的语法。</p><p>数据查询历来都表示为简单的字符串，没有编译时类型检查。 此外，对于每种数据源，还需要学习不同的查询语言: SQL 数据库、XML 文档以及各种 Web 服务等。借助 LINQ，查询成为了最高级的语言构造，就像类、方法和事件一样。</p><p>LINQ 最明显的”语言集成”部分就是查询表达式。 使用相同的基本查询表达式模式来查询和转换 SQL 数据库、ADO .NET 数据集、XML 文档以及 .NET 集合中的数据。<br>从应用程序的角度来看，原始源数据的特定类型和结构并不重要。应用程序始终将源数据视为 IEnumerable<T> 或 IQueryable<T> 集合。 </p><p>对于源序列，查询可能会执行三种操作之一: </p><ul><li>检索元素的子集以生成新序列，而不修改各个元素</li></ul><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">// scores 是 int[]</span>IEnumerable<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> highScoresQuery <span class="token operator">=</span>    <span class="token keyword">from</span> score <span class="token keyword">in</span> scores    <span class="token keyword">where</span> score <span class="token operator">></span> <span class="token number">80</span>    <span class="token keyword">orderby</span> score <span class="token keyword">descending</span>    <span class="token keyword">select</span> score<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>将序列转换为新类型的对象</li></ul><pre class="line-numbers language-csharp"><code class="language-csharp">IEnumerable<span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span> highScoresQuery2 <span class="token operator">=</span>    <span class="token keyword">from</span> score <span class="token keyword">in</span> scores    <span class="token keyword">where</span> score <span class="token operator">></span> <span class="token number">80</span>    <span class="token keyword">orderby</span> score <span class="token keyword">descending</span>    <span class="token keyword">select</span> $<span class="token string">"The score is &amp;#123;score&amp;#125;"</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><ul><li>检索有关源数据的单独值</li></ul><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">int</span> highScoreCount <span class="token operator">=</span>    <span class="token punctuation">(</span><span class="token keyword">from</span> score <span class="token keyword">in</span> scores     <span class="token keyword">where</span> score <span class="token operator">></span> <span class="token number">80</span>     <span class="token keyword">select</span> score<span class="token punctuation">)</span>     <span class="token punctuation">.</span><span class="token function">Count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="查询表达式是什么"><a href="#查询表达式是什么" class="headerlink" title="查询表达式是什么"></a>查询表达式是什么</h3><p>查询表达式是以查询语法表示的查询。 </p><h3 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h3><p>查询表达式必须以 from 子句开头，且必须以 select 或 group 子句结尾。 在第一个 from 子句与最后一个 select 或 group 子句之间，可以包含以下这些可选子句中的一个或多个: where、orderby、join、let 甚至是其他 from 子句。 还可以使用 into 关键字，使 join 或 group 子句的结果可以充当相同查询表达式中的其他查询子句的源。</p><h3 id="查询变量"><a href="#查询变量" class="headerlink" title="查询变量"></a>查询变量</h3><p>在 LINQ 中，查询变量是存储查询而不是查询结果的任何变量。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">// Query Expression.</span>    IEnumerable<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> scoreQuery <span class="token operator">=</span> <span class="token comment" spellcheck="true">//query variable</span>        <span class="token keyword">from</span> score <span class="token keyword">in</span> scores <span class="token comment" spellcheck="true">//required</span>        <span class="token keyword">where</span> score <span class="token operator">></span> <span class="token number">80</span> <span class="token comment" spellcheck="true">// optional</span>        <span class="token keyword">orderby</span> score <span class="token keyword">descending</span> <span class="token comment" spellcheck="true">// optional</span>        <span class="token keyword">select</span> score<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">//must end with select or group</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>上面的示例中，scoreQuery 是查询变量，它有时仅仅称为查询。 </p><p>查询变量可以存储采用查询语法、方法语法或是两者的组合进行表示的查询。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">//Query syntax</span>IEnumerable<span class="token operator">&lt;</span>City<span class="token operator">></span> queryMajorCities <span class="token operator">=</span>    <span class="token keyword">from</span> city <span class="token keyword">in</span> cities    <span class="token keyword">where</span> city<span class="token punctuation">.</span>Population <span class="token operator">></span> <span class="token number">100000</span>    <span class="token keyword">select</span> city<span class="token punctuation">;</span><span class="token comment" spellcheck="true">// Method-based syntax</span>IEnumerable<span class="token operator">&lt;</span>City<span class="token operator">></span> queryMajorCities2 <span class="token operator">=</span> cities<span class="token punctuation">.</span><span class="token function">Where</span><span class="token punctuation">(</span>c <span class="token operator">=</span><span class="token operator">></span> c<span class="token punctuation">.</span>Population <span class="token operator">></span> <span class="token number">100000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="开始查询表达式"><a href="#开始查询表达式" class="headerlink" title="开始查询表达式"></a>开始查询表达式</h3><p>查询表达式必须以 from 子句开头，它指定数据源以及范围变量，范围变量表示遍历源序列时，源序列中的每个连续元素。范围变量基于数据源中元素的类型进行强类型化。<br>因为范围变量是强类型，所以可以使用点运算符访问该类型的任何可用成员。</p><pre class="line-numbers language-csharp"><code class="language-csharp">IEnumerable<span class="token operator">&lt;</span>Country<span class="token operator">></span> countryAreaQuery <span class="token operator">=</span>    <span class="token keyword">from</span> country <span class="token keyword">in</span> countries    <span class="token keyword">where</span> country<span class="token punctuation">.</span>Area <span class="token operator">></span> <span class="token number">500000</span> <span class="token comment" spellcheck="true">//sq km</span>    <span class="token keyword">select</span> country<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>查询表达式可能会包含多个 from 子句。在源序列中的每个元素本身是集合或包含集合时，可使用其他 from 子句。 </p><pre class="line-numbers language-csharp"><code class="language-csharp">IEnumerable<span class="token operator">&lt;</span>City<span class="token operator">></span> cityQuery <span class="token operator">=</span>    <span class="token keyword">from</span> country <span class="token keyword">in</span> countries    <span class="token keyword">from</span> city <span class="token keyword">in</span> country<span class="token punctuation">.</span>Cities    <span class="token keyword">where</span> city<span class="token punctuation">.</span>Population <span class="token operator">></span> <span class="token number">10000</span>    <span class="token keyword">select</span> city<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="结束查询表达式"><a href="#结束查询表达式" class="headerlink" title="结束查询表达式"></a>结束查询表达式</h3><p>查询表达式必须以 group 子句或 select 子句结尾。</p><h4 id="group-子句"><a href="#group-子句" class="headerlink" title="group 子句"></a>group 子句</h4><p>使用 group 子句可生成按指定键组织的组的序列。键可以是任何数据类型。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">var</span> queryCountryGroups <span class="token operator">=</span>    <span class="token keyword">from</span> country <span class="token keyword">in</span> countries    <span class="token keyword">group</span> country by country<span class="token punctuation">.</span>Name<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="select-子句"><a href="#select-子句" class="headerlink" title="select 子句"></a>select 子句</h4><p>使用 select 子句可生成所有其他类型的序列。简单 select 子句只生成类型与数据源中包含的对象相同的对象的序列。</p><pre class="line-numbers language-csharp"><code class="language-csharp">IEnumerable<span class="token operator">&lt;</span>Country<span class="token operator">></span> sortedQuery <span class="token operator">=</span>    <span class="token keyword">from</span> country <span class="token keyword">in</span> countries    <span class="token keyword">orderby</span> country<span class="token punctuation">.</span>Area    <span class="token keyword">select</span> country<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>select 子句可以用于将源数据转换为新类型的序列，此转换也称为投影。<br>请注意，新对象使用对象初始值设定项进行初始化。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">// Here var is required because the query</span><span class="token comment" spellcheck="true">// produces an anonymous type.</span><span class="token keyword">var</span> queryNameAndPop <span class="token operator">=</span>    <span class="token keyword">from</span> country <span class="token keyword">in</span> countries    <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> Name <span class="token operator">=</span> country<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> Pop <span class="token operator">=</span> country<span class="token punctuation">.</span>Population <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="使用-into-进行延续"><a href="#使用-into-进行延续" class="headerlink" title="使用 into 进行延续"></a>使用 into 进行延续</h3><p>可以在 select 或 group 子句中使用 into 关键字创建存储查询的临时标识符。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">// percentileQuery is an IEnumerable&lt;IGrouping&lt;int, Country>></span><span class="token keyword">var</span> percentileQuery <span class="token operator">=</span>    <span class="token keyword">from</span> country <span class="token keyword">in</span> countries    <span class="token keyword">let</span> percentile <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> country<span class="token punctuation">.</span>Population <span class="token operator">/</span> 10_000_000    <span class="token keyword">group</span> country by percentile <span class="token keyword">into</span> countryGroup    <span class="token keyword">where</span> countryGroup<span class="token punctuation">.</span>Key <span class="token operator">>=</span> <span class="token number">20</span>    <span class="token keyword">orderby</span> countryGroup<span class="token punctuation">.</span>Key    <span class="token keyword">select</span> countryGroup<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="筛选、排序和联接"><a href="#筛选、排序和联接" class="headerlink" title="筛选、排序和联接"></a>筛选、排序和联接</h3><p>在开头 from 子句与结尾 select 或 group 子句之间，所有其他子句(where、join、orderby、from、let)都是可选的。任何可选子句都可以在查询正文中使用零次或多次。</p><h4 id="where-子句"><a href="#where-子句" class="headerlink" title="where 子句"></a>where 子句</h4><p>使用 where 子句可基于一个或多个谓词表达式，从源数据中筛选出元素。</p><pre class="line-numbers language-csharp"><code class="language-csharp">IEnumerable<span class="token operator">&lt;</span>City<span class="token operator">></span> queryCityPop <span class="token operator">=</span>    <span class="token keyword">from</span> city <span class="token keyword">in</span> cities    <span class="token keyword">where</span> city<span class="token punctuation">.</span>Population <span class="token operator">&lt;</span> <span class="token number">200000</span> <span class="token operator">&amp;&amp;</span> city<span class="token punctuation">.</span>Population <span class="token operator">></span> <span class="token number">100000</span>    <span class="token keyword">select</span> city<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="orderby-子句"><a href="#orderby-子句" class="headerlink" title="orderby 子句"></a>orderby 子句</h4><p>使用 orderby 子句可按升序或降序对结果进行排序。还可以指定次要排序顺序。</p><pre class="line-numbers language-csharp"><code class="language-csharp">IEnumerable<span class="token operator">&lt;</span>Country<span class="token operator">></span> querySortedCountries <span class="token operator">=</span>    <span class="token keyword">from</span> country <span class="token keyword">in</span> countries    <span class="token keyword">orderby</span> country<span class="token punctuation">.</span>Area<span class="token punctuation">,</span> country<span class="token punctuation">.</span>Population <span class="token keyword">descending</span>    <span class="token keyword">select</span> country<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>注意: ascending 关键字是可选的，如果未指定任何顺序，则它是默认排序顺序。</p><h4 id="join-子句"><a href="#join-子句" class="headerlink" title="join 子句"></a>join 子句</h4><p>使用 join 子句可基于每个元素中指定的键之间的相等比较，将一个数据源中的元素与另一个数据源中的元素进行关联和/或合并。在 LINQ 中，联接操作是对元素属于不同类型的对象序列执行。联接了两个序列之后，必须使用 select 或 group 语句指定要存储在输出序列中的元素，还可以使用匿名类型将每组关联元素中的属性合并到输出序列的新类型中。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">var</span> categoryQuery <span class="token operator">=</span>    <span class="token keyword">from</span> cat <span class="token keyword">in</span> categories    <span class="token keyword">join</span> prod <span class="token keyword">in</span> products on cat equals prod<span class="token punctuation">.</span>Category    <span class="token keyword">select</span> <span class="token keyword">new</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> Category <span class="token operator">=</span> cat<span class="token punctuation">,</span> Name <span class="token operator">=</span> prod<span class="token punctuation">.</span>Name <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>还可以通过使用 into 关键字将 join 操作的结果存储到临时变量中来执行分组联接。 </p><h4 id="let-子句"><a href="#let-子句" class="headerlink" title="let 子句"></a>let 子句</h4><p>使用 let 子句可将表达式(如方法调用)的结果存储在新范围变量中。 </p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span> names <span class="token operator">=</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token string">"Svetlana Omelchenko"</span><span class="token punctuation">,</span> <span class="token string">"Claire O'Donnell"</span><span class="token punctuation">,</span> <span class="token string">"Sven Mortensen"</span><span class="token punctuation">,</span> <span class="token string">"Cesar Garcia"</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>IEnumerable<span class="token operator">&lt;</span><span class="token keyword">string</span><span class="token operator">></span> queryFirstNames <span class="token operator">=</span>    <span class="token keyword">from</span> name <span class="token keyword">in</span> names    <span class="token keyword">let</span> firstName <span class="token operator">=</span> name<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>    <span class="token keyword">select</span> firstName<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="查询表达式中的子查询"><a href="#查询表达式中的子查询" class="headerlink" title="查询表达式中的子查询"></a>查询表达式中的子查询</h3><p>查询子句本身可能包含查询表达式，这有时称为子查询。每个子查询都以自己的 from 子句开头，该子句不一定指向第一个 from 子句中的相同数据源。 </p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">var</span> queryGroupMax <span class="token operator">=</span>    <span class="token keyword">from</span> student <span class="token keyword">in</span> students    <span class="token keyword">group</span> student by student<span class="token punctuation">.</span>GradeLevel <span class="token keyword">into</span> studentGroup    <span class="token keyword">select</span> <span class="token keyword">new</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        Level <span class="token operator">=</span> studentGroup<span class="token punctuation">.</span>Key<span class="token punctuation">,</span>        HighestScore <span class="token operator">=</span>            <span class="token punctuation">(</span><span class="token keyword">from</span> student2 <span class="token keyword">in</span> studentGroup             <span class="token keyword">select</span> student2<span class="token punctuation">.</span>Scores<span class="token punctuation">.</span><span class="token function">Average</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>             <span class="token punctuation">.</span><span class="token function">Max</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;最近的工作是对一个复杂数据库进行操作，模型类之间的关系很复杂。操作方式使用了 LINQ，之前一直对 LINQ 的查询语法不太喜欢，这次使用之后，感觉比方法语法更容易接受，因此详细总结一下查询表达式的语法。&lt;/p&gt;
&lt;p&gt;数据查询历来都表示为简单的字符串，没有编译时类型检查。</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(%E4%B8%80)/"/>
    <id>https://1ess.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(%E4%B8%80)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>数据结构和算法是计算机软件相关专业的基础课程，要想从事编程工作，无论是否是科班出身，都不可能绕过这部分知识。<br>从本篇开始，我会详细的复习一遍数据结构以及算法。</p><h2 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h2><hr><p>数据结构: 是相互之间存在一种或多种特定关系的数据元素的集和。</p><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><h4 id="数据"><a href="#数据" class="headerlink" title="数据"></a>数据</h4><p>数据: 是描述客观事物的符号，是计算机中可以操作的对象，是能被计算机识别，并输入给计算机处理的符号的集和。<br>数据包括: 整型等数值类型，以及声音图片等非数值类型。</p><h4 id="数据元素"><a href="#数据元素" class="headerlink" title="数据元素"></a>数据元素</h4><p>数据元素: 是组成数据的、有一定意义的基本单位，在计算机中通常作为整体处理。也被称为记录。</p><h4 id="数据项"><a href="#数据项" class="headerlink" title="数据项"></a>数据项</h4><p>数据项: 一个数据元素可以由若干个数据项组成。数据项是数据不可分割的最小单位。</p><h4 id="数据对象"><a href="#数据对象" class="headerlink" title="数据对象"></a>数据对象</h4><p>数据对象: 性质相同的数据元素的集和，是数据的子集。</p><h3 id="逻辑结构和物理结构"><a href="#逻辑结构和物理结构" class="headerlink" title="逻辑结构和物理结构"></a>逻辑结构和物理结构</h3><p>我们把数据结构划分为<strong>逻辑结构</strong>和<strong>物理结构</strong>。</p><h4 id="逻辑结构"><a href="#逻辑结构" class="headerlink" title="逻辑结构"></a>逻辑结构</h4><p>逻辑结构: 是指数据对象中数据元素之间的相互关系。</p><p>逻辑结构可分为以下四种: </p><ol><li>集合结构: 集合结构中的数据元素除了同属于一个集合之外，他们之间没有其他关系</li><li>线性结构: 线性结构中的数据元素之间是一对一的关系</li><li>树形结构: 树形结构中的数据元素之间存在一种一对多的关系</li><li>图形结构: 图形结构的数据元素之间是多对多关系</li></ol><h4 id="物理结构-存储结构"><a href="#物理结构-存储结构" class="headerlink" title="物理结构(存储结构)"></a>物理结构(存储结构)</h4><p>物理结构: 是指数据的逻辑结构在计算机中的存储形式。<br>根据物理结构的定义，实际上就是如何把数据元素存储到计算机的存储器中。存储器主要针对内存而言，外部存储器的数据组织通常用文件结构来描述。</p><p>物理结构可分为以下两种: </p><ol><li>顺序存储: 是把数据元素存放在地址连续的存储单元里，其数据间的逻辑关系和物理关系是一致的</li><li>链式存储: 把数据元素放在任意的存储单元，这组存储单元可以是连续的，也可以是不连续的</li></ol><h3 id="抽象数据类型"><a href="#抽象数据类型" class="headerlink" title="抽象数据类型"></a>抽象数据类型</h3><h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><p>数据类型: 是指一组性质相同的值的集合以及在此集合上的一些操作的总称。<br>抽象是指抽取出事物具有的普遍性的本质。抽象是一种思考问题的方式，隐藏了繁杂的细节，只保留实现目标所必须的信息。</p><h4 id="抽象数据类型-1"><a href="#抽象数据类型-1" class="headerlink" title="抽象数据类型"></a>抽象数据类型</h4><p>抽象数据类型(Abstruct Data Type，ADT): 指一个数学模型及定义在该模型上的一组操作。</p><h2 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h2><hr><p>算法: 是解决特定问题求解步骤的描述，在计算机中表现为指令的有限序列，并且每条指令表示一个或多个操作。</p><h3 id="算法的特性"><a href="#算法的特性" class="headerlink" title="算法的特性"></a>算法的特性</h3><p>算法具有五个基本特性: <strong>输入</strong>、<strong>输出</strong>、<strong>有穷性</strong>、<strong>确定性</strong>和<strong>可行性</strong>。</p><h4 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h4><p>算法具有零个或多个输入，算法至少有一个或多个输出。</p><h4 id="有穷性"><a href="#有穷性" class="headerlink" title="有穷性"></a>有穷性</h4><p>有穷性: 指算法在执行有限的步骤后，自动结束而不会出现无限循环，并且每个步骤在可接受的时间内完成。</p><h4 id="确定性"><a href="#确定性" class="headerlink" title="确定性"></a>确定性</h4><p>确定性: 算法的每一步骤都具有确定的含义，不会出现二义性。</p><h4 id="可行性"><a href="#可行性" class="headerlink" title="可行性"></a>可行性</h4><p>可行性: 算法的每一步都必须是可行的。</p><h3 id="算法的设计要求"><a href="#算法的设计要求" class="headerlink" title="算法的设计要求"></a>算法的设计要求</h3><ol><li>正确性</li><li>可读性</li><li>健壮性</li><li>时间效率高和存储量低</li></ol><h3 id="函数的渐进增长"><a href="#函数的渐进增长" class="headerlink" title="函数的渐进增长"></a>函数的渐进增长</h3><p>函数的渐进增长: 给定两个函数 f(n) 和 g(n)，如果存在一个整数 N，使得对于所有的 n &gt; N，f(n) 总是比 g(n) 大，那么，我们就说 f(n) 的增长渐进快于 g(n)。</p><p>判断一个算法的效率时，函数中的常数和其他次要项可以忽略，而更应关注最高阶项的阶数。</p><h3 id="算法的时间复杂度"><a href="#算法的时间复杂度" class="headerlink" title="算法的时间复杂度"></a>算法的时间复杂度</h3><p>在进行算法分析时，语句总的执行次数 T(n) 是关于问题规模 n 的函数，进而分析 T(n) 随 n 的变化情况并确定 T(n) 的数量级。算法的时间复杂度，也就是算法的时间的度量，记作: T(n) = O(f(n))。他表示随问题规模 n 的增大，算法的执行时间的增长率和 f(n) 的增长率相同，称为算法的渐进时间复杂度，简称时间复杂度。</p><p>这样用大写 O 来体现算法时间复杂度的记法，称之为<strong>大 O 表示法</strong>。</p><p>一般情况，随着 n 增大，T(n) 增长最慢的算法为最优算法。</p><h4 id="推导大-O-阶方法"><a href="#推导大-O-阶方法" class="headerlink" title="推导大 O 阶方法"></a>推导大 O 阶方法</h4><ol><li>用常数 1 取代所有加法常数</li><li>只保留最高阶</li><li>如果最高阶存在且不是 1，则去除与这个项相乘的常数</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;数据结构和算法是计算机软件相关专业的基础课程，要想从事编程工作，无论是否是科班出身，都不可能绕过这部分知识。&lt;br&gt;从本篇开始，我会详细的复习一遍数据结构以及算法。&lt;/p&gt;
&lt;h2 id=&quot;数据结构&quot;&gt;&lt;a href=&quot;#数据结构&quot; class=&quot;headerlink&quot; t</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(%E4%BA%8C)/"/>
    <id>https://1ess.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(%E4%BA%8C)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇，我们将会复习一下比较简单但是应用非常广泛的一种数据结构 —— 线性表。</p><h2 id="线性表"><a href="#线性表" class="headerlink" title="线性表"></a>线性表</h2><hr><p>线性表(List): 零个或多个数据元素的有限序列。</p><p>如果用数学语言定义如下:<br>若将线性表记为(a<sub>1</sub>, …, a<sub>i-1</sub>, a<sub>i</sub>, a<sub>i+1</sub>, …, a<sub>n</sub>)，则表中 a<sub>i-1</sub> 领先于 a<sub>i</sub>，a<sub>i</sub> 领先于 a<sub>i+1</sub>，称 a<sub>i-1</sub> 是 a<sub>i</sub> 的直接前驱元素，a<sub>i+1</sub> 是 a<sub>i</sub> 的直接后继元素。当 i = 1, 2, …, n-1 时，a<sub>i</sub> 有且仅有一个直接后继，当 i = 2, …, n 时，a<sub>i</sub> 有且仅有一个直接前驱。</p><p>线性表元素的个数 n(n &gt;= 0) 称为线性表的长度，当 n = 0 时，称为空表。</p><h3 id="线性表的顺序存储结构"><a href="#线性表的顺序存储结构" class="headerlink" title="线性表的顺序存储结构"></a>线性表的顺序存储结构</h3><p>线性表的顺序存储结构指的是，用一段地址连续的存储单元依次存储线性表的数据元素。<br>一般用一维数组来实现顺序存储结构。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqList</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token keyword">int</span> Maxsize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> T<span class="token punctuation">[</span><span class="token punctuation">]</span> Data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">T</span><span class="token punctuation">[</span>Maxsize<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> Length<span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/// &lt;summary></span>    <span class="token comment" spellcheck="true">/// 获取第 i 位的元素</span>    <span class="token comment" spellcheck="true">/// &lt;/summary></span>    <span class="token comment" spellcheck="true">/// &lt;param name="i">&lt;/param></span>    <span class="token comment" spellcheck="true">/// &lt;param name="e">&lt;/param></span>    <span class="token comment" spellcheck="true">/// &lt;returns>&lt;/returns></span>    <span class="token keyword">public</span> Status <span class="token function">GetElement</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">out</span> T e<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>Length <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">>=</span> Length<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            e <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        e <span class="token operator">=</span> Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/// &lt;summary></span>    <span class="token comment" spellcheck="true">/// 在第 i 位插入元素</span>    <span class="token comment" spellcheck="true">/// &lt;/summary></span>    <span class="token comment" spellcheck="true">/// &lt;param name="i">&lt;/param></span>    <span class="token comment" spellcheck="true">/// &lt;param name="e">&lt;/param></span>    <span class="token comment" spellcheck="true">/// &lt;returns>&lt;/returns></span>    <span class="token keyword">public</span> Status <span class="token function">ListInsert</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> T e<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>Length <span class="token operator">==</span> Maxsize<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">></span> Length<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> Length<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> Length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span> i<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                Data<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> Data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> e<span class="token punctuation">;</span>        Length<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/// &lt;summary></span>    <span class="token comment" spellcheck="true">/// 删除第 i 位元素</span>    <span class="token comment" spellcheck="true">/// &lt;/summary></span>    <span class="token comment" spellcheck="true">/// &lt;param name="i">&lt;/param></span>    <span class="token comment" spellcheck="true">/// &lt;param name="e">&lt;/param></span>    <span class="token comment" spellcheck="true">/// &lt;returns>&lt;/returns></span>    <span class="token keyword">public</span> Status <span class="token function">ListDelete</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">out</span> T e<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>Length <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            e <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token operator">||</span> i <span class="token operator">></span> Length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            e <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        e <span class="token operator">=</span> Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> Length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            Data<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> Data<span class="token punctuation">[</span>j <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        Length<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="线性表顺序存储结构的优缺点"><a href="#线性表顺序存储结构的优缺点" class="headerlink" title="线性表顺序存储结构的优缺点"></a>线性表顺序存储结构的优缺点</h3><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><ul><li>可以快速存取表中任一位置元素</li></ul><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul><li>插入和删除操作需要移动大量元素</li><li>造成存储空间碎片化</li></ul><h3 id="线性表的链式存储结构"><a href="#线性表的链式存储结构" class="headerlink" title="线性表的链式存储结构"></a>线性表的链式存储结构</h3><p>线性表的链式存储结构的特点是，可以用一组任意的存储单元存储线性表的数据元素，这组存储单元可以是连续的，也可以是不连续的。</p><p>在顺序存储结构中，每个数据元素只需要存储数据元素信息就可以了，但是在链式存储结构中，除了要存储数据元素信息外，还要存储他的后继元素的地址。</p><p>因此，为了表示每个数据元素 a<sub>i</sub> 与其直接后继元素 a<sub>i+1</sub> 之间的逻辑关系，对于数据元素 a<sub>i</sub> 来说，除了存储本身信息之外，还需要存储一个指示其直接后继的信息。我们把存储数据元素信息的域称为数据域，把存储直接后继信息的域称为指针域(对于高级语言，我们可以把它理解成对象引用域)。把这两部分组成的数据元素称为节点(Node)。<br>n 个节点链接成一个链表，即线性表的链式存储结构。因为此链表每个节点只有一个指针域，因此称为单链表。</p><p>我们把第一个节点的指针域称为头指针。为了方便操作链表，会在单链表的第一个节点前设置一个节点，称为头节点。头节点的数据域不存储任何信息。<br>注意: 如果设置了头节点，那么头节点的指针域存储的就是头指针。</p><h3 id="单链表"><a href="#单链表" class="headerlink" title="单链表"></a>单链表</h3><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Node</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> T Element<span class="token punctuation">;</span>    <span class="token keyword">public</span> Node<span class="token operator">&lt;</span>T<span class="token operator">></span> NextNode<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">Node</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        Element <span class="token operator">=</span> t<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LinkList</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//头节点(数据域无意义)</span>    <span class="token keyword">public</span> Node<span class="token operator">&lt;</span>T<span class="token operator">></span> HeadNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">GetElement</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">out</span> Node<span class="token operator">&lt;</span>T<span class="token operator">></span> node<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> temp <span class="token operator">=</span> HeadNode<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>temp <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            temp <span class="token operator">=</span> temp<span class="token punctuation">.</span>NextNode<span class="token punctuation">;</span>            j<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        node <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token keyword">return</span> temp <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> Status<span class="token punctuation">.</span>Error <span class="token punctuation">:</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> Status <span class="token function">ListInsert</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> Node<span class="token operator">&lt;</span>T<span class="token operator">></span> node<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> status <span class="token operator">=</span> <span class="token function">GetElement</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token keyword">var</span> prevNode<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">!=</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">)</span> <span class="token keyword">return</span> status<span class="token punctuation">;</span>                node<span class="token punctuation">.</span>NextNode <span class="token operator">=</span> prevNode<span class="token punctuation">.</span>NextNode<span class="token punctuation">;</span>        prevNode<span class="token punctuation">.</span>NextNode <span class="token operator">=</span> node<span class="token punctuation">;</span>                <span class="token keyword">return</span> status<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">ListDelete</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">out</span> Node<span class="token operator">&lt;</span>T<span class="token operator">></span> node<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        node <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> status <span class="token operator">=</span> <span class="token function">GetElement</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token keyword">var</span> prevNode<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">!=</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">)</span> <span class="token keyword">return</span> status<span class="token punctuation">;</span>        <span class="token keyword">var</span> current <span class="token operator">=</span> prevNode<span class="token punctuation">.</span>NextNode<span class="token punctuation">;</span>        prevNode<span class="token punctuation">.</span>NextNode <span class="token operator">=</span> current<span class="token punctuation">.</span>NextNode<span class="token punctuation">;</span>        node <span class="token operator">=</span> current<span class="token punctuation">;</span>                <span class="token keyword">return</span> status<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="循环链表"><a href="#循环链表" class="headerlink" title="循环链表"></a>循环链表</h3><p>将单链表中尾节点的指针域指向头节点，使链表形成一个环，这种头尾相接的链表称为单循环链表，简称为循环链表。</p><p>循环链表和单链表的主要差异就是判断结束条件由指针域是否为空变为指针域是否是头节点。</p><h3 id="双向链表"><a href="#双向链表" class="headerlink" title="双向链表"></a>双向链表</h3><p>双向链表是在单向链表的每个节点中，再设置一个指向前驱节点的指针。所以在双向链表中存在两个指针域，一个指向直接前驱，一个指向直接后继。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DoubleLinkList</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//头节点(数据域无意义)</span>    <span class="token keyword">public</span> Node<span class="token operator">&lt;</span>T<span class="token operator">></span> HeadNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Node</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span><span class="token keyword">default</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">GetElement</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">out</span> Node<span class="token operator">&lt;</span>T<span class="token operator">></span> node<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> temp <span class="token operator">=</span> HeadNode<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>temp <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> j <span class="token operator">&lt;</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            temp <span class="token operator">=</span> temp<span class="token punctuation">.</span>NextNode<span class="token punctuation">;</span>            j<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        node <span class="token operator">=</span> temp<span class="token punctuation">;</span>        <span class="token keyword">return</span> temp <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">?</span> Status<span class="token punctuation">.</span>Error <span class="token punctuation">:</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">ListInsert</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> Node<span class="token operator">&lt;</span>T<span class="token operator">></span> node<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> status <span class="token operator">=</span> <span class="token function">GetElement</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token keyword">var</span> prevNode<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">!=</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">)</span> <span class="token keyword">return</span> status<span class="token punctuation">;</span>        node<span class="token punctuation">.</span>PrevNode <span class="token operator">=</span> prevNode<span class="token punctuation">;</span>        node<span class="token punctuation">.</span>NextNode <span class="token operator">=</span> prevNode<span class="token punctuation">.</span>NextNode<span class="token punctuation">;</span>        prevNode<span class="token punctuation">.</span>NextNode<span class="token punctuation">.</span>PrevNode <span class="token operator">=</span> node<span class="token punctuation">;</span>        prevNode<span class="token punctuation">.</span>NextNode <span class="token operator">=</span> node<span class="token punctuation">;</span>        <span class="token keyword">return</span> status<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">ListDelete</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token punctuation">,</span> <span class="token keyword">out</span> Node<span class="token operator">&lt;</span>T<span class="token operator">></span> node<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        node <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> status <span class="token operator">=</span> <span class="token function">GetElement</span><span class="token punctuation">(</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token keyword">var</span> prevNode<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">!=</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">)</span> <span class="token keyword">return</span> status<span class="token punctuation">;</span>        <span class="token keyword">var</span> current <span class="token operator">=</span> prevNode<span class="token punctuation">.</span>NextNode<span class="token punctuation">;</span>        current<span class="token punctuation">.</span>NextNode<span class="token punctuation">.</span>PrevNode <span class="token operator">=</span> prevNode<span class="token punctuation">;</span>        prevNode<span class="token punctuation">.</span>NextNode <span class="token operator">=</span> current<span class="token punctuation">.</span>NextNode<span class="token punctuation">;</span>        node <span class="token operator">=</span> current<span class="token punctuation">;</span>        <span class="token keyword">return</span> status<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>在对链表进行操作时要记住一个原则: 后继指针很重要，在使用完之前不要赋新值。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇，我们将会复习一下比较简单但是应用非常广泛的一种数据结构 —— 线性表。&lt;/p&gt;
&lt;h2 id=&quot;线性表&quot;&gt;&lt;a href=&quot;#线性表&quot; class=&quot;headerlink&quot; title=&quot;线性表&quot;&gt;&lt;/a&gt;线性表&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;线性表(List): 零个或多</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(%E4%B8%89)/"/>
    <id>https://1ess.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(%E4%B8%89)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇，我们将会复习一下基于线性表衍生出的两种数据结构 —— 栈和队列。</p><h2 id="栈-Stack"><a href="#栈-Stack" class="headerlink" title="栈(Stack)"></a>栈(Stack)</h2><hr><p>在软件应用中，栈这种后进先出的数据结构的应用是非常普遍的。比如浏览器的前进后退、Word 和 PhotoShop 等编辑软件中的撤销操作，以及在 iOS 开发中的 push、pop controller 操作都是栈的应用。</p><p>栈本质是限定仅在表尾进行插入和删除操作的线性表。<br>我们把允许插入和删除的一端称为栈顶(top)，另一端称为栈底(bottom)，不含任何数据元素的栈称为空栈。<br>栈又称为后进先出的线性表，简称为 LIFO 结构。</p><p>理解栈我们要注意: </p><ol><li>他是一个线性表</li><li>仅允许在表尾进行插入和删除操作，这里的表尾是指栈顶</li></ol><p>栈的插入操作，叫做进栈(push)，也称为压栈、入栈。<br>栈的删除操作，叫做出栈(pop)，也称为弹栈。</p><h3 id="栈的顺序存储结构"><a href="#栈的顺序存储结构" class="headerlink" title="栈的顺序存储结构"></a>栈的顺序存储结构</h3><p>栈的顺序存储结构简称为顺序栈。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SqStack</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token keyword">int</span> Maxsize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> T<span class="token punctuation">[</span><span class="token punctuation">]</span> Data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">T</span><span class="token punctuation">[</span>Maxsize<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> Top <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">Push</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>Top <span class="token operator">>=</span> Maxsize<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//栈满</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        Top<span class="token operator">++</span><span class="token punctuation">;</span>        Data<span class="token punctuation">[</span>Top<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">Pop</span><span class="token punctuation">(</span><span class="token keyword">out</span> T t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>Top <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            t <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        t <span class="token operator">=</span> Data<span class="token punctuation">[</span>Top<span class="token punctuation">]</span><span class="token punctuation">;</span>        Top<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="栈的链式存储结构"><a href="#栈的链式存储结构" class="headerlink" title="栈的链式存储结构"></a>栈的链式存储结构</h3><p>栈的链式存储结构简称为链栈。<br>对于链栈来说，是不需要头节点的。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">LinkStack</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> StackNode<span class="token operator">&lt;</span>T<span class="token operator">></span> Top<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> Count<span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">Push</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> stackNode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StackNode</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>NextNode <span class="token operator">=</span> Top<span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>        Top <span class="token operator">=</span> stackNode<span class="token punctuation">;</span>        Count<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">Pop</span><span class="token punctuation">(</span><span class="token keyword">out</span> T t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>Top <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            t <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        t <span class="token operator">=</span> Top<span class="token punctuation">.</span>Element<span class="token punctuation">;</span>        Top <span class="token operator">=</span> Top<span class="token punctuation">.</span>NextNode<span class="token punctuation">;</span>        Count<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="栈的应用"><a href="#栈的应用" class="headerlink" title="栈的应用"></a>栈的应用</h3><h4 id="递归"><a href="#递归" class="headerlink" title="递归"></a>递归</h4><p>我们把一个直接调用自己或者通过一系列调用语句间接地调用自己的函数，称为递归函数。<br>每个递归定义必须至少有一个条件，满足时递归不再进行，即不在引用自身而是返回值退出。<br>递归回退的顺序是他前进顺序的逆序。显然符合栈这种数据结构。因此编译器使用栈来实现递归。</p><h4 id="四则运算表达式求值"><a href="#四则运算表达式求值" class="headerlink" title="四则运算表达式求值"></a>四则运算表达式求值</h4><p>一种不需要括号的后缀表示法，也称为逆波兰表示(RPN)。是一种非常巧妙的将四则运算由常见的中缀表达式变为后缀表达式来简化运算复杂性。基本原理也是栈。这里就不详细说明了。</p><h2 id="队列-Queue"><a href="#队列-Queue" class="headerlink" title="队列(Queue)"></a>队列(Queue)</h2><hr><p>队列是只允许在一端进行插入操作，而在另一端进行删除操作的线性表。<br>队列是一种先进先出的线性表，简称为 FIFO 结构。<br>允许插入操作的一端称为队尾，允许删除操作的一端称为队头。</p><p>队列在程序设计中使用非常频繁，如消息队列(MQ)所使用的数据结构等。</p><h3 id="队列的顺序存储结构"><a href="#队列的顺序存储结构" class="headerlink" title="队列的顺序存储结构"></a>队列的顺序存储结构</h3><p>如果我们只把队列当成普通的线性表操作也完全没有问题，入队操作时间复杂度为 O(1)，但是出队操作时间复杂度为 O(n)，为解决这个问题，我们可以使用循环队列。<br>我们把队列的这种头尾相接的顺序存储结构称为循环队列。<br>为了实现循环队列，我们需要引入两个变量，一个指向队头元素所在位置，一个指向队尾元素的下一个位置。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">SqQueue</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token keyword">int</span> Maxsize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> T<span class="token punctuation">[</span><span class="token punctuation">]</span> Data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">T</span><span class="token punctuation">[</span>Maxsize<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> _front<span class="token punctuation">;</span>    <span class="token keyword">private</span> <span class="token keyword">int</span> _rear<span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">EnQueue</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>_rear <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> Maxsize <span class="token operator">==</span> _front<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//队满</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        Data<span class="token punctuation">[</span>_rear<span class="token punctuation">]</span> <span class="token operator">=</span> t<span class="token punctuation">;</span>        _rear <span class="token operator">=</span> <span class="token punctuation">(</span>_rear <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> Maxsize<span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">DeQueue</span><span class="token punctuation">(</span><span class="token keyword">out</span> T t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>_rear <span class="token operator">==</span> _front<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token comment" spellcheck="true">//队空</span>            t <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        t <span class="token operator">=</span> Data<span class="token punctuation">[</span>_front<span class="token punctuation">]</span><span class="token punctuation">;</span>        _front <span class="token operator">=</span> <span class="token punctuation">(</span>_front <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> Maxsize<span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="队列的链式存储结构"><a href="#队列的链式存储结构" class="headerlink" title="队列的链式存储结构"></a>队列的链式存储结构</h3><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">QueueNode</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> T Element<span class="token punctuation">;</span>    <span class="token keyword">public</span> QueueNode<span class="token operator">&lt;</span>T<span class="token operator">></span> NextNode<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">QueueNode</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        Element <span class="token operator">=</span> t<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">class</span> <span class="token class-name">LinkQueue</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> QueueNode<span class="token operator">&lt;</span>T<span class="token operator">></span> Front<span class="token punctuation">,</span> Rear<span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">EnQueue</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> node <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QueueNode</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>        Front<span class="token punctuation">.</span>NextNode <span class="token operator">=</span> node<span class="token punctuation">;</span>        Rear <span class="token operator">=</span> node<span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">DeQueue</span><span class="token punctuation">(</span><span class="token keyword">out</span> T t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>Front <span class="token operator">==</span> Rear<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            t <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        t <span class="token operator">=</span> Front<span class="token punctuation">.</span>Element<span class="token punctuation">;</span>        Front <span class="token operator">=</span> Front<span class="token punctuation">.</span>NextNode<span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇，我们将会复习一下基于线性表衍生出的两种数据结构 —— 栈和队列。&lt;/p&gt;
&lt;h2 id=&quot;栈-Stack&quot;&gt;&lt;a href=&quot;#栈-Stack&quot; class=&quot;headerlink&quot; title=&quot;栈(Stack)&quot;&gt;&lt;/a&gt;栈(Stack)&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(%E5%9B%9B)/"/>
    <id>https://1ess.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(%E5%9B%9B)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇，我们来讨论一种一对多的数据结构 —— 树。</p><h2 id="树-Tree"><a href="#树-Tree" class="headerlink" title="树(Tree)"></a>树(Tree)</h2><hr><h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>树是 n(n &gt;= 0) 个节点的有限集。当 n = 0 时，称为空树。在任意一棵非空树中: </p><ol><li>有且仅有一个特定的称为根(root)的节点</li><li>当 n &gt;= 1 时，其余节点可分为 m(m &gt; 0)个互不相交的有限集 T<sub>1</sub>、T<sub>2</sub>、…、T<sub>m</sub>，其中每一个集合本身又是一棵树，并且称为根的子树(SubTree)</li></ol><p>对于树，还需要注意两点: </p><ol><li>n &gt; 0 时根节点是唯一的，不可能存在多个根节点</li><li>m &gt; 0 时，子树的个数没有限制，但他们一定互不相交</li></ol><h3 id="节点分类"><a href="#节点分类" class="headerlink" title="节点分类"></a>节点分类</h3><p>树的节点包含一个数据元素以及若干个指向其子树的分支。节点拥有的子树的个数称为节点的度(Degree)。<br>度为 0 的节点成为叶节点(Leaf)。度不为 0 的节点称为分支节点。<br>除了根节点之外的分支节点又称为内部节点。</p><h3 id="节点间的关系"><a href="#节点间的关系" class="headerlink" title="节点间的关系"></a>节点间的关系</h3><p>节点的子树的根成为该节点的孩子(Child)，相应的该节点称为孩子的双亲(Parent)。同一双亲的孩子之间互称为兄弟(Sibling)。</p><h3 id="树的其他概念"><a href="#树的其他概念" class="headerlink" title="树的其他概念"></a>树的其他概念</h3><p>节点的层次(Level)从根开始定义起，根为第一层，根的孩子为第二层。树中节点的最大层次称为树的深度(Depth)。<br>如果将树中节点的各子树看成从左至右是有次序的，不能互换的，则称该树为有序树，否则称为无序树。</p><p>森林(Forest)是 m(m &gt;= 0)棵互不相交的树的集合。</p><h2 id="二叉树"><a href="#二叉树" class="headerlink" title="二叉树"></a>二叉树</h2><hr><p>二叉树(Binary Tree)是 n(n &gt;= 0)个节点的有限集合，该集合或为空集(空二叉树)，或者由一个根节点和两棵互不相交的、分别称为根节点的左子树和右子树的二叉树组成。</p><h3 id="二叉树的特点"><a href="#二叉树的特点" class="headerlink" title="二叉树的特点"></a>二叉树的特点</h3><ul><li>每个节点最多有两棵子树，所以二叉树中不存在度大于 2 的节点。注意不是只有而是<strong>最多有</strong>，没有或者有一棵子树也是可以的</li><li>左子树和右子树是有顺序的</li><li>即使树中某节点只有一棵子树，也要区分他是左子树还是右子树</li></ul><p>二叉树具有五种基本形态: </p><ol><li>空二叉树</li><li>只有一个根节点</li><li>根节点只有左子树</li><li>根节点只有右子树</li><li>根节点既有左子树又有右子树</li></ol><h3 id="特殊二叉树"><a href="#特殊二叉树" class="headerlink" title="特殊二叉树"></a>特殊二叉树</h3><h4 id="斜树"><a href="#斜树" class="headerlink" title="斜树"></a>斜树</h4><p>所有节点都只有左子树的二叉树叫做左斜树。所有节点都只有右子树的二叉树叫做右斜树。二者统称为斜树。<br>线性表结构就可以理解为是树的一种极其特殊的表现形式。</p><h4 id="满二叉树"><a href="#满二叉树" class="headerlink" title="满二叉树"></a>满二叉树</h4><p>在一棵二叉树中，如果所有的分支节点都存在左子树和右子树，并且所有的叶子都在同一层上，这样的二叉树称为满二叉树。</p><p>满二叉树的特点: </p><ol><li>叶子只能出现在最下层</li><li>非叶子节点的度一定是 2</li><li>在同样深度的二叉树中，满二叉树的节点个数最多，叶子数最多</li></ol><h4 id="完全二叉树"><a href="#完全二叉树" class="headerlink" title="完全二叉树"></a>完全二叉树</h4><p>对一棵具有 n(n &gt;= 0)个节点的二叉树按层序编号，如果编号为 i(1 &lt;= i &lt;= n)的节点与同样深度的满二叉树中编号为 i 的节点在二叉树中的位置完全相同，则这棵二叉树称为完全二叉树。<br>注意: 满二叉树一定是完全二叉树，但完全二叉树不一定是满二叉树。</p><p>完全二叉树的特点: </p><ol><li>叶子节点只能出现在最下两层</li><li>最下层的叶子一定集中在左部连续位置</li><li>倒数第二层，若有叶子节点，一定都在右部连续位置</li><li>如果节点度为 1，则该节点只有左孩子</li><li>同样节点数的二叉树，完全二叉树的深度最小</li></ol><h3 id="二叉树的性质"><a href="#二叉树的性质" class="headerlink" title="二叉树的性质"></a>二叉树的性质</h3><ol><li>在二叉树的第 i 层上最多有 2<sup>i-1</sup> 个节点(i &gt;= 1)</li><li>深度为 k 的二叉树最多有 2<sup>k</sup> - 1 个节点</li><li>对任何一棵二叉树 T，如果其叶节点个数为 n<sub>0</sub>，度为 2 的节点数为 n<sub>2</sub>，则 n<sub>0</sub> = n<sub>2</sub> + 1</li></ol><h3 id="二叉树的存储结构"><a href="#二叉树的存储结构" class="headerlink" title="二叉树的存储结构"></a>二叉树的存储结构</h3><p>对于二叉树使用顺序存储适用性不强，一般使用链式存储结构。二叉树每个节点最多有两个孩子所以为他设计一个数据域和两个指针域，我们称这样的链表为二叉链表。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">BiTNode</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> T Element<span class="token punctuation">;</span>    <span class="token keyword">public</span> BiTNode<span class="token operator">&lt;</span>T<span class="token operator">></span> LChild<span class="token punctuation">;</span>    <span class="token keyword">public</span> BiTNode<span class="token operator">&lt;</span>T<span class="token operator">></span> RChild<span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token function">BiTNode</span><span class="token punctuation">(</span>T t<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        Element <span class="token operator">=</span> t<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="遍历二叉树-Traveing-Binary-Tree"><a href="#遍历二叉树-Traveing-Binary-Tree" class="headerlink" title="遍历二叉树(Traveing Binary Tree)"></a>遍历二叉树(Traveing Binary Tree)</h3><p>二叉树遍历是指从根节点出发，按照某种次序依次访问二叉树中所有节点，使得每个节点被访问一次且仅被访问一次。</p><p>这里有两个关键词: <strong>访问</strong>和<strong>次序</strong></p><h4 id="二叉树遍历方法"><a href="#二叉树遍历方法" class="headerlink" title="二叉树遍历方法"></a>二叉树遍历方法</h4><p>主要分为四种: </p><ol><li>前序遍历: 规则是若二叉树为空，则空操作返回，否则先访问根节点，然后前序遍历左子树，再前序遍历右子树(根-左-右)</li><li>中序遍历: 规则是若二叉树为空，则空操作返回，否则从根节点开始(注意并不是先访问根节点)，中序遍历根节点左子树，然后访问根节点，最后中序遍历右子树(左-根-右)</li><li>后序遍历: 则是若二叉树为空，则空操作返回，否则从左到右先叶子后节点的方式遍历访问左右子树，最后是访问根节点(左-右-根)</li><li>层序遍历: 则是若二叉树为空，则空操作返回，否则从树的第一层开始，也就是根节点开始访问，从上而下逐层遍历，在同一层中，按照从左到右的顺序对节点逐个访问</li></ol><p>注意: 前、中、后代表的是根节点位置。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">PreOrderTraverse</span><span class="token punctuation">(</span>BiTNode<span class="token operator">&lt;</span>T<span class="token operator">></span> node<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>Element<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">PreOrderTraverse</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>LChild<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">PreOrderTraverse</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>RChild<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> Data<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">InOrderTraverse</span><span class="token punctuation">(</span>BiTNode<span class="token operator">&lt;</span>T<span class="token operator">></span> node<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token function">InOrderTraverse</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>LChild<span class="token punctuation">)</span><span class="token punctuation">;</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>Element<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">InOrderTraverse</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>RChild<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> Data<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">PostOrderTraverse</span><span class="token punctuation">(</span>BiTNode<span class="token operator">&lt;</span>T<span class="token operator">></span> node<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>node <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token function">PostOrderTraverse</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>LChild<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">PostOrderTraverse</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>RChild<span class="token punctuation">)</span><span class="token punctuation">;</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span>node<span class="token punctuation">.</span>Element<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> Data<span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>二叉树遍历的性质: </p><ol><li>已知前序遍历和中序遍历，可以唯一确定一棵二叉树</li><li>已知后序遍历和中序遍历，可以唯一确定一棵二叉树</li><li>已知前序遍历和后序遍历，是不可以唯一确定一棵二叉树</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇，我们来讨论一种一对多的数据结构 —— 树。&lt;/p&gt;
&lt;h2 id=&quot;树-Tree&quot;&gt;&lt;a href=&quot;#树-Tree&quot; class=&quot;headerlink&quot; title=&quot;树(Tree)&quot;&gt;&lt;/a&gt;树(Tree)&lt;/h2&gt;&lt;hr&gt;
&lt;h3 id=&quot;概述&quot;&gt;&lt;a hre</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(%E4%BA%94)/"/>
    <id>https://1ess.github.io/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84(%E4%BA%94)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇，我们来讨论一种多对多的数据结构 —— 图。</p><h2 id="图的定义"><a href="#图的定义" class="headerlink" title="图的定义"></a>图的定义</h2><hr><p>图(Graph)是由顶点有穷非空集合和顶点之间边的集合组成，通常表示为: G(V, E)，其中，G 表示一个图，V 是图 G 中顶点的集合，E 是图 G 中边的集合。</p><p>对于图的定义，我们需要注意几个方面: </p><ul><li>线性表中我们把元素叫元素，树中将集合元素称为节点，在图中数据元素，我们则称为顶点(Vertex)</li><li>线性表中可以没有数据元素，称为空表。树中可以没有节点，称为空树。但是，在图中，不允许没有顶点</li></ul><h3 id="各种图定义"><a href="#各种图定义" class="headerlink" title="各种图定义"></a>各种图定义</h3><p>无向边: 若顶点 v<sub>i</sub> 到 v<sub>j</sub> 之间的边没有方向，则称这条边为无向边(Edge)，用无序偶对 (v<sub>i</sub>, v<sub>j</sub>) 表示，如果图中的边都是无向边，则称该图为无向图(Undirected graphs)。</p><p>有向边: 若顶点 v<sub>i</sub> 到 v<sub>j</sub> 之间的边有方向，则称这条边为有向边，也称为弧(Arc)，用有序偶对 &lt;v<sub>i</sub>, v<sub>j</sub>&gt; 表示，v<sub>i</sub> 称为弧尾(Tail)，v<sub>j</sub> 称为弧头(Head)，如果图中的边都是有向边，则称该图为有向图(Directed graphs)。</p><p>在图中，若不存在顶点到其自身的边，且同一条边不重复出现，则称这样的图为简单图。我们在本篇要讨论的也都是简单图。</p><p>在无向图中，如果任意两个顶点之间都存在边，则称该图为无向完全图。含有 n 个顶点的无向完全图有 n*(n-1)/2 条边。</p><p>在有向图中，如果任意两个顶点之间都存在方向互为相反的两条弧，则称该图为有向完全图。含有 n 个顶点的有向完全图有 n*(n-1) 条边。</p><p>有很少条边或弧的图称为稀疏图，反之称为稠密图。</p><p>有些图的边或弧具有与他相关的数字，这种与图的边或弧相关的数叫做权(Weight)。这种带权的图称为网(Network)。</p><h3 id="图的顶点与边间关系"><a href="#图的顶点与边间关系" class="headerlink" title="图的顶点与边间关系"></a>图的顶点与边间关系</h3><p>对于无向图 G=(V, {E})，如果边 (v, v<sub>i</sub>) ∈ E，则称顶点 v 和 v<sub>i</sub> 互为邻接点，即 v 和 v<sub>i</sub> 相邻接。边 (v, v<sub>i</sub>) 依附于顶点 v 和 v<sub>i</sub>，或者说 (v, v<sub>i</sub>) 与顶点 v 和 v<sub>i</sub> 相关联。<br>顶点 v 的度是和 v 相关联的边的数目，记为 TD(v)。</p><p>对于无向图 G=(V, {E})，如果弧 &lt;v, v<sub>i</sub>&gt; ∈ E，则称顶点 v 邻接到顶点 v<sub>i</sub>，顶点 v<sub>i</sub> 邻接自顶点 v。以顶点 v 为头的弧的数目称为 v 的入度，记为 ID(v)，以 v 为尾的弧的数目称为 v 的出度，记为 OD(v)，顶点 v 的度为 TD(v) = ID(v) + OD(v)。</p><p>无向图 G=(V, {E}) 中从顶点 v 到顶点 v<sub>i</sub> 的路径(Path)是一个顶点序列。<br>路径的长度是路径上的边或弧的数目。</p><p>第一个顶点到最后一个顶点相同的路径称为回路或环。</p><h3 id="连通图"><a href="#连通图" class="headerlink" title="连通图"></a>连通图</h3><p>在无向图 G 中，如果从顶点 v 到顶点 v<sub>i</sub> 有路径，则称 v 和 v<sub>i</sub> 是连通的，如果对于图中任意两个顶点都是连通的，则称 G 是连通图。</p><h2 id="图的存储结构"><a href="#图的存储结构" class="headerlink" title="图的存储结构"></a>图的存储结构</h2><hr><p>我们来看一下对于图的五种不同的存储结构: </p><ol><li>邻接矩阵</li><li>邻接表</li><li>十字链表</li><li>邻接多重表</li><li>边集数组</li></ol><h2 id="图的遍历"><a href="#图的遍历" class="headerlink" title="图的遍历"></a>图的遍历</h2><hr><p>从图中某一顶点除法访遍图中其余顶点，且每一个顶点仅被访问一次，这一过程就称为图的遍历。</p><p>可分为: </p><ol><li>深度优先遍历(Depth First Search，DFS)</li><li>广度优先遍历(Breadth First Search，BFS)</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇，我们来讨论一种多对多的数据结构 —— 图。&lt;/p&gt;
&lt;h2 id=&quot;图的定义&quot;&gt;&lt;a href=&quot;#图的定义&quot; class=&quot;headerlink&quot; title=&quot;图的定义&quot;&gt;&lt;/a&gt;图的定义&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;图(Graph)是由顶点有穷非空集合和顶点之间边的</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/%E7%AE%97%E6%B3%95(%E4%B8%80)/"/>
    <id>https://1ess.github.io/%E7%AE%97%E6%B3%95(%E4%B8%80)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇开始，我们来看看在工作中比较常用的两大算法之一的<strong>查找</strong>算法。</p><h2 id="概论"><a href="#概论" class="headerlink" title="概论"></a>概论</h2><hr><p>查找表(Search Table): 是由同一类型的数据元素构成的集合。<br>关键字(Key): 是数据元素中某个数据项的值，又称为键值。<br>若此关键字可以唯一地标识某一记录，则称此关键字为主关键字(Primary Key)。</p><p>查找(Searching)就是根据给定的某个值，在查找表中确定一个其关键字等于给定值的数据元素。</p><h3 id="顺序查找表"><a href="#顺序查找表" class="headerlink" title="顺序查找表"></a>顺序查找表</h3><p>顺序查找(Sequential Search)又称为线性查找，是最基本的查找技术，他的查找过程是: 从表中第一个(或最后一个)记录开始，逐个进行记录的关键字和给定值比较，若某个记录的关键字和给定值相等，则查找成功，找到所查的记录，如果直到最后一个(或第一个)记录，其关键字和给定值都不相等时，则表中没有所查的记录，查找不成功。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">SequentialSearch</span><span class="token operator">&lt;</span>T<span class="token operator">></span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> T<span class="token punctuation">[</span><span class="token punctuation">]</span> Sequential<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">SequentialSearch</span><span class="token punctuation">(</span>T<span class="token punctuation">[</span><span class="token punctuation">]</span> sequential<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        Sequential <span class="token operator">=</span> sequential<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">SequentialSearching</span><span class="token punctuation">(</span>T key<span class="token punctuation">,</span> <span class="token keyword">out</span> T record<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token keyword">var</span> s <span class="token keyword">in</span> Sequential<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>s<span class="token punctuation">.</span><span class="token function">Equals</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            record <span class="token operator">=</span> s<span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        record <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="有序查找表"><a href="#有序查找表" class="headerlink" title="有序查找表"></a>有序查找表</h3><p>最常用的有序查找就是折半查找。折半查找又称为二分查找(Binary Search)，他的前提是线性表中的记录必须是关键码有序，线性表必须采用顺序存储。折半查找的基本思想是: 在有序表中，取中间记录作为比较对象，若给定值与中间记录的关键字相等，则查找成功，若给定值小于中间记录的关键字，则在中间记录的左半区继续查找，若给定值大于中间记录的关键字，则在中间记录的右半区继续查找，不断重复上述过程，直到查找成功，或所有查找区域无记录，查找失败为止。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">BinarySearching</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> Binary<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">BinarySearching</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> binary<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        Binary <span class="token operator">=</span> binary<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> Status <span class="token function">BinarySearch</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">,</span> <span class="token keyword">out</span> <span class="token keyword">int</span> record<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> low <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> high <span class="token operator">=</span> Binary<span class="token punctuation">.</span>Length<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>low <span class="token operator">&lt;=</span> high<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> mid <span class="token operator">=</span> <span class="token punctuation">(</span>low <span class="token operator">+</span> high<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>Binary<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">&lt;</span> key<span class="token punctuation">)</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                low <span class="token operator">=</span> mid <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>            <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>Binary<span class="token punctuation">[</span>mid<span class="token punctuation">]</span> <span class="token operator">></span> key<span class="token punctuation">)</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                high <span class="token operator">=</span> mid <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>            <span class="token keyword">else</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                record <span class="token operator">=</span> Binary<span class="token punctuation">[</span>mid<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        record <span class="token operator">=</span> <span class="token keyword">default</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="线性索引查找"><a href="#线性索引查找" class="headerlink" title="线性索引查找"></a>线性索引查找</h3><p>数据结构的最终目的是提高数据的处理速度，索引是为了加快查找速度而设计的一种数据结构。索引就是把一个关键字与他对应的记录相关联的过程。索引技术是组织大型数据库以及磁盘文件的一种重要技术。</p><p>索引按照结构可以分为<strong>线性索引</strong>、<strong>树形索引</strong>、<strong>多级索引</strong>。本篇只介绍线性索引。</p><p>所谓线性索引就是将索引项集合组织为线性结构，也称索引表。我们介绍三种线性索引: </p><ol><li>稠密索引</li><li>分块索引</li><li>倒排索引</li></ol><h4 id="稠密索引"><a href="#稠密索引" class="headerlink" title="稠密索引"></a>稠密索引</h4><p>稠密索引是指在线性索引中，将数据集中的每个记录对应一个索引项，索引项一定是按照关键码有序的排列。</p><h4 id="分块索引"><a href="#分块索引" class="headerlink" title="分块索引"></a>分块索引</h4><p>分块有序，是把数据集的记录分成若干块，并且这些块满足: </p><ol><li>块内无序</li><li>块间有序</li></ol><p>对于分块有序的数据集，将每块对应一个索引项，这种索引方法叫做分块索引。<br>分块索引普遍用于数据库表查找等技术中。</p><h4 id="倒排索引"><a href="#倒排索引" class="headerlink" title="倒排索引"></a>倒排索引</h4><p>用于最基础的搜索技术。本篇略过。</p><h3 id="二叉排序树"><a href="#二叉排序树" class="headerlink" title="二叉排序树"></a>二叉排序树</h3><p>二叉排序树(Binary Sort Tree)又称为二叉查找树。他或是一棵空树，或者是具有下列性质的二叉树: </p><ul><li>若他的左子树不空，则左子树上所有结点的值均小于他的根节点的值</li><li>若他的右子树不空，则右子树上所有结点的值均大于他的根节点的值</li><li>他的左右子树也分别为二叉排序树</li></ul><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">BinarySortTree</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> BiTree RootBiTree <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//查找</span>    <span class="token keyword">public</span> Status <span class="token function">SearchBst</span><span class="token punctuation">(</span><span class="token keyword">int</span> key<span class="token punctuation">,</span> BiTree rootBiTree<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> temp <span class="token operator">=</span> rootBiTree<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>temp <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>Data <span class="token operator">==</span> key<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>temp<span class="token punctuation">.</span>Data <span class="token operator">></span> key<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            temp <span class="token operator">=</span> temp<span class="token punctuation">.</span>LBiTree<span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token function">SearchBst</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> temp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        temp <span class="token operator">=</span> temp<span class="token punctuation">.</span>RBiTree<span class="token punctuation">;</span>        <span class="token keyword">return</span> <span class="token function">SearchBst</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> temp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">//插入</span>    <span class="token keyword">public</span> Status <span class="token function">InsertBst</span><span class="token punctuation">(</span><span class="token keyword">int</span> record<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> bt <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">BiTree</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            Data <span class="token operator">=</span> record        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>RootBiTree <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            RootBiTree <span class="token operator">=</span> bt<span class="token punctuation">;</span>            <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> current <span class="token operator">=</span> RootBiTree<span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token keyword">true</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">var</span> parent <span class="token operator">=</span> current<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>Data <span class="token operator">&lt;=</span> bt<span class="token punctuation">.</span>Data<span class="token punctuation">)</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>current<span class="token punctuation">.</span>Data <span class="token operator">>=</span> bt<span class="token punctuation">.</span>Data<span class="token punctuation">)</span> <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Error<span class="token punctuation">;</span>                current <span class="token operator">=</span> current<span class="token punctuation">.</span>RBiTree<span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>                parent<span class="token punctuation">.</span>RBiTree <span class="token operator">=</span> bt<span class="token punctuation">;</span>                <span class="token keyword">break</span><span class="token punctuation">;</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>            current <span class="token operator">=</span> current<span class="token punctuation">.</span>LBiTree<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>current <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            parent<span class="token punctuation">.</span>LBiTree <span class="token operator">=</span> bt<span class="token punctuation">;</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> Status<span class="token punctuation">.</span>Ok<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="散列表查找"><a href="#散列表查找" class="headerlink" title="散列表查找"></a>散列表查找</h3><p>散列技术是在记录的存储位置和他的关键字之间建立一个确定的对应关系 f，使得每个关键字 key 对应一个存储位置 f(key)。<br>我们把这种对应关系 f 称为散列函数，又称为哈希函数(Hash)。采用散列技术将记录存储在一块连续的存储空间中，这块存储空间称为散列表或哈希表(Hash Table)。</p><p>两个关键字 key<sub>1</sub> 不等于 key<sub>2</sub>，但是 f(key<sub>1</sub>) = f(key<sub>2</sub>)，这种现象我们称为冲突。</p><h4 id="散列函数的构造方法"><a href="#散列函数的构造方法" class="headerlink" title="散列函数的构造方法"></a>散列函数的构造方法</h4><p>好的散列函数: </p><ol><li>计算简单</li><li>散列地址分布均匀</li></ol><p>散列函数构造方法可分为: </p><ol><li>直接定址法</li><li>数字分析法</li><li>平方取中法</li><li>折叠法</li><li>除留余数法</li><li>随机数法</li></ol><h4 id="处理散列冲突的方法"><a href="#处理散列冲突的方法" class="headerlink" title="处理散列冲突的方法"></a>处理散列冲突的方法</h4><ol><li>开放定址法</li><li>再散列函数法</li><li>链地址法</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇开始，我们来看看在工作中比较常用的两大算法之一的&lt;strong&gt;查找&lt;/strong&gt;算法。&lt;/p&gt;
&lt;h2 id=&quot;概论&quot;&gt;&lt;a href=&quot;#概论&quot; class=&quot;headerlink&quot; title=&quot;概论&quot;&gt;&lt;/a&gt;概论&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;查找表(Searc</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/%E7%AE%97%E6%B3%95(%E4%BA%8C)/"/>
    <id>https://1ess.github.io/%E7%AE%97%E6%B3%95(%E4%BA%8C)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇开始，我们来看看在工作中比较常用的两大算法之一的<strong>排序</strong>算法。</p><h2 id="基本概念及分类"><a href="#基本概念及分类" class="headerlink" title="基本概念及分类"></a>基本概念及分类</h2><hr><p>假设含有 n 个记录的序列为 {r<sub>1</sub>, r<sub>2</sub>, …, r<sub>n</sub>}，其相应的关键字分别为 {k<sub>1</sub>, k<sub>2</sub>, …, k<sub>n</sub>}，需确定 1, 2, …, n 的一种排列 p<sub>1</sub>, p<sub>2</sub>, …, p<sub>n</sub>，使其相应的关键字满足 k<sub>p1</sub> &lt;= k<sub>p2</sub> &lt;= … &lt;= k<sub>pn</sub> 非递减(或非递增)关系，即使得序列成为一个按关键字有序的序列 {r<sub>p1</sub>, r<sub>p2</sub>, …, r<sub>pn</sub>}，这样的操作就称为排序。</p><p>注意: 我们在排序问题中，通常将数据元素称为记录。</p><h3 id="排序的稳定性"><a href="#排序的稳定性" class="headerlink" title="排序的稳定性"></a>排序的稳定性</h3><p>假设 k<sub>i</sub> = k<sub>j</sub> (1 &lt;= i &lt;= n, 1 &lt;= j &lt;= n, i 不等于 j)，且在排序前的序列中 r<sub>i</sub> 领先于 r<sub>j</sub>(即 i &lt; j)。如果排序后 r<sub>i</sub> 仍领先于 r<sub>j</sub>，则称所用的排序方法时稳定的，反之，则称所用的排序方法时不稳定的。</p><h3 id="内排序和外排序"><a href="#内排序和外排序" class="headerlink" title="内排序和外排序"></a>内排序和外排序</h3><p>根据排序过程中待排序的记录是否全部放置于内存中，排序分为: 内排序和外排序。<br>内排序是在排序整个过程中，待排序的所有记录全部被放置在内存中。<br>外排序是由于待排序的记录个数太多，不能同时放置在内存，整个排序过程需要在内外存之间多次交换数据才能进行。</p><h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><hr><p>冒泡排序(Bubble Sort): 一种交换排序，他的基本思想是，两两比较相邻记录的关键字，如果反序则交换，知道没有反序记录为止。</p><h3 id="简单实现"><a href="#简单实现" class="headerlink" title="简单实现"></a>简单实现</h3><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">class</span> <span class="token class-name">SqList</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">const</span> <span class="token keyword">int</span> MaxSize <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> Data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>MaxSize<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">int</span> Length<span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token function">SqList</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> length <span class="token operator">=</span> <span class="token punctuation">(</span>data<span class="token punctuation">.</span>Length <span class="token operator">></span> MaxSize <span class="token operator">?</span> MaxSize <span class="token punctuation">:</span> data<span class="token punctuation">.</span>Length<span class="token punctuation">)</span><span class="token punctuation">;</span>        Length <span class="token operator">=</span> length<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">ref</span> <span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">ref</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> temp <span class="token operator">=</span> a<span class="token punctuation">;</span>        a <span class="token operator">=</span> b<span class="token punctuation">;</span>        b <span class="token operator">=</span> temp<span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token comment" spellcheck="true">/// &lt;summary></span>    <span class="token comment" spellcheck="true">/// 只能算是简单交换排序，经历一遍内存循环，将最小值置于第 i 位</span>    <span class="token comment" spellcheck="true">/// &lt;/summary></span>    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BubbleSort0</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> Length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> Data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                    <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">ref</span> Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">ref</span> Data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ShowDatas</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">int</span><span class="token punctuation">[</span>Length<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        Console<span class="token punctuation">.</span><span class="token function">WriteLine</span><span class="token punctuation">(</span><span class="token keyword">string</span><span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span><span class="token string">"->"</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="经典冒泡排序"><a href="#经典冒泡排序" class="headerlink" title="经典冒泡排序"></a>经典冒泡排序</h3><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">/// &lt;summary></span><span class="token comment" spellcheck="true">/// 经典冒泡排序，从后向前依次比较，较小值上浮</span><span class="token comment" spellcheck="true">/// &lt;/summary></span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BubbleSort1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> Length <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">></span> i<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>Data<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> Data<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">ref</span> Data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">ref</span> Data<span class="token punctuation">[</span>j<span class="token number">-1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="优化冒泡排序"><a href="#优化冒泡排序" class="headerlink" title="优化冒泡排序"></a>优化冒泡排序</h3><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">/// &lt;summary></span><span class="token comment" spellcheck="true">/// 优化冒泡排序，设置标记，当存在交换时，设置标记，否则退出循环</span><span class="token comment" spellcheck="true">/// &lt;/summary></span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">BubbleSort2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> flag <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Length <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>flag<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        flag <span class="token operator">=</span> <span class="token keyword">true</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> Length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">></span> i<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>Data<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">>=</span> Data<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>            <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">ref</span> Data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">ref</span> Data<span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            flag <span class="token operator">=</span> <span class="token keyword">false</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="简单选择排序"><a href="#简单选择排序" class="headerlink" title="简单选择排序"></a>简单选择排序</h2><hr><p>简单选择排序(Simple Selection Sort)就是通过 n - i 次关键字间的比较，从 n - i + 1 个记录中选出关键字最小的记录，并和第 i 个记录交换。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">/// &lt;summary></span><span class="token comment" spellcheck="true">/// 简单选择排序，通过比较第 i 位与其之后的最小值，若存在，则交换</span><span class="token comment" spellcheck="true">/// &lt;/summary></span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">SelectionSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> minIndex <span class="token operator">=</span> i<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> Length<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>Data<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span> <span class="token operator">></span> Data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>                minIndex <span class="token operator">=</span> j<span class="token punctuation">;</span>            <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>minIndex <span class="token operator">!=</span> i<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">ref</span> Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">ref</span> Data<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="直接插入排序"><a href="#直接插入排序" class="headerlink" title="直接插入排序"></a>直接插入排序</h2><hr><p>直接插入排序(Straight Insertion Sort)的基本操作是将一个记录插入到已经排序好的有序表中，从而得到一个新的、记录数加一的有序表。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token comment" spellcheck="true">/// &lt;summary></span><span class="token comment" spellcheck="true">/// 每次遍历将第 i 位记录取出，将之前的记录后移，再将第 i 位记录置于正确位置</span><span class="token comment" spellcheck="true">/// &lt;/summary></span><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">InsertionSort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">>=</span> Data<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">continue</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> temp <span class="token operator">=</span> Data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> i<span class="token number">-1</span><span class="token punctuation">;</span> j <span class="token operator">>=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> Data<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">></span> temp<span class="token punctuation">;</span> j<span class="token operator">--</span><span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">ref</span> Data<span class="token punctuation">[</span>j<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">ref</span> Data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><hr><p>快速排序(Quick Sort)的基本思想是: 通过一趟排序将待排序记录分割成独立的两部分，其中一部分记录的关键字均比另一部分记录的关键字小，则可分别对这两部分继续进行排序，以达到整个序列有序的目的。</p><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">QuickSort</span><span class="token punctuation">(</span><span class="token keyword">int</span> left<span class="token punctuation">,</span> <span class="token keyword">int</span> right<span class="token punctuation">)</span><span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>    <span class="token keyword">var</span> low <span class="token operator">=</span> left<span class="token punctuation">;</span>    <span class="token keyword">var</span> high <span class="token operator">=</span> right<span class="token punctuation">;</span>    <span class="token keyword">var</span> temp <span class="token operator">=</span> Data<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>left <span class="token operator">></span> right<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">return</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span>low <span class="token operator">!=</span> high<span class="token punctuation">)</span>    <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>Data<span class="token punctuation">[</span>high<span class="token punctuation">]</span> <span class="token operator">>=</span> temp <span class="token operator">&amp;&amp;</span> low <span class="token operator">&lt;</span> high<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            high<span class="token operator">--</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>Data<span class="token punctuation">[</span>low<span class="token punctuation">]</span> <span class="token operator">&lt;=</span> temp <span class="token operator">&amp;&amp;</span> low <span class="token operator">&lt;</span> high<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            low<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>low <span class="token operator">&lt;</span> high<span class="token punctuation">)</span>        <span class="token operator">&amp;</span>#<span class="token number">123</span><span class="token punctuation">;</span>            <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">ref</span> Data<span class="token punctuation">[</span>low<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">ref</span> Data<span class="token punctuation">[</span>high<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span>    <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token keyword">ref</span> Data<span class="token punctuation">[</span>low<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">ref</span> Data<span class="token punctuation">[</span>left<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">QuickSort</span><span class="token punctuation">(</span>left<span class="token punctuation">,</span> low <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">QuickSort</span><span class="token punctuation">(</span>low <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> right<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&amp;</span>#<span class="token number">125</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇开始，我们来看看在工作中比较常用的两大算法之一的&lt;strong&gt;排序&lt;/strong&gt;算法。&lt;/p&gt;
&lt;h2 id=&quot;基本概念及分类&quot;&gt;&lt;a href=&quot;#基本概念及分类&quot; class=&quot;headerlink&quot; title=&quot;基本概念及分类&quot;&gt;&lt;/a&gt;基本概念及分类&lt;/</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/MySQL(%E4%B8%80)/"/>
    <id>https://1ess.github.io/MySQL(%E4%B8%80)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>从本篇开始，我们来说说最流行的数据库 —— 关于 MySQL 的那些事儿。</p><h2 id="数据库概念"><a href="#数据库概念" class="headerlink" title="数据库概念"></a>数据库概念</h2><hr><p>数据库(Database)是按照数据结构来组织、存储和管理数据的建立在计算机存储设备上的仓库。</p><blockquote><p>人们通常用数据库这个术语来代表他们使用的数据库软件。这是不正确的，它是引起混淆的根源。确切地说，数据库软件应称为 DBMS(数据库管理系统)。数据库是通过 DBMS 创建和操纵的容器。数据库可以是保存在硬设备上的文件，但也可以不是。在很大程度上说，数据库究竟是文件还是别的什么东西并不重要，因为你并不直接访问数据库; 你使用的是 DBMS，它替你访问数据库。</p></blockquote><h3 id="数据库分类"><a href="#数据库分类" class="headerlink" title="数据库分类"></a>数据库分类</h3><ul><li>关系数据库(Relational Database)</li><li>非关系数据库(NoSQL)</li></ul><h3 id="关系型数据库"><a href="#关系型数据库" class="headerlink" title="关系型数据库"></a>关系型数据库</h3><h4 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h4><p>关系型数据库是创建在关系模型基础上的数据库，借助于集合代数等数学概念和方法来处理数据库中的数据。现实世界中的各种实体以及实体之间的各种联系均用关系模型来表示。现如今虽然对此模型有一些批评意见，但它还是数据存储的传统标准。</p><p>关系模型由<strong>关系数据结构</strong>、<strong>关系操作集合</strong>、<strong>关系完整性约束</strong>三部分组成。</p><p>标准数据查询语言 SQL 就是一种基于关系数据库的语言，这种语言执行对关系数据库中数据的检索和操作。</p><p>典型的关系型数据库: </p><ul><li>MySQL</li><li>PostgreSQL</li><li>SQL Server</li><li>Oracle</li><li>Sqlite</li><li>DB2</li></ul><p>几乎所有的数据库管理系统都配备了一个开放式数据库连接(ODBC)驱动程序，令各个数据库之间得以互相集成。</p><h3 id="非关系型数据库"><a href="#非关系型数据库" class="headerlink" title="非关系型数据库"></a>非关系型数据库</h3><p>NoSQL 一词最早出现于1998年，是 Carlo Strozzi 开发的一个轻量、开源、不提供 SQL 功能的关系数据库。当代典型的关系数据库在一些数据敏感的应用中表现了糟糕的性能，例如为巨量文档创建索引、高流量网站的网页服务，以及发送流式媒体。关系型数据库的典型实现主要被调整用于执行规模小而读写频繁，或者大批量极少写访问的事务。</p><p>典型的非关系型数据库: </p><ol><li>Key/value 硬盘存储</li></ol><ul><li>LevelDB</li><li>MemcacheDB</li></ul><ol start="2"><li>Key/value RAM 存储</li></ol><ul><li>Redis</li><li>memcached</li></ul><h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><hr><p>结构化查询语言(Structured Query Language)简称 SQL，是一种特殊的编程语言，是一种数据库查询和程序设计语言，用于存储、查询、更新数据和管理关系数据库系统，同时也是数据库脚本文件的扩展名。</p><h3 id="SQL-分类"><a href="#SQL-分类" class="headerlink" title="SQL 分类"></a>SQL 分类</h3><ol><li>数据查询语言(Data Query Language，DQL): 代表指令 SELECT/SHOW</li><li>数据操作语言(Data Manipulation Language，DML): 代表指令 INSERT/UPDATE/DELETE</li><li>事务处理语言(Transaction Process Language，TPL): 代表指令 BEGIN TRANSACTION/COMMIT/ROLLBACK</li><li>数据控制语言(Data Control Language，DCL): 代表指令 GRANT/REVOKE</li><li>数据定义语言(Data Definition Language，DDL): 代表指令 CREATE/DROP</li></ol><h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><hr><p>MySQL 是一种关系型数据库管理系统，目前属于 Oracle 旗下产品。</p><h3 id="安装-MySQL"><a href="#安装-MySQL" class="headerlink" title="安装 MySQL"></a>安装 MySQL</h3><h4 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h4><ol><li>直接去<a href="https://dev.mysql.com/downloads/installer/">官网</a>下载 MySQL，双击安装</li><li>配置环境变量，指向 mysql 的 bin 目录(默认路径: C:\Program Files\MySQL\MySQL Server 8.0\bin)</li><li>配置初始化的 my.ini 配置文件</li></ol><pre class="line-numbers language-csharp"><code class="language-csharp"><span class="token punctuation">[</span>mysqld<span class="token punctuation">]</span><span class="token preprocessor property"># 设置3306端口</span>port<span class="token operator">=</span><span class="token number">3306</span><span class="token preprocessor property"># 设置mysql的安装目录</span>basedir<span class="token operator">=</span>C<span class="token punctuation">:</span>\Program Files\MySQL\MySQL Server <span class="token number">8.0</span>\<span class="token preprocessor property"># 设置mysql数据库的数据的存放目录</span>datadir<span class="token operator">=</span>C<span class="token punctuation">:</span>\Program Files\MySQL\MySQL Server <span class="token number">8.0</span>\Data<span class="token preprocessor property"># 允许最大连接数</span>max_connections<span class="token operator">=</span><span class="token number">200</span><span class="token preprocessor property"># 允许连接失败的次数。</span>max_connect_errors<span class="token operator">=</span><span class="token number">10</span><span class="token preprocessor property"># 服务端使用的字符集默认为UTF8</span>character<span class="token operator">-</span><span class="token keyword">set</span><span class="token operator">-</span>server<span class="token operator">=</span>utf8<span class="token preprocessor property"># 创建新表时将使用的默认存储引擎</span><span class="token keyword">default</span><span class="token operator">-</span>storage<span class="token operator">-</span>engine<span class="token operator">=</span>INNODB<span class="token preprocessor property"># 默认使用</span><span class="token string">"mysql_native_password"</span>插件认证<span class="token preprocessor property">#mysql_native_password</span>default_authentication_plugin<span class="token operator">=</span>mysql_native_password<span class="token punctuation">[</span>mysql<span class="token punctuation">]</span><span class="token preprocessor property"># 设置mysql客户端默认字符集</span><span class="token keyword">default</span><span class="token operator">-</span>character<span class="token operator">-</span><span class="token keyword">set</span><span class="token operator">=</span>utf8<span class="token punctuation">[</span>client<span class="token punctuation">]</span><span class="token preprocessor property"># 设置mysql客户端连接服务端时默认使用的端口</span>port<span class="token operator">=</span><span class="token number">3306</span><span class="token keyword">default</span><span class="token operator">-</span>character<span class="token operator">-</span><span class="token keyword">set</span><span class="token operator">=</span>utf8<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><ol start="4"><li>在 MySQL 的安装目录的仓目录下执行命令: </li></ol><pre class="line-numbers language-sh"><code class="language-sh">mysqld --initialize --console<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="5"><li>在管理员权限下执行命令: </li></ol><pre class="line-numbers language-sh"><code class="language-sh">mysqld --install<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意: 如果提示服务已存在，则需要执行命令: </p><pre class="line-numbers language-sh"><code class="language-sh">sc delete mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h4><p>我们直接使用 homebrew 安装: </p><pre class="line-numbers language-sh"><code class="language-sh">brew install mysql<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>与 Windows 类似，我们还可以修改 Mysql 中配置文件，位于目录 /usr/bin/etc/my.cnf。</p><h3 id="启动和停止-MySQL-服务"><a href="#启动和停止-MySQL-服务" class="headerlink" title="启动和停止 MySQL 服务"></a>启动和停止 MySQL 服务</h3><p>MySQL 是一种 C/S 架构，包括客户端和服务端。<br>服务端对应的软件: mysqld.exe<br>客户端对应的软件: mysql.exe</p><h4 id="Windows-1"><a href="#Windows-1" class="headerlink" title="Windows"></a>Windows</h4><h5 id="命令行方式"><a href="#命令行方式" class="headerlink" title="命令行方式"></a>命令行方式</h5><pre class="line-numbers language-sh"><code class="language-sh"># 启动 mysql 服务net start mysql# 关闭 mysql 服务net stop mysql<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h5 id="系统服务方式"><a href="#系统服务方式" class="headerlink" title="系统服务方式"></a>系统服务方式</h5><p>在计算机管理-服务(services.msc)中操作 mysql 服务。</p><h4 id="Mac-1"><a href="#Mac-1" class="headerlink" title="Mac"></a>Mac</h4><pre class="line-numbers language-sh"><code class="language-sh"># 启动 mysql 服务brew services start mysql# 关闭 mysql 服务brew services stop mysql<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="登录和退出-MySQL-系统"><a href="#登录和退出-MySQL-系统" class="headerlink" title="登录和退出 MySQL 系统"></a>登录和退出 MySQL 系统</h3><p>通过客户端 mysql.exe 与服务器连接认证。</p><h4 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h4><p>连接认证语法: </p><pre class="line-numbers language-sh"><code class="language-sh">mysql -h&#123;ip地址或域名&#125; -P&#123;mysql 监听端口，通常3306&#125; -u&#123;用户名&#125; -p<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="退出"><a href="#退出" class="headerlink" title="退出"></a>退出</h4><p>我们使用完 mysql 之后，由于连接数量有限，所以注意一定要断开连接。</p><pre class="line-numbers language-sh"><code class="language-sh">\q\quitexit<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>注意: Mysql 8.0 版本和 Mysql 5.7 版本的身份验证插件不同: </p><ul><li>Mysql 8.0 身份验证插件为 caching_sha2_password</li><li>Mysql 5.7 身份验证插件为 mysql_native_password</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;从本篇开始，我们来说说最流行的数据库 —— 关于 MySQL 的那些事儿。&lt;/p&gt;
&lt;h2 id=&quot;数据库概念&quot;&gt;&lt;a href=&quot;#数据库概念&quot; class=&quot;headerlink&quot; title=&quot;数据库概念&quot;&gt;&lt;/a&gt;数据库概念&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;数据库(Data</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/MySQL(%E4%BA%8C)/"/>
    <id>https://1ess.github.io/MySQL(%E4%BA%8C)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇，我们来说说 SQL 的基本操作 —— 库操作、表操作以及数据操作。</p><h2 id="库操作"><a href="#库操作" class="headerlink" title="库操作"></a>库操作</h2><hr><h3 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h3><p>基本语法: create database {数据库名} [库选项];</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 创建数据库</span><span class="token keyword">create</span> <span class="token keyword">database</span> mydatabase<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><p>库选项: </p><ul><li>字符集: charset {指定字符集}，不指定则采用安装时默认字符集</li><li>校对集: collate {指定校对集}</li></ul><h3 id="显示数据库"><a href="#显示数据库" class="headerlink" title="显示数据库"></a>显示数据库</h3><h4 id="显示全部"><a href="#显示全部" class="headerlink" title="显示全部"></a>显示全部</h4><p>基本语法: show databases;</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 显示全部数据库</span><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="显示部分"><a href="#显示部分" class="headerlink" title="显示部分"></a>显示部分</h4><p>基本语法: show databases like ‘{模式匹配}’;</p><ul><li>_: 匹配当前位置单个字符</li><li>%: 匹配指定位置多个字符</li></ul><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 显示部分数据库</span><span class="token keyword">show</span> <span class="token keyword">databases</span> <span class="token operator">like</span> <span class="token string">'my%'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="显示数据库创建语句"><a href="#显示数据库创建语句" class="headerlink" title="显示数据库创建语句"></a>显示数据库创建语句</h4><p>基本语法: show create database {数据库名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 显示数据库创建语句</span><span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">database</span> mydatabase<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="选择数据库"><a href="#选择数据库" class="headerlink" title="选择数据库"></a>选择数据库</h3><p>基本语法: use {数据库名};<br>在命令行会出现: Database changed</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 选择数据库</span><span class="token keyword">use</span> mydatabase<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="修改数据库"><a href="#修改数据库" class="headerlink" title="修改数据库"></a>修改数据库</h3><p>5.5 版本之后，只能修改库选项，不能再修改库名了。<br>基本语法: alter databse {数据库名} {库选项};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 修改库选项</span><span class="token keyword">alter</span> <span class="token keyword">database</span> mydatabase <span class="token keyword">charset</span> gbk<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h3><p>基本语法: drop database {数据库名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 删除数据库</span><span class="token keyword">drop</span> <span class="token keyword">database</span> mydatabase<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h2><hr><h3 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h3><h4 id="普通创建表"><a href="#普通创建表" class="headerlink" title="普通创建表"></a>普通创建表</h4><p>基本语法: create table {表名}(字段 字段类型 [字段属性], …) [表选项];</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 普通创建表</span><span class="token keyword">create</span> <span class="token keyword">table</span> mydatabase<span class="token punctuation">.</span>class<span class="token punctuation">(</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- 或者</span><span class="token keyword">use</span> mydatabase<span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">table</span> class<span class="token punctuation">(</span>name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意: 表必须放在对应的数据库之下，有两种方式: </p><ol><li>在表名前加上数据库名，用”.”连接</li><li>在创建表之前，先选择数据库(即 use {数据库名};)</li></ol><p>表选项与库选项类似，包括: </p><ol><li>存储引擎: engine {引擎名}</li><li>字符集: charset {字符集}</li><li>校对集: collate {校对集}</li></ol><h4 id="复制已存在表结构"><a href="#复制已存在表结构" class="headerlink" title="复制已存在表结构"></a>复制已存在表结构</h4><p>基本语法: create table {表名} like {表名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 复制表结构</span><span class="token keyword">create</span> <span class="token keyword">table</span> mydatabase<span class="token punctuation">.</span>test <span class="token operator">like</span> mydatabase2<span class="token punctuation">.</span>class<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="显示数据表"><a href="#显示数据表" class="headerlink" title="显示数据表"></a>显示数据表</h3><h4 id="显示全部-1"><a href="#显示全部-1" class="headerlink" title="显示全部"></a>显示全部</h4><p>基本语法: show tables;</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 显示全部数据表</span><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="显示部分-1"><a href="#显示部分-1" class="headerlink" title="显示部分"></a>显示部分</h4><p>基本语法: show tables like ‘{模式匹配}’;</p><ul><li>_: 匹配当前位置单个字符</li><li>%: 匹配指定位置多个字符</li></ul><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 显示部分数据表</span><span class="token keyword">show</span> <span class="token keyword">tables</span> <span class="token operator">like</span> <span class="token string">'c%'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="显示表结构-字段名，字段类型，字段属性等"><a href="#显示表结构-字段名，字段类型，字段属性等" class="headerlink" title="显示表结构(字段名，字段类型，字段属性等)"></a>显示表结构(字段名，字段类型，字段属性等)</h4><p>基本语法: desc {表名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 显示表结构</span><span class="token keyword">desc</span> test<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="修改数据表"><a href="#修改数据表" class="headerlink" title="修改数据表"></a>修改数据表</h3><h4 id="修改表属性"><a href="#修改表属性" class="headerlink" title="修改表属性"></a>修改表属性</h4><p>基本语法: alter table {表名} {表选项};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 修改表选项</span><span class="token keyword">alter</span> <span class="token keyword">table</span> test <span class="token keyword">engine</span> <span class="token keyword">innodb</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h4><h5 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h5><p>基本语法: rename table {旧表名} to {新表名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 修改表名</span><span class="token keyword">rename</span> <span class="token keyword">table</span> test <span class="token keyword">to</span> test1<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="新增字段"><a href="#新增字段" class="headerlink" title="新增字段"></a>新增字段</h5><p>基本语法: alter table {表名} add {字段名} {字段类型} [字段属性];</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 新增字段</span><span class="token keyword">alter</span> <span class="token keyword">table</span> test1 <span class="token keyword">add</span> age <span class="token keyword">int</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="修改字段名"><a href="#修改字段名" class="headerlink" title="修改字段名"></a>修改字段名</h5><p>基本语法: alter table {表名} change {旧字段名} {新字段名} {字段类型} [字段属性];</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 修改字段名</span><span class="token keyword">alter</span> <span class="token keyword">table</span> test1 change age new_age <span class="token keyword">int</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="修改字段类型或属性"><a href="#修改字段类型或属性" class="headerlink" title="修改字段类型或属性"></a>修改字段类型或属性</h5><p>基本语法: alter table {表名} modify {字段名} {新字段类型} [新字段属性];</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 修改字段类型或属性</span><span class="token keyword">alter</span> <span class="token keyword">table</span> test1 <span class="token keyword">modify</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h5 id="删除字段"><a href="#删除字段" class="headerlink" title="删除字段"></a>删除字段</h5><p>基本语法: alter table {表名} drop {字段名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 删除字段</span><span class="token keyword">alter</span> <span class="token keyword">table</span> test1 <span class="token keyword">drop</span> new_age<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h4 id="删除数据表"><a href="#删除数据表" class="headerlink" title="删除数据表"></a>删除数据表</h4><p>基本语法: drop table {表名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 删除数据表</span><span class="token keyword">drop</span> <span class="token keyword">table</span> test1<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h2><hr><h3 id="插入数据操作"><a href="#插入数据操作" class="headerlink" title="插入数据操作"></a>插入数据操作</h3><p>基本语法: insert into {表名} [({字段1}, {字段2}, …)] values({字段值1}, {字段值2}, …); </p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 插入数据</span><span class="token keyword">insert</span> <span class="token keyword">into</span> test <span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'Tom'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- 或者</span><span class="token keyword">insert</span> <span class="token keyword">into</span> test <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'Lisi'</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="查询数据操作"><a href="#查询数据操作" class="headerlink" title="查询数据操作"></a>查询数据操作</h3><p>基本语法: select * from {表名} [where 字段名 =/like 字段值];</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 查询数据</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> test<span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- 或者</span><span class="token keyword">select</span> name<span class="token punctuation">,</span> age <span class="token keyword">from</span> test <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'Lisi'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="删除数据操作"><a href="#删除数据操作" class="headerlink" title="删除数据操作"></a>删除数据操作</h3><p>基本语法: delete from {表名} [where 字段名 =/like 字段值];</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 删除数据</span><span class="token keyword">delete</span> <span class="token keyword">from</span> test <span class="token keyword">where</span> age<span class="token operator">>=</span><span class="token number">20</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="更新数据操作"><a href="#更新数据操作" class="headerlink" title="更新数据操作"></a>更新数据操作</h3><p>基本语法: update {表名} set {字段名}={新值} [where 字段名 =/like 字段值];</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 更新操作</span><span class="token keyword">update</span> test <span class="token keyword">set</span> age<span class="token operator">=</span><span class="token number">30</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'Lisi'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h2 id="其他常见命令"><a href="#其他常见命令" class="headerlink" title="其他常见命令"></a>其他常见命令</h2><h3 id="查看-MySQL-服务端版本"><a href="#查看-MySQL-服务端版本" class="headerlink" title="查看 MySQL 服务端版本"></a>查看 MySQL 服务端版本</h3><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--  +-----------+</span><span class="token comment" spellcheck="true">--  | version() |</span><span class="token comment" spellcheck="true">--  +-----------+</span><span class="token comment" spellcheck="true">--  | 8.0.16    |</span><span class="token comment" spellcheck="true">--  +-----------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="查看当前选择的数据库"><a href="#查看当前选择的数据库" class="headerlink" title="查看当前选择的数据库"></a>查看当前选择的数据库</h3><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token keyword">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">--  +------------+</span><span class="token comment" spellcheck="true">--  | database() |</span><span class="token comment" spellcheck="true">--  +------------+</span><span class="token comment" spellcheck="true">--  | test       |</span><span class="token comment" spellcheck="true">--  +------------+</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇，我们来说说 SQL 的基本操作 —— 库操作、表操作以及数据操作。&lt;/p&gt;
&lt;h2 id=&quot;库操作&quot;&gt;&lt;a href=&quot;#库操作&quot; class=&quot;headerlink&quot; title=&quot;库操作&quot;&gt;&lt;/a&gt;库操作&lt;/h2&gt;&lt;hr&gt;
&lt;h3 id=&quot;创建数据库&quot;&gt;&lt;a hr</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/MySQL(%E4%B8%89)/"/>
    <id>https://1ess.github.io/MySQL(%E4%B8%89)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇，我们再来说说 MySQL 中的列类型和列属性以及表间关系。</p><h2 id="列类型"><a href="#列类型" class="headerlink" title="列类型"></a>列类型</h2><hr><h3 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h3><ol><li>Tinyint: 迷你整型，采用 1 字节保存整型数据</li><li>Smallint: 小整型，采用 2 字节保存整型数据</li><li>Mediumint: 中整型，采用 3 字节保存整型数据</li><li>Int: 标准整型，采用 4 字节保存整型数据</li><li>Bigint: 大整型，采用 8 字节保存整型数据</li></ol><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_int<span class="token punctuation">(</span>    int_1 <span class="token keyword">tinyint</span><span class="token punctuation">,</span>    int_2 <span class="token keyword">smallint</span><span class="token punctuation">,</span>    int_3 <span class="token keyword">mediumint</span><span class="token punctuation">,</span>    int_4 <span class="token keyword">int</span><span class="token punctuation">,</span>    int_5 <span class="token keyword">bigint</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="无符号设定"><a href="#无符号设定" class="headerlink" title="无符号设定"></a>无符号设定</h4><p>默认整型是有符号的，如果只想有正数，只需要使用 unsigned。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> my_int <span class="token keyword">add</span> int_6 <span class="token keyword">tinyint</span> unsigned<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="显示长度"><a href="#显示长度" class="headerlink" title="显示长度"></a>显示长度</h4><p>指在数据显示的时候，最长可以显示的位数。<br>如果需要始终以最大长度显示，可以使用 zerofill 属性。<br>注意: 使用了 zerofill，一定是无符号整型。因为从左到右 0 填充。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> my_int <span class="token keyword">add</span> int_7 <span class="token keyword">tinyint</span> zerofill<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>可以手动指定显示长度，但是不能改变该类型所能表示的最大大小，只是在 zerofill 时，不足位数时，以该位数填充。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> my_int <span class="token keyword">add</span> int_7 <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> zerofill<span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- 填充 1 时，显示 01，填充 100 时，显示 100</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><h3 id="小数类型"><a href="#小数类型" class="headerlink" title="小数类型"></a>小数类型</h3><p>在 MySQL 中，小数类型分为: </p><ol><li>浮点型</li></ol><ul><li>Float: 单精度浮点型，采用 4 字节保存小数类型数据，精度大概在 7 位</li><li>Double: 双精度浮点型，采用 8 字节保存小数类型数据，精度大概在 15 位</li></ul><ol start="2"><li>定点型</li></ol><ul><li>Decimal</li></ul><h4 id="浮点型"><a href="#浮点型" class="headerlink" title="浮点型"></a>浮点型</h4><p>基本语法: </p><ol><li>float(或 double): 不指定小数位</li><li>float(M, D)(或 double(M, D)): 表示一共存储 M 个有效数字，其中小数位占 D 位，即整数位数占 M-D 位，小数部分占 D 位</li></ol><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_float<span class="token punctuation">(</span>    float_1 <span class="token keyword">float</span><span class="token punctuation">,</span>    float_2 <span class="token keyword">float</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><p>注意: float 或 double 用于不需要精确记录的小数。</p><h4 id="定点型"><a href="#定点型" class="headerlink" title="定点型"></a>定点型</h4><p>定点型可以保证数据精确的小数。小数和整数部分分开存储，<br>基本语法:<br>decimal(M, D): M 表示总长度，最大值不能超过 65，D 代表小数部分长度，最大值不能超过 30</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_decimal<span class="token punctuation">(</span>    decimal_1 <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    float_1 <span class="token keyword">float</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="日期类型"><a href="#日期类型" class="headerlink" title="日期类型"></a>日期类型</h3><ol><li>Date: 系统采用 3 个字节来存储数据，对应格式为: YYYY-mm-dd，初始值: 0000-00-00</li><li>Time: 系统采用 3 个字节来存储数据，对应格式为: HH:ii:ss，能表示的范围是: -838:59:59 ~ 838:59:59</li><li>Datetime: 就是将前面的 Date 类型和 Time 类型合并，系统采用 8 个字节来存储数据，对应格式为: YYYY-mm-dd HH:ii:ss</li><li>Timestamp: 表示从格林威治时间开始的时间戳，但是格式仍为: YYYY-mm-dd HH:ii:ss</li><li>Year: 系统采用 1 个字节来存储数据，能表示范围是 1900 ~ 2155</li></ol><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_date<span class="token punctuation">(</span> date_1 <span class="token keyword">date</span><span class="token punctuation">,</span> date_2 time<span class="token punctuation">,</span> date_3 <span class="token keyword">datetime</span><span class="token punctuation">,</span> date_4 <span class="token keyword">timestamp</span><span class="token punctuation">,</span> date_5 year<span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意: timestamp 类型不能为 null，且存在默认值为当前时间戳的时间，当数据更新时，该字段自动更新。另外，通常我们也可以用整型来保存真正的时间戳。</p><h3 id="字符串类型"><a href="#字符串类型" class="headerlink" title="字符串类型"></a>字符串类型</h3><ol><li>Char: 定长字符，基本语法: char(L)，L 代表字符数，不论中英文，L 长度范围是 0 ~ 255</li><li>Varchar: 变长字符，基本语法: varchar(L)，L 代表字符数，不论中英文，L 长度范围是 0 ~ 65535</li><li>Text: 文本类型，存储普通字符文本</li></ol><ul><li>Tinytext: 系统使用 1 个字节来保存，实际能存储 2<sup>8</sup> + 1</li><li>Text: 系统使用 2 个字节来保存，实际能存储 2<sup>16</sup> + 2</li><li>Mediumtext: 系统使用 3 个字节来保存，实际能存储 2<sup>24</sup> + 3</li><li>Longtext: 系统使用 4 个字节来保存，实际能存储 2<sup>32</sup> + 4</li></ul><ol start="4"><li>Enum: 枚举类型，在存入之前，先预设几个项来限制可输入值，基本语法: enum({枚举值1}, {枚举值2}, …)</li><li>Set: 将多个数据项同时保存，本质是将指定的项按照对应的二进制位来控制，1 表示被选中，0 表示未被选中，基本语法: set({值1}, {值2}, …)</li></ol><p>注意: 如果数据长度超过 255 个字符，我们一般是使用 text，而不是 char 或 varchar。<br>对于 Text 类型，通常我们直接使用 Text 类型即可，系统会自动选择合适的文本类型。<br>我们还有 Blob 类型存储二进制文本，如图片，文件等，但是一般不使用，一般都是直接存储链接。<br>枚举类型在 MySQL 中实际存储的整型，注意是从 1 开始。</p><h2 id="列属性"><a href="#列属性" class="headerlink" title="列属性"></a>列属性</h2><hr><p>在 MySQL 中一共有 6 个列属性: </p><ol><li>null</li><li>默认值</li><li>列描述</li><li>主键</li><li>唯一键</li><li>自增长</li></ol><h3 id="Null"><a href="#Null" class="headerlink" title="Null"></a>Null</h3><p>null 属性代表字段为空。如果为 YES，表示该字段可以为空，我们设计表时，尽量不要让数据为空。</p><h3 id="Default"><a href="#Default" class="headerlink" title="Default"></a>Default</h3><p>设计表时，在用户不进行数据输入时，那么会自动填充默认值。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_default<span class="token punctuation">(</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>    age <span class="token keyword">int</span> <span class="token keyword">default</span> <span class="token number">18</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Comment"><a href="#Comment" class="headerlink" title="Comment"></a>Comment</h3><p>用于给开发人员进行维护的一个注释说明。<br>基本语法: comment ‘描述’</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_comment<span class="token punctuation">(</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'用户名，不能为空'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--用户名，不能为空</span>    pass <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'密码，不能为空'</span><span class="token punctuation">,</span> <span class="token comment" spellcheck="true">--密码，不能为空</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Primary-Key"><a href="#Primary-Key" class="headerlink" title="Primary Key"></a>Primary Key</h3><p>主键是指在一张表中，值具有唯一性的字段。</p><h4 id="创建主键"><a href="#创建主键" class="headerlink" title="创建主键"></a>创建主键</h4><h5 id="随表创建"><a href="#随表创建" class="headerlink" title="随表创建"></a>随表创建</h5><ol><li>直接在需要当作主键的字段之后，增加 primary key 属性来确定主键</li></ol><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_pri1<span class="token punctuation">(</span>    username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="2"><li>在所有字段之后增加 primary key 选项，基本语法: primary key({字段列表})</li></ol><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_pri2<span class="token punctuation">(</span>    username <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h5 id="表后创建"><a href="#表后创建" class="headerlink" title="表后创建"></a>表后创建</h5><p>基本语法: alter table {表名} add primary key({字段});</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> my_pri3 <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="删除主键"><a href="#删除主键" class="headerlink" title="删除主键"></a>删除主键</h4><p>基本语法: alter table {表名} drop primary key;</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> my_pri3 <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="复合主键"><a href="#复合主键" class="headerlink" title="复合主键"></a>复合主键</h4><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_score<span class="token punctuation">(</span>    student_id char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    course_id char<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    score <span class="token keyword">tinyint</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>student_id<span class="token punctuation">,</span> course_id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><h4 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h4><ol><li>字段值不能为空</li><li>字段值不能重复</li></ol><h4 id="主键分类"><a href="#主键分类" class="headerlink" title="主键分类"></a>主键分类</h4><ol><li>业务主键</li><li>逻辑主键</li></ol><h3 id="Auto-Increment"><a href="#Auto-Increment" class="headerlink" title="Auto_Increment"></a>Auto_Increment</h3><p>给定字段该属性之后，该列数据在未被提供确定数据时，系统会根据已存在数据进行自动增长后，填充数据。通常用于逻辑主键。<br>自动增长只用于数值类型。<br>基本语法: {字段} {字段类型} auto_increment;</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_increment<span class="token punctuation">(</span>    id <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">comment</span> <span class="token string">'用户名不为空'</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="修改自增长当前值"><a href="#修改自增长当前值" class="headerlink" title="修改自增长当前值"></a>修改自增长当前值</h4><p>一个表最多只能有一个自增长。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> my_increment <span class="token keyword">auto_increment</span> <span class="token number">10</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="删除自增长"><a href="#删除自增长" class="headerlink" title="删除自增长"></a>删除自增长</h4><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> my_increment <span class="token keyword">modify</span> id <span class="token keyword">int</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="查看自增长初始变量"><a href="#查看自增长初始变量" class="headerlink" title="查看自增长初始变量"></a>查看自增长初始变量</h4><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'auto_increment%'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>auto_increment_increment 指步长，auto_increment_offset 指初始值。</p><h3 id="Unique-Key"><a href="#Unique-Key" class="headerlink" title="Unique Key"></a>Unique Key</h3><p>唯一键与主键一样，都是保证字段的数据唯一性的。不同的是: </p><ol><li>一张表只能有一个主键，但可以有多个唯一键</li><li>唯一键允许为 null，且可以有多个</li></ol><h4 id="创建唯一键"><a href="#创建唯一键" class="headerlink" title="创建唯一键"></a>创建唯一键</h4><ol><li>直接在需要当作唯一键的字段之后，增加 unique [key] 属性来确定</li></ol><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_unique1<span class="token punctuation">(</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">unique</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><ol start="2"><li>在所有字段之后，增加 unique key unique key({字段列表})</li></ol><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_unique2<span class="token punctuation">(</span>    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>    <span class="token keyword">unique</span> <span class="token keyword">key</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><ol start="3"><li>在创建完表后，也可以创建唯一键，alter table {表名} add unique key({字段列表});</li></ol><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> my_unique3 <span class="token keyword">add</span> <span class="token keyword">unique</span> <span class="token keyword">key</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="删除唯一键"><a href="#删除唯一键" class="headerlink" title="删除唯一键"></a>删除唯一键</h4><p>基本语法: alter table {表名} drop index {唯一键名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">table</span> my_unique1 <span class="token keyword">drop</span> <span class="token keyword">index</span> name<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="表间关系"><a href="#表间关系" class="headerlink" title="表间关系"></a>表间关系</h2><hr><h3 id="一对一关系"><a href="#一对一关系" class="headerlink" title="一对一关系"></a>一对一关系</h3><p>一张表中的一条记录与另一张表中最多只有一条记录有明确关系。通常，此方案设计为两张表中使用同样主键即可。</p><h3 id="一对多关系"><a href="#一对多关系" class="headerlink" title="一对多关系"></a>一对多关系</h3><p>通常一对多的关系设计方案，再多关系的表中维护一个字段，通常是一关系的主键。</p><h3 id="多对多关系"><a href="#多对多关系" class="headerlink" title="多对多关系"></a>多对多关系</h3><p>通常多对多的关系设计方案，需要再增加一张关系表来维护该关系。</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇，我们再来说说 MySQL 中的列类型和列属性以及表间关系。&lt;/p&gt;
&lt;h2 id=&quot;列类型&quot;&gt;&lt;a href=&quot;#列类型&quot; class=&quot;headerlink&quot; title=&quot;列类型&quot;&gt;&lt;/a&gt;列类型&lt;/h2&gt;&lt;hr&gt;
&lt;h3 id=&quot;整数类型&quot;&gt;&lt;a href=&quot;#</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/MySQL(%E5%9B%9B)/"/>
    <id>https://1ess.github.io/MySQL(%E5%9B%9B)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇，我们说说 MySQL 对于数据的增删改查操作以及运算符。</p><h2 id="新增数据"><a href="#新增数据" class="headerlink" title="新增数据"></a>新增数据</h2><hr><h3 id="多数据插入"><a href="#多数据插入" class="headerlink" title="多数据插入"></a>多数据插入</h3><p>基本语法: insert into {表名}({字段列表}) values({值列表1}), ({值列表2}), …</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">insert</span> <span class="token keyword">into</span> my_advance_insert<span class="token punctuation">(</span>name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'Lisi'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="主键冲突"><a href="#主键冲突" class="headerlink" title="主键冲突"></a>主键冲突</h3><p>在有的表中，使用的是业务主键，但是往往在进行数据插入时，又不确定数据表中是否存在对应的主键。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_stud <span class="token punctuation">(</span>    stud_id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">comment</span> <span class="token string">'主键，学生ID'</span><span class="token punctuation">,</span>    name <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span class="token keyword">insert</span> <span class="token keyword">into</span> my_stud <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'stu0001'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'stu0002'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'stu0003'</span><span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- 主键冲突</span><span class="token keyword">insert</span> <span class="token keyword">into</span> my_stud <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'stu0003'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>解决方案: </p><ol><li>主键冲突更新，类似插入语法，如果插入过程主键冲突，采用更新方法。基本语法: insert into {表名}({字段列表}) values({值列表1}) on duplicate key update {字段}={新值};</li></ol><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 主键冲突更新</span><span class="token keyword">insert</span> <span class="token keyword">into</span> my_stud <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'stu0003'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token keyword">duplicate key</span> <span class="token keyword">update</span> name<span class="token operator">=</span><span class="token string">'d'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre><ol start="2"><li>主键冲突替换，先删除，再重新插入。基本语法: replace into {表名}({字段列表}) values({值列表1});</li></ol><pre class="line-numbers language-sql"><code class="language-sql">replace <span class="token keyword">into</span> my_stud <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">'stu0001'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="蠕虫复制"><a href="#蠕虫复制" class="headerlink" title="蠕虫复制"></a>蠕虫复制</h3><p>基本语法: insert into {表名}({字段列表}) select * from {其他表名或本身表};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">create</span> <span class="token keyword">table</span> my_stud2 <span class="token punctuation">(</span>    stud_id <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token keyword">comment</span> <span class="token string">'主键，学生ID'</span><span class="token punctuation">,</span>    name <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">)</span> <span class="token keyword">charset</span> utf8<span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- 复制到本身</span><span class="token keyword">insert</span> <span class="token keyword">into</span> my_stud <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud<span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- 复制到新表</span><span class="token keyword">insert</span> <span class="token keyword">into</span> my_stud2 <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><p>注意: </p><ol><li>蠕虫复制可以在短期快速增加数据量，从而测试表压力，测试索引效率</li><li>注意主键冲突</li></ol><h2 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h2><hr><p>在更新数据时，要特别注意，通常一定要跟随条件进行更新。而且还可以使用 limit 来限制更新数量。<br>基本语法: update {表名} set {字段名}={字段值} [where 条件] [limit {数量}];</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">update</span> my_stud <span class="token keyword">set</span> name<span class="token operator">=</span><span class="token string">'x'</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'c'</span> <span class="token keyword">limit</span> <span class="token number">4</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h2><hr><p>删除数据时，也要特别注意，通常一定要跟随条件进行删除。而且也可以使用 limit 来限制删除数量。<br>基本语法: delete from {表名} [where 条件] [limit {数量}];</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">update</span> my_stud <span class="token keyword">set</span> name<span class="token operator">=</span><span class="token string">'x'</span> <span class="token keyword">where</span> name<span class="token operator">=</span><span class="token string">'c'</span> <span class="token keyword">limit</span> <span class="token number">4</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>要注意: delete 删除数据时，无法重置 auto_increment。要解决这个问题，我们可以使用: truncate {表名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">truncate</span> my_stud<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 相当于先 drop，再 create</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h2><hr><p>完整的查询指令: select [select 选项] {字段列表/*} from {数据源} [where 条件] [group by 分组] [having 条件] [order by 排序] [limit 数量];</p><h3 id="Select-选项"><a href="#Select-选项" class="headerlink" title="Select 选项"></a>Select 选项</h3><p>select 选项用来确定如何对待查询返回的结果。<br>可取值为: </p><ol><li>all，默认的，保存所有返回结果</li></ol><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><ol start="2"><li>distinct，去重，只保留不重复的结果(所有字段值都相同才算重复)</li></ol><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token keyword">distinct</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="字段列表"><a href="#字段列表" class="headerlink" title="字段列表"></a>字段列表</h3><p>字段我们可以取别名。<br>基本语法: {字段名} [as] {别名}</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> name <span class="token keyword">as</span> name1<span class="token punctuation">,</span> name <span class="token keyword">as</span> name2 <span class="token keyword">from</span> my_stud<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="From-数据源"><a href="#From-数据源" class="headerlink" title="From 数据源"></a>From 数据源</h3><p>数据源只要是复合二位表结构的数据即可。</p><h4 id="单表"><a href="#单表" class="headerlink" title="单表"></a>单表</h4><p>单表数据源就是表名。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="多表"><a href="#多表" class="headerlink" title="多表"></a>多表</h4><p>基本语法: from {表名1}, {表名2}, …<br>结果为: 两表记录相乘，字段数拼接。<br>从前一张表的每条记录，去拼凑第二张表的所有记录。这种操作在数学上定义就是笛卡尔积，在实际中要避免笛卡尔积。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_int<span class="token punctuation">,</span> my_set<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="动态"><a href="#动态" class="headerlink" title="动态"></a>动态</h4><p>数据源不是一个实体表，而是从表中查询出来的二维结果表，也称为子查询。<br>基本语法: from (select [select 选项] {字段列表/*} from {数据源}) as {别名};<br>注意: 子查询必须使用括号和别名。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> int_1<span class="token punctuation">,</span> int_3 <span class="token keyword">from</span> my_int<span class="token punctuation">)</span> <span class="token keyword">as</span> int_alias<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Where-子句"><a href="#Where-子句" class="headerlink" title="Where 子句"></a>Where 子句</h3><p>用来从数据表获取数据时，进行条件筛选。</p><h3 id="Group-By-子句"><a href="#Group-By-子句" class="headerlink" title="Group By 子句"></a>Group By 子句</h3><p>根据指定字段，将数据进行分组。分组的目的就是用于统计。<br>基本语法: group by {字段名}<br>注意: MySQL 5.7 之后，默认开启 ONLY_FULL_GROUP_BY 选项提供对 group by 合法性的检查。一条 select 语句，MySQL 允许 target list 中输出的表达式是除聚集函数或 group by column 以外的表达式。否则就是非法的。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">group</span> <span class="token keyword">by</span> class_id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意: group by 分组之后，只会取出每组的第一条记录。</p><p>有一些聚合函数可以使用: </p><ul><li>Count(): 统计每组数量，如果统计目标是字段，那么不会统计为 null 字段。如果是 *，则统计记录。</li><li>Avg(): 取平均值</li><li>Sum(): 求和</li><li>Max(): 求最大值</li><li>Min(): 求最小值</li><li>Group_concat(): 分组之后拼接字段</li></ul><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> class_id<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">min</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span> <span class="token keyword">from</span> my_stu <span class="token keyword">group</span> <span class="token keyword">by</span> class_id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="多分组"><a href="#多分组" class="headerlink" title="多分组"></a>多分组</h4><p>按某个字段分组之后，对已分组数据再进行分组。</p><p>基本语法: group by {字段1}, {字段2}, …</p><p>先使用字段1 进行分组，分组之后再使用字段2 进行分组。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> id<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> group_concat<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">from</span> my_stud <span class="token keyword">group</span> <span class="token keyword">by</span> class_id<span class="token punctuation">,</span> gender<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="分组排序"><a href="#分组排序" class="headerlink" title="分组排序"></a>分组排序</h4><p>按分组字段排序，注意: MySQL 8.0 不再进行隐式排序。必须使用 Order by 进行排序。<br>基本语法: </p><ul><li>Mysql 8.0之前: group by {字段1} [asc/desc], {字段2} [asc/desc];</li><li>Mysql 8.0之后: group by {字段1}, {字段2}, … order by {字段a} [asc/desc], {字段b} [asc/desc], … ;</li></ul><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 8.0 之前</span><span class="token keyword">select</span> id<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> group_concat<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">from</span> my_stud <span class="token keyword">group</span> <span class="token keyword">by</span> class_id<span class="token punctuation">,</span> gender <span class="token keyword">desc</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- 8.0 之后</span><span class="token keyword">select</span> id<span class="token punctuation">,</span> gender<span class="token punctuation">,</span> group_concat<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">from</span> my_stud <span class="token keyword">group</span> <span class="token keyword">by</span> class_id<span class="token punctuation">,</span> gender <span class="token keyword">order</span> <span class="token keyword">by</span> class_id <span class="token keyword">asc</span><span class="token punctuation">,</span> gender <span class="token keyword">desc</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="Having-子句"><a href="#Having-子句" class="headerlink" title="Having 子句"></a>Having 子句</h3><p>having 与 where 类似，都是进行条件筛选，但是也有不同点，having 用于 group by 子句之后，用于分组数据进行筛选。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> class_id<span class="token punctuation">,</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">as</span> number <span class="token keyword">from</span> my_stud <span class="token keyword">group</span> <span class="token keyword">by</span> class_id <span class="token keyword">having</span> number <span class="token operator">>=</span> <span class="token number">4</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Order-By-子句"><a href="#Order-By-子句" class="headerlink" title="Order By 子句"></a>Order By 子句</h3><p>根据字段对数据进行排序。<br>基本语法: order by {字段1} [asc/desc], {字段2} [asc/desc], …</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">order</span> <span class="token keyword">by</span> height <span class="token keyword">desc</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Limit-子句"><a href="#Limit-子句" class="headerlink" title="Limit 子句"></a>Limit 子句</h3><p>用来限制记录数量。</p><h4 id="记录数量限制"><a href="#记录数量限制" class="headerlink" title="记录数量限制"></a>记录数量限制</h4><p>基本语法: limit {数量};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">order</span> <span class="token keyword">by</span> height <span class="token keyword">limit</span> <span class="token number">1</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h4><p>利用 limit 限制获取指定区间的数量。<br>基本语法: limit {offset, length};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">order</span> <span class="token keyword">by</span> height <span class="token keyword">desc</span> <span class="token keyword">limit</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意: limit 表示最多获取数量，如果不够，就只显示真实数量。</p><h2 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h2><hr><h3 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h3><p>算数运算符包括: +, -, *, /, %<br>算数运算符通常用于运算结果(select 字段中)。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> int_1 <span class="token operator">+</span> int_2 <span class="token keyword">from</span> my_operator<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>需要注意: </p><ul><li>在 MySQL 中，除法运算结果是浮点数表示</li><li>除法中如果除数如果为 0，结果为 null</li><li>null 进行算术运算，结果都为 null</li></ul><h3 id="关系运算符"><a href="#关系运算符" class="headerlink" title="关系运算符"></a>关系运算符</h3><p>关系运算符包括: &gt;, &gt;=, &lt;, &lt;=, =, &lt;&gt;<br>常用于在条件中进行结果限定。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">where</span> age <span class="token operator">>=</span> <span class="token number">20</span> <span class="token keyword">order</span> <span class="token keyword">by</span> height<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意: </p><ul><li>MySQL 中数据会自动转换成相同类型，在进行比较</li><li>MySQL 中没有布尔类型，0 表示 false，1 表示 true</li></ul><p>在关系运算符中还可以使用: between and。<br>基本语法: between {条件1} and {条件2};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">where</span> age <span class="token operator">between</span> <span class="token number">20</span> <span class="token operator">and</span> <span class="token number">30</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意: between and 中条件1 必须小于条件2，否则结果为空。</p><h3 id="逻辑运算符"><a href="#逻辑运算符" class="headerlink" title="逻辑运算符"></a>逻辑运算符</h3><p>逻辑运算符包括: and, or, not</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">where</span> age <span class="token operator">>=</span> <span class="token number">20</span> <span class="token operator">and</span> age <span class="token operator">&lt;=</span> <span class="token number">30</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="In-运算符"><a href="#In-运算符" class="headerlink" title="In 运算符"></a>In 运算符</h3><p>基本语法: in (结果1, 结果2, …);</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">where</span> age <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Is-运算符"><a href="#Is-运算符" class="headerlink" title="Is 运算符"></a>Is 运算符</h3><p>is 专门用来判断字段值是否为 null。<br>基本语法: is null/is not null</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">where</span> name <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Like-运算符"><a href="#Like-运算符" class="headerlink" title="Like 运算符"></a>Like 运算符</h3><p>用来进行模糊匹配。<br>基本语法: like ‘模式匹配’;</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">where</span> name <span class="token operator">like</span> <span class="token string">'%a%'</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇，我们说说 MySQL 对于数据的增删改查操作以及运算符。&lt;/p&gt;
&lt;h2 id=&quot;新增数据&quot;&gt;&lt;a href=&quot;#新增数据&quot; class=&quot;headerlink&quot; title=&quot;新增数据&quot;&gt;&lt;/a&gt;新增数据&lt;/h2&gt;&lt;hr&gt;
&lt;h3 id=&quot;多数据插入&quot;&gt;&lt;a hre</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/MySQL(%E4%BA%94)/"/>
    <id>https://1ess.github.io/MySQL(%E4%BA%94)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇，我们说说 MySQL 中的联合查询、连接查询以及子查询。</p><h2 id="联合查询"><a href="#联合查询" class="headerlink" title="联合查询"></a>联合查询</h2><hr><p>基本概念: 可合并多个相似的选择查询结果的结果集，等同于将一个表追加到另一个表，从而实现将两个表的查询结果组合到一起，使用 Union 或 Union all。<br>注意: 这个合并是纵向合并，字段数不变，多个查询的结果合并。</p><h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><ol><li>同一张表的不同结果，合并到一起展示</li><li>在大数据量情况，会分表操作，会使用联合查询将数据存放到一起显示</li></ol><h3 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h3><p>select 语句 union [all/distinct(默认)] select 语句;</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">where</span> gender <span class="token operator">=</span> <span class="token string">'男'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> height <span class="token keyword">asc</span><span class="token punctuation">)</span><span class="token keyword">union</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">where</span> gender <span class="token operator">=</span> <span class="token string">'女'</span> <span class="token keyword">order</span> <span class="token keyword">by</span> height <span class="token keyword">desc</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><p>注意: 如果联合查询中使用 order by，必须把该 select 语句使用括号包裹。并且 MySQL 8.0 之前，为了使 order by 生效，还必须使用 limit {大数量}</p><h2 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h2><hr><p>基本概念: 将多张表连接到一起进行查询，会导致记录的行数和字段列数发生改变。</p><p>连接查询分类: </p><ol><li>交叉连接</li><li>内连接</li><li>外连接</li></ol><ul><li>左连接</li><li>右连接</li></ul><ol start="4"><li>自然连接</li></ol><h3 id="交叉连接-Cross-Join"><a href="#交叉连接-Cross-Join" class="headerlink" title="交叉连接(Cross Join)"></a>交叉连接(Cross Join)</h3><p>之前咱们说过多表查询时，就说过交叉查询的概念，只是语法不同。<br>基本语法: {表1} cross join {表2};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">cross</span> <span class="token keyword">join</span> my_operator<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="内连接-Inner-Join"><a href="#内连接-Inner-Join" class="headerlink" title="内连接(Inner Join)"></a>内连接(Inner Join)</h3><p>从一张表中取出所有的记录，去另一张表中匹配，利用匹配条件进行匹配，成功保留，失败舍去。<br>基本语法: {表1} [inner] join {表2} on {匹配条件};<br>注意: 如果内连接没有条件，则与交叉连接返回结果一样。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">inner</span> <span class="token keyword">join</span> my_class <span class="token keyword">on</span> my_stud<span class="token punctuation">.</span>class_id <span class="token operator">=</span> my_class<span class="token punctuation">.</span>id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>由于表名可能很长，我们通常也使用表别名简化操作。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">as</span> <span class="token number">a</span> <span class="token keyword">inner</span> <span class="token keyword">join</span> my_class <span class="token keyword">as</span> <span class="token number">b</span> <span class="token keyword">on</span> <span class="token number">a</span><span class="token punctuation">.</span>class_id <span class="token operator">=</span> <span class="token number">b</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意: 内连接只有匹配到的记录才会保留。</p><h3 id="外连接-Outer-Join"><a href="#外连接-Outer-Join" class="headerlink" title="外连接(Outer Join)"></a>外连接(Outer Join)</h3><p>一张表作为主表(表中记录都会保留)，根据条件去匹配另一张从表中的记录，从而得到目标数据。<br>外连接分为: </p><ul><li>左外连接(left join)，左表作为主表</li><li>右外连接(right join)，右表作为主表</li></ul><p>左连接基本语法: {主表} left join {从表} on {匹配条件};<br>右连接基本语法: {从表} right join {主表} on {匹配条件};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">as</span> s <span class="token keyword">left</span> <span class="token keyword">join</span> my_class <span class="token keyword">as</span> <span class="token number">c</span> <span class="token keyword">on</span> s<span class="token punctuation">.</span>class_id <span class="token operator">=</span> <span class="token number">c</span><span class="token punctuation">.</span>id<span class="token punctuation">;</span> <span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><p>注意: 如果从表数据都不匹配，则返回结果该条记录从表字段值都为 null。</p><h3 id="Using-关键字"><a href="#Using-关键字" class="headerlink" title="Using 关键字"></a>Using 关键字</h3><p>是在连接查询中替代 on 关键字的。<br>使用前提是两张表连接的字段是同名的，并且最终在结果只保留一个字段。</p><p>基本语法: {表1} [inner/left/right join] {表2} using({同名字段列表});</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">left</span> <span class="token keyword">join</span> my_class <span class="token keyword">using</span><span class="token punctuation">(</span>class_id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h2><hr><p>当一个查询是另一个查询的条件时，称之为子查询(Sub Query)。</p><h3 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h3><p>按功能来分: </p><ul><li>标量子查询: 子查询返回结果是一个数据</li><li>列子查询: 返回结果是一列</li><li>行子查询: 返回结果时一行</li><li>表子查询: 返回结果是多行多列</li><li>Exists 子查询: 返回结果是 1 或 0</li></ul><p>按位置来分: </p><ul><li>Where 子查询: 子查询语句出现在 Where 子句中</li><li>From 子查询: 子查询语句出现在 From 子句中，作为数据源</li></ul><h3 id="标量子查询"><a href="#标量子查询" class="headerlink" title="标量子查询"></a>标量子查询</h3><p>标量子查询 where 子句常使用 = 或 &lt;&gt; 操作符。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_class <span class="token keyword">as</span> <span class="token number">c</span> <span class="token keyword">where</span> <span class="token number">c</span><span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> class_id <span class="token keyword">from</span> my_stud <span class="token keyword">as</span> s <span class="token keyword">where</span> s<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'zhangsan'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="列子查询"><a href="#列子查询" class="headerlink" title="列子查询"></a>列子查询</h3><p>列子查询 where 子句常使用 in 操作符。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_class <span class="token keyword">as</span> <span class="token number">c</span> <span class="token keyword">where</span> <span class="token number">c</span><span class="token punctuation">.</span>id <span class="token operator">in</span> <span class="token punctuation">(</span><span class="token keyword">select</span> class_id <span class="token keyword">from</span> my_stud<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="行子查询"><a href="#行子查询" class="headerlink" title="行子查询"></a>行子查询</h3><p>行子查询 where 子句 = 左值要是一个构造的行元素。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_class <span class="token keyword">where</span> <span class="token punctuation">(</span>age<span class="token punctuation">,</span> height<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">max</span><span class="token punctuation">(</span>height<span class="token punctuation">)</span> <span class="token keyword">from</span> my_stud<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="表子查询"><a href="#表子查询" class="headerlink" title="表子查询"></a>表子查询</h3><p>表子查询用于 from 数据源，之前在动态查询时已经说过。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">order</span> <span class="token keyword">by</span> height <span class="token keyword">desc</span><span class="token punctuation">)</span> <span class="token keyword">as</span> order_stud <span class="token keyword">group</span> <span class="token keyword">by</span> class_id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h3 id="Exists-子查询"><a href="#Exists-子查询" class="headerlink" title="Exists 子查询"></a>Exists 子查询</h3><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_class <span class="token keyword">as</span> <span class="token number">c</span> <span class="token keyword">where</span> <span class="token keyword">exists</span><span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_stud <span class="token keyword">as</span> s <span class="token keyword">where</span> s<span class="token punctuation">.</span>class_id <span class="token operator">=</span> <span class="token number">c</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇，我们说说 MySQL 中的联合查询、连接查询以及子查询。&lt;/p&gt;
&lt;h2 id=&quot;联合查询&quot;&gt;&lt;a href=&quot;#联合查询&quot; class=&quot;headerlink&quot; title=&quot;联合查询&quot;&gt;&lt;/a&gt;联合查询&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;基本概念: 可合并多个相似的选择查询</summary>
      
    
    
    
    
  </entry>
  
  <entry>
    <title></title>
    <link href="https://1ess.github.io/MySQL(%E5%85%AD)/"/>
    <id>https://1ess.github.io/MySQL(%E5%85%AD)/</id>
    <published>2021-07-14T12:33:16.380Z</published>
    <updated>2021-07-14T12:33:16.380Z</updated>
    
    <content type="html"><![CDATA[<p>本篇，我们说说 MySQL 中的外键、视图以及事务安全等问题。</p><h2 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h2><hr><p>如果公共关键字在一个关系中是主关键字，那么这个公共关键字被称为另一个关系的外键。<br>以另一个关系的外键作为主关键字的表称为主表，具有此外键的表称为主表的从表，外键又称为外关键字。</p><h3 id="外键操作"><a href="#外键操作" class="headerlink" title="外键操作"></a>外键操作</h3><h4 id="增加外键"><a href="#增加外键" class="headerlink" title="增加外键"></a>增加外键</h4><p>MySQL 中提供两种方式增加外键: </p><ol><li><p>在创建表时，直接新增外键<br>基本语法: [constraint {外键名}] foregin key({外键字段}) references {主表}(主键);</p></li><li><p>在创建表后，再新增外键<br>基本语法: alter table {从表名} add [constraint {外键名}] foregin key({外键字段}) references {主表}(主键);</p></li></ol><h4 id="外键基本要求"><a href="#外键基本要求" class="headerlink" title="外键基本要求"></a>外键基本要求</h4><ol><li>外键字段需要保证与关联的主表的主键字段类型一致</li><li>基本属性也要相同</li><li>如果在表后增加外键，对数据有一定要求</li><li>外键只能使用 innodb 引擎</li></ol><h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><p>外键约束: 通过建立外键关系之后，对主表和从表都会有一定数据约束。</p><h4 id="约束的基本概念"><a href="#约束的基本概念" class="headerlink" title="约束的基本概念"></a>约束的基本概念</h4><ol><li>当一个外键产生时，从表会受制于主表数据的存在从而导致数据不能进行某些不符合规范的操作(不能插入主表不存在的数据)</li><li>如果一个表被其他表外键引入，那么该表的数据操作就不能随意，必须保证从表数据的有效性(不能删除从表存在的数据)</li></ol><h4 id="外键约束的概念"><a href="#外键约束的概念" class="headerlink" title="外键约束的概念"></a>外键约束的概念</h4><p>可以在创建外键时，对外键约束进行选择性的操作。</p><p>基本语法: add foregin key({外键字段}) references {主表名}(主键) on {约束模式};</p><p>约束模式有三种: </p><ol><li>district，严格模式，默认，不允许操作</li><li>cascade，级联模式，一起操作变化</li><li>set null，置空模式，主表变化，从表字段置空，前提是从表该外键字段允许为空</li></ol><p>常用约束: on update cascade on delete set null;</p><h4 id="约束的作用"><a href="#约束的作用" class="headerlink" title="约束的作用"></a>约束的作用</h4><p>保证数据的完整性: 主表数据与从表数据一致。<br>但是外键很强大，但是很少使用，因为其可能会导致业务无法把握。</p><h2 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h2><hr><h3 id="视图基本操作"><a href="#视图基本操作" class="headerlink" title="视图基本操作"></a>视图基本操作</h3><h4 id="创建视图"><a href="#创建视图" class="headerlink" title="创建视图"></a>创建视图</h4><p>视图的本质是 SQL 指令(select 语句)。<br>基本语法: create view {视图名} as select 指令</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 两表具有同名字段会有问题</span><span class="token keyword">create</span> <span class="token keyword">view</span> student_v <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_student <span class="token keyword">as</span> s <span class="token keyword">left</span> <span class="token keyword">join</span> my_class <span class="token keyword">as</span> <span class="token number">c</span> <span class="token keyword">on</span> s<span class="token punctuation">.</span>class_id <span class="token operator">=</span> <span class="token number">c</span><span class="token punctuation">.</span>class_id<span class="token punctuation">;</span><span class="token keyword">create</span> <span class="token keyword">view</span> student_v <span class="token keyword">as</span> <span class="token keyword">select</span> s<span class="token punctuation">.</span><span class="token operator">*</span><span class="token punctuation">,</span> <span class="token number">c</span><span class="token punctuation">.</span>name <span class="token keyword">from</span> my_student <span class="token keyword">as</span> s <span class="token keyword">left</span> <span class="token keyword">join</span> my_class <span class="token keyword">as</span> <span class="token number">c</span> <span class="token keyword">on</span> s<span class="token punctuation">.</span>class_id <span class="token operator">=</span> <span class="token number">c</span><span class="token punctuation">.</span>class_id<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="使用视图"><a href="#使用视图" class="headerlink" title="使用视图"></a>使用视图</h4><p>视图是一张虚拟表，可以把视图当作”表”来操作，但是视图本身没有数据，是临时执行 select 语句得到对应的结果。<br>基本语法: select 字段列表 from {视图名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> student_v<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="修改视图"><a href="#修改视图" class="headerlink" title="修改视图"></a>修改视图</h4><p>本质是修改视图对应的查询语句。<br>基本语法: alter view {视图名} as 新 select 指令</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">alter</span> <span class="token keyword">view</span> student_v <span class="token keyword">as</span> <span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> my_student <span class="token keyword">as</span> s <span class="token keyword">left</span> <span class="token keyword">join</span> my_class <span class="token keyword">as</span> <span class="token number">c</span> <span class="token keyword">using</span><span class="token punctuation">(</span>class_id<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h4 id="删除视图"><a href="#删除视图" class="headerlink" title="删除视图"></a>删除视图</h4><p>基本语法: drop view {视图名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token keyword">drop</span> <span class="token keyword">view</span> student_v<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre><h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><hr><p>事务(Transaction)是访问并可能更新数据库中各种数据项的一个程序执行单元(unit)。事务通常由高级数据库操纵语言或编程语言书写的用户程序的执行所引起的。<br>事务由事务开始(Begin Transaction)和事务结束(End Transaction)之间执行的全体操作组成。</p><h3 id="事务的基本原理"><a href="#事务的基本原理" class="headerlink" title="事务的基本原理"></a>事务的基本原理</h3><p>MySQL(Innodb) 允许将事务统一进行管理，将用户操作暂存，不直接操作数据表，等用户确认结果之后再进行操作。<br>事务在 MySQL 中通常是<strong>自动提交</strong>，也可以<strong>手动事务</strong>。</p><h3 id="自动事务"><a href="#自动事务" class="headerlink" title="自动事务"></a>自动事务</h3><p>自动事务(autocommit): 当客户端发送一条 SQL 指令(写操作)，给服务器时，服务器在执行之后，不用等待用户反馈结果，自动将结果同步到数据表。<br>关闭自动事务: set autocommit = off;<br>一旦关闭自动事务，就需要用户来提供是否同步的指令: </p><ol><li>Commit;: 提交(同步到数据表并清空该事务)</li><li>Rollback;: 回滚(清空该事务)</li></ol><p>执行事务端的客户端，在提供是否同步指令之前，该客户端仍可以根据日志对数据加工，返回同步之后的结果。</p><p>通常我们不关闭自动事务。</p><h3 id="手动事务"><a href="#手动事务" class="headerlink" title="手动事务"></a>手动事务</h3><h4 id="开启事务"><a href="#开启事务" class="headerlink" title="开启事务"></a>开启事务</h4><p>从该语句开始，之后的语句都不会直接写入数据库，而是保存在事务日志中。</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 开启事务</span><span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">-- 有的数据库使用 begin transaction;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre><h4 id="执行事务"><a href="#执行事务" class="headerlink" title="执行事务"></a>执行事务</h4><p>执行需要在事务中执行的 SQL 指令。</p><h4 id="提交事务或回滚"><a href="#提交事务或回滚" class="headerlink" title="提交事务或回滚"></a>提交事务或回滚</h4><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 提交</span><span class="token keyword">commit</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- 回滚</span><span class="token keyword">rollback</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre><h4 id="回滚点-savepoint"><a href="#回滚点-savepoint" class="headerlink" title="回滚点(savepoint)"></a>回滚点(savepoint)</h4><p>当有一系列事务操作，可以设置回滚点，使得当有事务操作失败时，可以回到该位置重新开始执行。<br>基本语法: savepoint {回滚点名};</p><pre class="line-numbers language-sql"><code class="language-sql"><span class="token comment" spellcheck="true">-- 设置回滚点</span><span class="token keyword">savepoint</span> sp1<span class="token punctuation">;</span><span class="token comment" spellcheck="true">-- 回到回滚点</span><span class="token keyword">rollback</span> sp1<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre><h3 id="事务特点"><a href="#事务特点" class="headerlink" title="事务特点"></a>事务特点</h3><p>事务具有四个特性(ACID): </p><ol><li>原子性(Atomicity): 事务被视为不可分割的最小单元，事务的所有操作要么全部提交成功，要么全部失败回滚</li><li>一致性(Consistency): 数据库在事务执行前后都保持一致性状态。在一致性状态下，所有事务对一个数据的读取结果都是相同的</li><li>隔离性(Isolation): 一个事务所做的修改在最终提交以前，对其它事务是不可见的</li><li>持久性(Durability): 一旦事务提交，则其所做的修改将会永远保存到数据库中。即使系统发生崩溃，事务执行的结果也不能丢失</li></ol><p><img src="https://cdn.jsdelivr.net/gh/1ess/cdn/contentImg/mysql/mysql1.jpg"></p><p>事务的 ACID 特性概念简单，但不是很好理解，主要是因为这几个特性不是一种平级关系: </p><ul><li>只有满足一致性，事务的执行结果才是正确的</li><li>在无并发的情况下，事务串行执行，隔离性一定能够满足。此时只要能满足原子性，就一定能满足一致性</li><li>在并发的情况下，多个事务并行执行，事务不仅要满足原子性，还需要满足隔离性，才能满足一致性</li><li>事务满足持久化是为了能应对数据库崩溃的情况</li></ul><h3 id="并发一致性问题"><a href="#并发一致性问题" class="headerlink" title="并发一致性问题"></a>并发一致性问题</h3><p>在并发环境下，事务的隔离性很难保证，因此会出现很多并发一致性问题。产生并发不一致性问题主要原因是破坏了事务的隔离性，解决方法是通过并发控制来保证隔离性。并发控制可以通过封锁来实现，但是封锁操作需要用户自己控制，相当复杂。数据库管理系统提供了事务的隔离级别，让用户以一种更轻松的方式处理并发一致性问题。</p><h3 id="封锁"><a href="#封锁" class="headerlink" title="封锁"></a>封锁</h3><h4 id="封锁粒度"><a href="#封锁粒度" class="headerlink" title="封锁粒度"></a>封锁粒度</h4><p>MySQL 中提供了两种封锁粒度: </p><ul><li>行级锁</li><li>表级锁</li></ul><p>应该尽量只锁定需要修改的那部分数据，而不是所有的资源。锁定的数据量越少，发生锁争用的可能就越小，系统的并发程度就越高。<br>但是加锁需要消耗资源，锁的各种操作(包括获取锁、释放锁、以及检查锁状态)都会增加系统开销。因此封锁粒度越小，系统开销就越大。<br>在选择封锁粒度时，需要在锁开销和并发程度之间做一个权衡。</p><h4 id="封锁类型"><a href="#封锁类型" class="headerlink" title="封锁类型"></a>封锁类型</h4><h5 id="读写锁"><a href="#读写锁" class="headerlink" title="读写锁"></a>读写锁</h5><ul><li>排它锁(Exclusive)，简写为 X 锁，又称写锁</li><li>共享锁(Shared)，简写为 S 锁，又称读锁</li></ul><p>有以下两个规定: </p><ul><li>一个事务对数据对象 A 加了 X 锁，就可以对 A 进行读取和更新。加锁期间其它事务不能对 A 加任何锁</li><li>一个事务对数据对象 A 加了 S 锁，可以对 A 进行读取操作，但是不能进行更新操作。加锁期间其它事务能对 A 加 S 锁，但是不能加 X 锁</li></ul><h5 id="意向锁"><a href="#意向锁" class="headerlink" title="意向锁"></a>意向锁</h5><p>使用意向锁(Intention Locks)可以更容易地支持多粒度封锁。<br>在存在行级锁和表级锁的情况下，事务 T 想要对表 A 加 X 锁，就需要先检测是否有其它事务对表 A 或者表 A 中的任意一行加了锁，那么就需要对表 A 的每一行都检测一次，这是非常耗时的。</p><p>意向锁在原来的 X/S 锁之上引入了 IX/IS，IX/IS 都是表锁，用来表示一个事务想要在表中的某个数据行上加 X 锁或 S 锁。有以下两个规定: </p><ul><li>一个事务在获得某个数据行对象的 S 锁之前，必须先获得表的 IS 锁或者更强的锁</li><li>一个事务在获得某个数据行对象的 X 锁之前，必须先获得表的 IX 锁</li></ul><p>通过引入意向锁，事务 T 想要对表 A 加 X 锁，只需要先检测是否有其它事务对表 A 加了 X/IX/S/IS 锁，如果加了就表示有其它事务正在使用这个表或者表中某一行的锁，因此事务 T 加 X 锁失败。</p><h4 id="封锁协议"><a href="#封锁协议" class="headerlink" title="封锁协议"></a>封锁协议</h4><ol><li>一级封锁协议: 事务 T 要修改数据 A 时必须加 X 锁，直到 T 结束才释放锁。可以解决丢失修改问题，因为不能同时有两个事务对同一个数据进行修改，那么事务的修改就不会被覆盖</li><li>二级封锁协议: 在一级的基础上，要求读取数据 A 时必须加 S 锁，读取完马上释放 S 锁。可以解决读脏数据问题，因为如果一个事务在对数据 A 进行修改，根据 1 级封锁协议，会加 X 锁，那么就不能再加 S 锁了，也就是不会读入数据</li><li>三级封锁协议: 在二级的基础上，要求读取数据 A 时必须加 S 锁，直到事务结束了才能释放 S 锁。可以解决不可重复读的问题，因为读 A 时，其它事务不能对 A 加 X 锁，从而避免了在读的期间数据发生改变</li></ol>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;本篇，我们说说 MySQL 中的外键、视图以及事务安全等问题。&lt;/p&gt;
&lt;h2 id=&quot;外键&quot;&gt;&lt;a href=&quot;#外键&quot; class=&quot;headerlink&quot; title=&quot;外键&quot;&gt;&lt;/a&gt;外键&lt;/h2&gt;&lt;hr&gt;
&lt;p&gt;如果公共关键字在一个关系中是主关键字，那么这个公共关</summary>
      
    
    
    
    
  </entry>
  
</feed>
