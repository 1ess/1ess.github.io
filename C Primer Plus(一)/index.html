

<!DOCTYPE html>
<html lang="zh-tw" xmlns:v-bind="http://www.w3.org/1999/xhtml">

<head>
    <title>C Primer Plus(一) - A Sort Of A Blog</title>
<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="author" content="Stephen Chang">
<meta name="description" content="从本篇开始，我们就要重新学习 C 语言了，参考书籍为《C Primer Plus》，是个硬骨头，加油吧💪。
初识
起源1972 年，贝尔实验室的 Den...">
<meta name="keywords" content="">

<link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml">

    <meta charset="utf-8">
    <meta name="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
    <meta content="telephone=no" name="format-detection">
    <meta name="renderer" content="webkit">
    <meta name="theme-color" content="#ffffff">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous">
<link rel="stylesheet" href="/css/journal.css?92089042">

<script src="/js/loadCSS.js"></script>
<script>
    loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Material+Icons");
    (function (d) {
        var config = {
                kitId: 'dwg1tuc',
                scriptTimeout: 3000,
                async: true
            },
            h = d.documentElement, t = setTimeout(function () {
                h.className = h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive";
            }, config.scriptTimeout), tk = d.createElement("script"), f = false,
            s = d.getElementsByTagName("script")[0], a;
        h.className += " wf-loading";
        tk.src = 'https://use.typekit.net/' + config.kitId + '.js';
        tk.async = true;
        tk.onload = tk.onreadystatechange = function () {
            a = this.readyState;
            if (f || a && a != "complete" && a != "loaded") return;
            f = true;
            clearTimeout(t);
            try {
                Typekit.load(config)
            } catch (e) {
            }
        };
        s.parentNode.insertBefore(tk, s)
    })(document);
</script>
<noscript>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css?family=Lora|Montserrat|Anonymous+Pro:400|Material+Icons"/>
</noscript>
<meta name="generator" content="Hexo 5.4.0"></head>
<body>
<div id="top"></div>
<div id="app">
<div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            <a class="a-block drawer-menu-item false" href="https://1ess.github.io">
                Home
            </a>
            
            <a class="a-block drawer-menu-item false" href="/archives">
                Archive
            </a>
            

            
            

            
            <a class="a-block drawer-menu-item" href="/atom.xml">
                RSS
            </a>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="/">
            A Sort Of A Blog
        </a>
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="/">
        <div class="single-column-header-title">A Sort Of A Blog</div>
        <div class="single-column-header-subtitle">旧游无处不堪寻，无寻处，惟有少年心</div>
    </a>
</div>
<div ref="sideContainer" class="side-container">
    <a class="a-block nav-head false" href="/">
        <div class="nav-title">
            A Sort Of A Blog
        </div>
        <div class="nav-subtitle">
            旧游无处不堪寻，无寻处，惟有少年心
        </div>
    </a>

    <div class="nav-link-list">
        
        <a class="a-block no-tint nav-link-item false" href="/archives">
            Archive
        </a>
        

        
        

        
        <a class="a-block no-tint nav-link-item" href="/atom.xml">
            RSS
        </a>
        
    </div>

    
    <div class="nav-footer">
        &copy; 2022 <a href="https://1ess.github.io">A Sort Of A Blog</a>
    </div>
</div>
<div ref="extraContainer" class="extra-container">
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>

        
    </div>
</div>



<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            <div class="post-head-wrapper"
                 style="background-image: url('https://cdn.jsdelivr.net/gh/1ess/cdn/blogImg/Blog149.jpg')">
                <div class="post-title">
                    C Primer Plus(一)
                    <div class="post-meta">
                        <time datetime="2020-06-04T00:00:00.000Z" itemprop="datePublished">
                            2020-06-04
                        </time>&nbsp;
                        
    
                        
                    </div>
                </div>
            </div>
    
            <div class="post-body-wrapper">
                <div class="post-body">
                    <p>从本篇开始，我们就要重新学习 C 语言了，参考书籍为《C Primer Plus》，是个硬骨头，加油吧💪。</p>
<h2 id="初识"><a href="#初识" class="headerlink" title="初识"></a>初识</h2><hr>
<h3 id="起源"><a href="#起源" class="headerlink" title="起源"></a>起源</h3><p>1972 年，贝尔实验室的 Dennis Ritch 和 Ken Thompson 在开发 Unix 系统时，设计了 C 语言，C 语言是在 B 语言的基础上进行设计的。</p>
<h3 id="使用理由"><a href="#使用理由" class="headerlink" title="使用理由"></a>使用理由</h3><p>虽然距离诞生已经过去 40 多年，而且在近 20 年中，有很多人转而使用脱胎于 C 语言的其他语言，如 C++、Objective-C、Java 等，但是 C 语言仍凭借自身的优点活跃在编程语言中。我们来看一下 C 语言的具体优点: </p>
<ul>
<li>设计特性: C 融合了计算机科学理论和实践的控制特性，可以让用户能轻松完成自顶向下的规划、结构化编程和模块化设计</li>
<li>高效性: C 语言具有汇编语言才有的微调控能力，可以获得最大运行速度以及可以更有效地使用内存</li>
<li>可移植性: 可移植性意味着，在一种系统编写的 C 程序稍作修改或不修改就能在其它系统运行。由于 C 语言与 Unix 关系密切，Unix 通常会将 C 编译器作为软件包的一部分。Linux 通常也会安装 C 编译器，运行各版本的 Windows 和 Mac 都能找到合适的 C 编译器。因此，无论使用何种计算机，都能找到针对特定系统的 C 编译器</li>
<li>强大灵活</li>
<li>面向程序员: C 是为了满足程序员的需求而设计的，利用 C 可以访问硬件、操控内存中的位。可以让程序员简洁地表达自己的意图</li>
</ul>
<h3 id="语言标准"><a href="#语言标准" class="headerlink" title="语言标准"></a>语言标准</h3><h4 id="K-amp-R-C"><a href="#K-amp-R-C" class="headerlink" title="K&amp;R C"></a>K&amp;R C</h4><p>C 语言发展之初，并没有标准，1987 年，Brian Kernighan 和 Dennis Ritch 合著的 The C Programming Language 第一版是公认的 C 标准。称为 K&amp;R C 或经典 C。</p>
<h4 id="C89-C90"><a href="#C89-C90" class="headerlink" title="C89/C90"></a>C89/C90</h4><p>由于应用越来越广泛，需要一个更为严格的标准，ANSI 于 1989 年定义了 C 语言和 C 标准库，ISO 于 1990 年采用这一标准，这一版本通常称为 C89 或 C90，也因为 ANSI 先公布 C 标准，因此通常称为 ANSI C。</p>
<h4 id="C99"><a href="#C99" class="headerlink" title="C99"></a>C99</h4><p>1994 年，ANSI/ISO 联合委员会开始修订 C 标准，最终发布 C99，这一标准并未在 C 语言中添加新特性，而是把国际化、弥补缺陷和提高计算实用性作为主要修订目标，并尽量与 C90 兼容。</p>
<h4 id="C11"><a href="#C11" class="headerlink" title="C11"></a>C11</h4><p>2011 年，标准委员会发布了 C11 标准，强调跟进新技术。</p>
<h3 id="编程机制"><a href="#编程机制" class="headerlink" title="编程机制"></a>编程机制</h3><p>C 的基本策略是，将源文件转换为可执行文件。典型的 C 实现是通过编译和链接两个步骤来完成这一过程的。<br>编译器将源文件编译为中间代码或目标代码，链接器将中间代码与其他代码合并，生成可执行文件。C 使用这种方法便于模块化，可以独立编译单独的模块，再用链接器合并已经编译好的模块，如果只更改某一模块，我们可以不重新编译其他模块。链接器还可以将自己编写的程序与库函数链接在一起，对于库代码，链接器只会将程序用到的库函数提取出来。</p>
<p>中间代码或目标代码也是由机器指令组成，只不过目标文件只包含编译器将我们编写的代码编译出的机器指令，可执行文件还包含程序中使用的库函数和启动代码。</p>
<p>有些系统中必须分别编译和链接程序，而在另外的系统中编译器会自动启动链接器，用户只需给出编译命令即可。</p>
<h3 id="GNU-Compiler-Collection-和-LLVM"><a href="#GNU-Compiler-Collection-和-LLVM" class="headerlink" title="GNU Compiler Collection 和 LLVM"></a>GNU Compiler Collection 和 LLVM</h3><p>GNU Compiler Collection 包含 GCC C Compiler，GCC 在持续不断地开发，紧跟 C 标准改动，GCC 有各种版本以适应不同的平台和操作系统，使用 gcc 命令便可调用 GCC C Compiler，并且许多系统使用 cc 作为 gcc 别名。gcc 基本用法为: </p>
<figure class="highlight c"><table><tr><td class="code"><pre><code class="hljs c">gcc [option] [file]<br></code></pre></td></tr></table></figure>

<p>LLVM 是 gcc 的另一个替代品，该项目是与编译器相关的开源软件集合，他的 Clang 编译器前端处理 C 代码，可通过 clang 命令调用，有多个不同版本支持不同平台。</p>
<p>各系统都使用 cc 别名来替代 gcc 或 clang。<br>我们可以使用如下命令显示版本信息: </p>
<figure class="highlight c"><table><tr><td class="code"><pre><code class="hljs c">cc -v<br></code></pre></td></tr></table></figure>

<h2 id="C-语言概述"><a href="#C-语言概述" class="headerlink" title="C 语言概述"></a>C 语言概述</h2><hr>
<h3 id="语句"><a href="#语句" class="headerlink" title="语句"></a>语句</h3><p>C 语言标准中有 6 种语句: </p>
<ul>
<li>标号语句</li>
<li>复合语句</li>
<li>表达式语句</li>
<li>选择语句</li>
<li>迭代语句</li>
<li>跳转语句</li>
</ul>
<p>注意: C 语言是通过赋值运算符而不是赋值表达式完成赋值操作的，C 标准中并没有赋值语句，平常我们提到的赋值语句其实是表达式语句。C 标准中也没有函数调用语句，本质也是表达式语句。</p>
<h3 id="提高程序可读性"><a href="#提高程序可读性" class="headerlink" title="提高程序可读性"></a>提高程序可读性</h3><ul>
<li>选择有意义的函数名</li>
<li>写注释</li>
<li>函数中用空行分隔多个部分</li>
<li>每条语句各占一行</li>
</ul>
<h3 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h3><p>C 90 标准新增了函数原型(prototype)，函数原型是一种声明形式，因此函数原型也被称为函数声明(function declaration)。语法如下: </p>
<figure class="highlight c"><table><tr><td class="code"><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">butler</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span></span>;<br></code></pre></td></tr></table></figure>

<p>之后，我们还需要函数定义，即函数的真正实现: </p>
<figure class="highlight c"><table><tr><td class="code"><pre><code class="hljs c"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">butler</span><span class="hljs-params">(<span class="hljs-keyword">void</span>)</span> </span>&#123;<br>    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;yes sir&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>C 标准建议，为程序中用到的函数都提供函数声明。</p>
<h2 id="数据和-C"><a href="#数据和-C" class="headerlink" title="数据和 C"></a>数据和 C</h2><hr>
<h3 id="数据类型关键字"><a href="#数据类型关键字" class="headerlink" title="数据类型关键字"></a>数据类型关键字</h3><p>C 语言基本类型关键字，K&amp;R C 有 7 个类型相关的关键字。C90 添加了 2 个关键字，C99 又添加了 3 个关键字: </p>
<table>
<thead>
<tr>
<th>K&amp;R C</th>
<th>C90</th>
<th>C99</th>
</tr>
</thead>
<tbody><tr>
<td>int</td>
<td>signed</td>
<td>_Bool</td>
</tr>
<tr>
<td>long</td>
<td>void</td>
<td>_Complex</td>
</tr>
<tr>
<td>short</td>
<td></td>
<td>_Imaginary</td>
</tr>
<tr>
<td>unsigned</td>
<td></td>
<td></td>
</tr>
<tr>
<td>char</td>
<td></td>
<td></td>
</tr>
<tr>
<td>float</td>
<td></td>
<td></td>
</tr>
<tr>
<td>double</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="整数类型"><a href="#整数类型" class="headerlink" title="整数类型"></a>整数类型</h3><p>注意: C 语言只规定 short 占用的内存空间不能多于 int，long 占用的内存空间不能少于 int。<br>现在个人计算机常见配置，long long 占 64 位，long 占 32 位，short 占 16 位，int 占 16 或 32 位。原则上四种类型代表四种不同大小，实际使用中会有重叠。</p>
<p>通常，程序中的数字都被存储为 int，如果存储不下，编译器会将其视为 long，如果还超过 long 的范围，编译器会将其视为 unsigned long，如果还不够，则编译器视为 long long。<br>有些情况下，需要使用 long 类型存储一个小数字，我们要在数值结尾添加一个 l 或 L。类似的，在支持 long long 类型的系统，我们在字面量后附加 ll 或 LL 来表示 long long 类型。另外，u 或 U 表示 unsigned。</p>
<p>注意: 如果存储的变量超出范围，则会从起点重新开始，溢出行为是未定义行为，即 C 标准并未定义溢出规则。</p>
<h3 id="char-类型"><a href="#char-类型" class="headerlink" title="char 类型"></a>char 类型</h3><p>char 类型用于存储字符，但是从技术层面看，char 本质还是整数类型，计算机采用数字编码来处理字符，即用特定的整数表示特定的字符。之后我可能会讲一些关于字符编码的知识，目前常用的字符编码为 ASCII 和 Unicode 编码，Unicode 兼容 ASCII。标准 ASCII 编码为 0~127，只需要 7 位二进制数即可，许多系统还提供 ASCII 扩展编码，使用了 8 位二进制。</p>
<p>C 语言把 1 个字节定义为 char 类型占用的位数。用单引号括起来的单个字符称为字符常量: </p>
<figure class="highlight c"><table><tr><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">char</span> grade = <span class="hljs-string">&#x27;A&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>实际上，字符是以整数进行存储的，因此，我们也可以直接将整数赋值给字符变量: </p>
<figure class="highlight c"><table><tr><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">char</span> grade = <span class="hljs-number">65</span>;<br></code></pre></td></tr></table></figure>

<p>但是这不是一种好的编程风格。</p>
<p>C 语言提供两种方式表示控制字符: </p>
<ol>
<li>使用 ASCII 码</li>
<li>使用转义字符</li>
</ol>
<p>注意: \n 代表换行，将光标移动到下一行的起始位置。\r 代表回车，将光标移动到当前行的起始位置。\0oo 和 \xhh 是 ASCII 码的特殊表示，如果用八进制表示一个字符，例如编译器不识别 \a，我们可以使用 ASCII 码代替: </p>
<figure class="highlight c"><table><tr><td class="code"><pre><code class="hljs c"><span class="hljs-keyword">char</span> beep = <span class="hljs-string">&#x27;\007&#x27;</span><br></code></pre></td></tr></table></figure>

<p>此外，要注意，有些编译器把 char 类型实现为有符号类型，范围是 -128 ~ 127 之间，而有的编译器则实现为无符号类型，范围是 0 ~ 255。我们可以查阅 limits.h 文件确定。</p>
<p>根据 C90 标准，我们可以在 char 前使用 signed 或 unsigned 来限定到底是用什么类型，而不用管编译器的默认实现。</p>
<h3 id="Bool-类型"><a href="#Bool-类型" class="headerlink" title="_Bool 类型"></a>_Bool 类型</h3><p>C99 新增了 _Bool 类型用于表示布尔值，实际也是整数类型，但原则上只占用一位存储空间。</p>
<h3 id="浮点数类型"><a href="#浮点数类型" class="headerlink" title="浮点数类型"></a>浮点数类型</h3><p>C 语言中浮点数包括: </p>
<ul>
<li>float</li>
<li>double</li>
<li>long double</li>
</ul>
<p>C 语言规定: float 类型必须至少保留 6 位有效数字，取值范围至少是 10<sup>-37</sup>~10<sup>37</sup>，double 类型和 float 类型表示的最小取值范围相同，但必须至少保留 10 位有效数字，对于 long double，C 语言只保证精度至少和 double 相同。</p>
<p>默认情况编译器假定浮点常量为 double 类型，如果想使用 float 类型，需要在常量后加 f 或 F。</p>
<h3 id="printf"><a href="#printf" class="headerlink" title="printf()"></a>printf()</h3><p>printf() 函数把输出会先发送到缓冲区，然后再将缓冲区的内容发送到屏幕上，从缓冲区发送到屏幕或文件这一过程称为刷新缓冲区。C 标准明确规定如下三种情况会将内容发送到屏幕: </p>
<ul>
<li>缓冲区满</li>
<li>遇到换行符</li>
<li>需要输入，即遇到 scanf() 函数</li>
<li>使用 fflush() 函数强制刷新缓冲区</li>
</ul>

                </div>
            </div>
    
            <nav class="post-pagination">
    
    <a class="newer-posts" href="/C%20Primer%20Plus(%E4%BA%8C)/">
        Previous post<br>C Primer Plus(二)
    </a>
    
    <span class="page-number"></span>
    
    <a class="older-posts" href="/Docker%20Compose/">
        Next post<br>Docker Compose
    </a>
    
</nav>

    
            


        </div>
    </div>
    <div class="single-column-footer">
    &copy; 2022 <a href="https://1ess.github.io">A Sort Of A Blog</a>
</div>
</div>

</div>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.4/dist/umd/popper.min.js"
        integrity="sha256-EGs9T1xMHdvM1geM8jPpoo8EZ1V1VRsmcJz8OByENLA=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"
        integrity="sha256-VsEqElsCHSGmnmHXGQzvoWjWwoznFSZc6hs7ARLRacQ=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.min.js"
        integrity="sha256-FtWfRI+thWlNz2sB3SJbwKx5PgMyKIVgwHCTwa3biXc=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/smooth-scroll@14.2.1/dist/smooth-scroll.polyfills.min.js"
        integrity="sha256-CI4Gq5E0io1Pv0xM3qPM+NUIOhbIBvC3GiN1Y4KhXpw=" crossorigin="anonymous"></script>
<script src="/js/journal.js?86411831"></script>



</body>
</html>
