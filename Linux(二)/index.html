<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author"><title> · A Sort Of A Blog</title><meta name="description" content="上一篇中，我们说了一些 Linux 的历史，讲解了一些 shell 的基本命令。本篇，我们在来说一下在 Linux 下，如何根据条件查找文件以及打包压缩指令。
查找指令
命令查找我们可以使用 which 或者 whereis 命令查找命令所在路径。
which mkdir# /usr/bin/mkd"><meta name="keywords" content=""><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="https://cdn.jsdelivr.net/gh/1ess/cdn/h4cker/favicon-32x32.png" type="image/x-icon"><link rel="stylesheet" href="/css/bootstrap.min.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/style-dark.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism.css" type="text/css">
<link rel="stylesheet" href="/css/prism-line-numbers.css" type="text/css"></head><body><div id="stage" class="container"><div class="row"><div id="side-bar" class="col-sm-3 col-xs-12 side-container invisible"><div class="vertical-text site-title"><h3 tabindex="-1" class="site-title-small"><a href="/" class="a-title">0x7c00</a></h3><h1 tabindex="-1" class="site-title-large"><a href="/" class="a-title">张冬冬的博客</a></h1><!--h6(onclick="triggerSiteNav()") Trigger--></div><br class="visible-lg visible-md visible-sm"><div id="site-nav" class="site-title-links"><ul><li><a href="/">首頁</a></li><li><a href="/archives">歸檔</a></li><li class="soc"><a href="https://github.com/1ess" target="_blank" rel="noopener noreferrer"><i class="fa fa-github">&nbsp;</i></a></li></ul><div class="visible-lg visible-md visible-sm site-nav-footer"><br class="site-nav-footer-br"><footer><p>&copy;&nbsp;2021&nbsp;</p><p>如果五分钟后她必须进安检，如果安检在十米之外</p><p>那意味着，你们可以亲吻四分五十秒。&nbsp;</p></footer></div></div></div><div id="main-container" class="col-sm-9 col-xs-12 main-container invisible"><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post-container"><p class="post-title"><a></a></p><p class="post-meta"><span class="date meta-item">發佈於&nbsp;2021-07-14</span></p><p class="post-abstract"><p>上一篇中，我们说了一些 Linux 的历史，讲解了一些 shell 的基本命令。本篇，我们在来说一下在 Linux 下，如何根据条件查找文件以及打包压缩指令。</p>
<h2 id="查找指令"><a href="#查找指令" class="headerlink" title="查找指令"></a>查找指令</h2><hr>
<h3 id="命令查找"><a href="#命令查找" class="headerlink" title="命令查找"></a>命令查找</h3><p>我们可以使用 which 或者 whereis 命令查找命令所在路径。</p>
<figure class="highlight sh"><table><tr><td class="code"><pre class="line-numbers language-hljs sh"><span class="hljs-built_in">which</span> mkdir<br><span class="hljs-comment"># /usr/bin/mkdir</span><br><br>whereis mkdir<br><span class="hljs-comment"><code class="language-hljs sh"><span class="hljs-built_in">which</span> mkdir<br><span class="hljs-comment"># /usr/bin/mkdir</span><br><br>whereis mkdir<br><span class="hljs-comment"># mkdir: /usr/bin/mkdir /usr/share/man/man1/mkdir.1.gz /usr/share/man/man1p/mkdir.1p.gz /usr/share/man/man2/mkdir.2.gz /usr/share/man/man3p/mkdir.3p.gz</span><br><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></td></tr></table></figure>

<h3 id="文件查找"><a href="#文件查找" class="headerlink" title="文件查找"></a>文件查找</h3><p>我们使用 find 命令来查找文件。<br>find 命令用于精确查找，磁盘搜索，IO 读写，CPU 开销大。</p>
<h4 id="查找后输出到标准输出"><a href="#查找后输出到标准输出" class="headerlink" title="查找后输出到标准输出"></a>查找后输出到标准输出</h4><p>格式: </p>
<figure class="highlight sh"><table><tr><td class="code"><pre class="line-numbers language-hljs sh"><code class="language-hljs sh">find [目标路径] [选项] [关键字]<br><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></td></tr></table></figure>

<p>常见选项: </p>
<ul>
<li>name: 按文件名查找文件</li>
<li>iname: 按文件名忽略大小写查找文件</li>
<li>size: 按文件大小查找文件，+1M 表示大于 1M 的文件，-1M 表示小于 1M 的文件</li>
<li>type: 按文件类型查找文件</li>
<li>mtime: 按文件修改时间查找文件，-n 表示 n 天以内，+n 表示 n 天以前</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre class="line-numbers language-hljs sh">find ./ -name <span class="hljs-string"><code class="language-hljs sh">find ./ -name <span class="hljs-string">&#x27;*.conf&#x27;</span><br><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></td></tr></table></figure>

<p>注意: </p>
<ul>
<li>使用 -size 时要注意，-1M 如果没找到以 M 为单位的目标，就会四舍五入到下一个单位 -1k。比如 2.1kb 文件 不匹配 -1M</li>
<li>使用 -mtime 时要注意，+2 表示 2 天以前，不包括第二天，-2 表示 2 天以内，也不包括第二天。比如今天是 22 号，+2 表示查找到 19 号的数据，-2 表示查找 21， 22 号 2 天的数据</li>
</ul>
<h4 id="查找后执行指令"><a href="#查找后执行指令" class="headerlink" title="查找后执行指令"></a>查找后执行指令</h4><p>我们使用 find 命令来查找文件之后，执行一些操作。<br>格式: </p>
<figure class="highlight sh"><table><tr><td class="code"><pre class="line-numbers language-hljs sh"><code class="language-hljs sh">find [目标路径] [选项] [关键字] [动作]<br><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></td></tr></table></figure>

<p>常见动作: </p>
<ul>
<li>exec: 对查找到的文件直接执行命令</li>
<li>ok: 对查找到的文件询问式执行命令</li>
<li>delete: 删除查找到的文件</li>
<li>ls: 列出查找到的文件</li>
<li>print: 打印查找到的文件(默认选项)</li>
</ul>
<p>注意: -exec 和 -ok 后的命令以 “ &#92;;” 结束，{} 作为查找到文件占位符。</p>
<h2 id="压缩打包指令"><a href="#压缩打包指令" class="headerlink" title="压缩打包指令"></a>压缩打包指令</h2><hr>
<h3 id="压缩工具"><a href="#压缩工具" class="headerlink" title="压缩工具"></a>压缩工具</h3><ul>
<li>zip: 兼容类 Unix 和 Windows 系统，可以压缩多个文件或目录，解压缩使用 unzip</li>
<li>gzip: 压缩单个文件，解压缩使用 gunzip</li>
</ul>
<h4 id="zip"><a href="#zip" class="headerlink" title="zip"></a>zip</h4><p>格式: </p>
<figure class="highlight sh"><table><tr><td class="code"><pre class="line-numbers language-hljs sh"><code class="language-hljs sh">zip [压缩后文件] [需要压缩的文件]<br><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></td></tr></table></figure>

<p>常用参数: </p>
<ul>
<li>r: 递归压缩</li>
</ul>
<h4 id="unzip"><a href="#unzip" class="headerlink" title="unzip"></a>unzip</h4><p>格式: </p>
<figure class="highlight sh"><table><tr><td class="code"><pre class="line-numbers language-hljs sh"><code class="language-hljs sh">unzip [需要解缩的文件] -d [解缩的文件路径]<br><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></td></tr></table></figure>

<p>常用参数: </p>
<ul>
<li>d: 解缩的文件存储路径</li>
</ul>
<h3 id="打包工具"><a href="#打包工具" class="headerlink" title="打包工具"></a>打包工具</h3><h4 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h4><p>tar 可以将多个文件打包成一个并压缩。与 zip 不同的是，tar 可以指定压缩格式为 gzip 等。<br>格式: </p>
<figure class="highlight sh"><table><tr><td class="code"><pre class="line-numbers language-hljs sh"><code class="language-hljs sh">tar [选项] [打包后的文件] [需要打包的文件]<br><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></td></tr></table></figure>

<p>常用参数: </p>
<ul>
<li>c: 打包</li>
<li>v: 显示详细信息</li>
<li>z: 压缩使用 gzip 格式</li>
<li>f: 指定包名</li>
<li>x: 解包</li>
<li>C: 指定解压路径</li>
<li>t: 列出包内容</li>
</ul>
<figure class="highlight sh"><table><tr><td class="code"><pre class="line-numbers language-hljs sh"><span class="hljs-comment"># 打包</span><br>tar -cvzf ./xx.tar.gz ./*<br><br><span class="hljs-comment"><code class="language-hljs sh"><span class="hljs-comment"># 打包</span><br>tar -cvzf ./xx.tar.gz ./*<br><br><span class="hljs-comment"># 解包</span><br>tar -xzvf ./xx.tar.gz -C ./tmp/<br><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></td></tr></table></figure></p></div><div class="pagination"><p class="clearfix"><span class="pre pagbuttons"><a role="navigation" href="/Linux(%E4%B8%80)/" title=""><i class="fa fa-angle-double-left"></i>&nbsp;上一篇: </a></span><span>&nbsp;</span><span class="next pagbuttons"><a role="navigation" href="/Linux(%E4%B8%89)/" title="">下一篇: &nbsp;<i class="fa fa-angle-double-right"></i></a></span></p></div></div></div></div><div class="visible-xs site-bottom-footer"><footer><p>&copy;&nbsp;2021&nbsp;</p><p>如果五分钟后她必须进安检，如果安检在十米之外</p><p>那意味着，你们可以亲吻四分五十秒。&nbsp;</p></footer></div></div></div></div><script src="/js/jquery-3.1.0.min.js"></script><script src="/js/bootstrap.min.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script><script src="/js/google-analytics.js"></script><script src="/js/typography.js"></script></body></html>